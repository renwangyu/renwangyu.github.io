{"version":3,"sources":["../node_modules/react/index.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/classnames/index.js","../node_modules/three/three.js","../node_modules/object-assign/index.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.min.js"],"names":["module","exports","require","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_arrayLikeToArray","arr","len","arr2","Array","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","toString","call","slice","constructor","name","from","test","hasOwn","hasOwnProperty","classNames","classes","arguments","arg","argType","inner","apply","join","default","THREE","REVISION","define","Number","EPSILON","Math","pow","sign","x","Function","get","this","match","assign","output","index","source","nextKey","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","Color","r","g","b","set","setRGB","copy","setHex","setStyle","setScalar","scalar","hex","floor","setHSL","hue2rgb","p","q","t","h","s","l","euclideanModulo","clamp","style","handleAlpha","string","parseFloat","console","warn","m","exec","color","components","min","parseInt","size","charAt","ColorKeywords","clone","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","sqrt","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","max","lightness","delta","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","c","fromArray","array","offset","toArray","Quaternion","y","z","w","_x","_y","_z","_w","onChangeCallback","quaternion","setFromEuler","euler","update","Euler","Error","c1","cos","c2","c3","s1","sin","s2","s3","order","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","v1","vFrom","vTo","Vector3","dot","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","premultiply","a","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","slerp","qb","cosHalfTheta","sinHalfTheta","halfTheta","atan2","ratioA","ratioB","onChange","callback","qa","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","tDir","f","Vector2","setX","setY","setComponent","getComponent","addVectors","addScaledVector","sub","subVectors","subScalar","isFinite","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","ceil","round","roundToZero","negate","lengthManhattan","PI","distanceTo","distanceToSquared","dx","dy","setLength","lerpVectors","v2","fromAttribute","attribute","itemSize","rotateAround","center","setZ","multiplyVectors","applyEuler","error","applyQuaternion","applyAxisAngle","applyMatrix3","e","applyMatrix4","applyProjection","d","qx","qy","qz","qw","ix","iy","iz","iw","project","matrix","camera","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","vector","projectOnPlane","planeNormal","reflect","normal","angleTo","theta","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromMatrixPosition","setFromMatrixColumn","setFromMatrixScale","sx","sy","sz","temp","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","end","line","distanceSq","distance","at","result","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","closestPointToPoint","Box2","Infinity","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","isEmpty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","intersectsBox","clampPoint","distanceToPoint","intersect","union","translate","Box3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromObject","object","scope","updateMatrixWorld","traverse","node","geometry","Geometry","vertices","BufferGeometry","attributes","positions","intersectsSphere","closestPoint","sphere","intersectsPlane","plane","constant","getBoundingSphere","Sphere","Matrix3","Float32Array","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","me","setFromMatrix4","applyToVector3Array","j","applyToBuffer","buffer","getX","getY","getZ","setXYZ","determinant","throwOnDegenerate","t11","t12","t13","det","msg","detInv","transpose","tmp","flattenToArrayOffset","getNormalMatrix","matrix4","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","x2","y2","z2","wx","wy","wz","lookAt","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","getPosition","setPosition","t14","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","ymax","tan","DEG2RAD","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","intersectSphere","tca","d2","radius2","thc","t0","t1","distanceToPlane","denominator","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","intersectsLine","startSign","endSign","coplanarPoint","m1","optionalNormalMatrix","referencePoint","normalMatrix","Spherical","other","makeSafe","vec3","RAD2DEG","generateUUID","chars","split","uuid","rnd","random","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","nearestPowerOfTwo","log","LN2","nextPowerOfTwo","Spline","intPoint","weight","w2","w3","pa","pb","pc","pd","v3","interpolate","t2","t3","initFromArray","getPoint","k","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","edgeList","projectedPoint","minDistance","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","values","stride","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","create","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","DiscreteInterpolant","LinearInterpolant","offset1","offset0","weight1","weight0","QuaternionLinearInterpolant","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","Date","now","stop","getElapsedTime","getDelta","newTime","EventDispatcher","addEventListener","type","listener","_listeners","listeners","indexOf","hasEventListener","removeEventListener","listenerArray","splice","dispatchEvent","event","Layers","mask","channel","enable","toggle","disable","layers","ascSort","intersectObject","raycaster","intersects","recursive","visible","raycast","children","Raycaster","params","Mesh","Line","LOD","Points","threshold","Sprite","defineProperties","PointCloud","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","sort","intersectObjects","objects","Object3D","Object3DIdCount","parent","DefaultUp","rotation","modelViewMatrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","frustumCulled","renderOrder","userData","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","meta","isRootObject","geometries","materials","textures","images","metadata","version","generator","JSON","stringify","material","extractFromCache","cache","data","parse","child","Face3","materialIndex","vertexNormals","vertexColors","BufferAttribute","normalized","dynamic","updateRange","count","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyIndicesArray","indices","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","getW","setXY","setXYZW","Int8Attribute","Int8Array","Uint8Attribute","Uint8Array","Uint8ClampedAttribute","Uint8ClampedArray","Int16Attribute","Int16Array","Uint16Attribute","Uint16Array","Int32Attribute","Int32Array","Uint32Attribute","Uint32Array","Float32Attribute","Float64Attribute","Float64Array","DynamicBufferAttribute","InstancedBufferAttribute","meshPerAttribute","InterleavedBuffer","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","GeometryIdCount","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","face","jl","computeBoundingBox","obj","fromBufferGeometry","normals","uvs","uv","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","groups","group","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeTangents","computeLineDistances","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precision","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","newUvs1","newUvs2","parameters","vertex","normalsHash","colorsHash","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","uvsCopy","kl","dispose","DirectGeometry","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","morphAttributes","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","toNonIndexed","geometry2","array2","MaxIndex","InstancedBufferGeometry","maxInstancedCount","instances","Uniform","onUpdate","onUpdateCallback","AnimationAction","_new","mixer","clip","localRoot","_mixer","_clip","_localRoot","tracks","nTracks","interpolants","interpolantSettings","interpolant","createInterpolant","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","time","timeScale","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","_deactivateAction","reset","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","mode","setEffectiveWeight","getEffectiveWeight","fadeIn","duration","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","_lendControlInterpolant","times","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","accuIndex","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","accumulate","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationClip","resetDuration","trim","optimize","track","json","jsonTracks","frameTime","fps","KeyframeTrack","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","AnimationUtils","getKeyframeOrder","sortedArray","NumberKeyframeTrack","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","animation","bones","nodeName","addNonemptyTrack","trackType","trackName","animationKeys","propertyName","destTracks","flattenJSON","clipName","hierarchyTracks","hierarchy","keys","morphTargetNames","morphTargetName","animationKey","boneName","VectorKeyframeTrack","QuaternionKeyframeTrack","AnimationMixer","root","_initMemoryManager","_accuIndex","clipAction","optionalRoot","rootUuid","clipObject","clipUuid","actionsForClip","_actionsByClip","prototypeAction","existingAction","actionByRoot","knownActions","newAction","_Action","_bindAction","_addInactiveAction","stopAllAction","actions","_actions","nActions","_nActiveActions","bindings","_bindings","nBindings","_nActiveBindings","useCount","uncacheClip","actionsByClip","actionsToRemove","cacheIndex","lastInactiveAction","pop","_removeInactiveBindingsForAction","uncacheRoot","_removeInactiveAction","bindingByName","_bindingsByRootAndName","binding","restoreOriginalState","_removeInactiveBinding","uncacheAction","bindingsByRoot","bindingsByName","referenceCount","_addInactiveBinding","path","parsedPath","PropertyMixer","PropertyBinding","ValueTypeName","getValueSize","_lendBinding","saveOriginalState","_lendAction","_takeBackBinding","_takeBackAction","_controlInterpolants","_nActiveControlInterpolants","stats","controlInterpolants","knownActionsForClip","lastKnownAction","byClipCacheIndex","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","propBinding","rootNode","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","AnimationObjectGroup","var_args","_objects","nCachedObjects_","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","nObjects","nCachedObjects","indicesByUUID","paths","parsedPaths","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","lastIndex","last","subscribe_","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","arraySlice","to","isTypedArray","subarray","convertArray","forceClone","BYTES_PER_ELEMENT","ArrayBuffer","isView","DataView","nValues","srcOffset","jsonKeys","valuePropertyName","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","message","getInterpolation","shift","timeOffset","endTime","nKeys","valid","prevTime","currTime","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","_getTrackTypeForValueTypeName","typeName","toLowerCase","ColorKeyframeTrack","BooleanKeyframeTrack","StringKeyframeTrack","parseTrackName","findNode","getValue","targetArray","bind","setValue","sourceArray","targetObject","objectName","propertyIndex","_getValue_unavailable","_setValue_unavailable","objectIndex","skeleton","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","resolvedProperty","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","_getValue_unbound","_setValue_unbound","dest","Composite","targetGroup","optionalParsedPath","_targetGroup","firstValidIndex","re","matches","results","bone","searchSkeleton","subTreeNode","searchNodeSubtree","childNode","mixFunction","bufferType","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","currentWeight","mix","originalValueOffset","Audio","context","createBufferSource","onended","onEnded","gain","createGain","connect","getInput","autoplay","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","getOutput","setNodeSource","audioNode","setBuffer","audioBuffer","pause","currentTime","disconnect","getFilters","setFilters","getFilter","setFilter","filter","setPlaybackRate","getPlaybackRate","getLoop","getVolume","setVolume","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","window","AudioContext","webkitAudioContext","PositionalAudio","panner","createPanner","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","AudioListener","destination","removeFilter","getMasterVolume","setMasterVolume","orientation","setOrientation","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","options","format","magFilter","minFilter","renderTarget","WebGLRenderTargetCube","updateCubeMap","renderer","scene","generateMipmaps","texture","activeCubeFace","render","setRenderTarget","zoom","updateProjectionMatrix","cx","cy","focus","view","filmGauge","filmOffset","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","width","height","offsetX","offsetY","clearViewOffset","skew","StereoCamera","cameraL","cameraR","eyeRight","eyeLeft","eyeSepOnProjection","Light","intensity","groundColor","decay","penumbra","LightShadow","bias","mapSize","map","AmbientLight","DirectionalLight","shadow","DirectionalLightShadow","light","HemisphereLight","skyColor","PointLight","power","SpotLight","SpotLightShadow","AudioLoader","manager","DefaultLoadingManager","load","url","onLoad","onProgress","onError","loader","XHRLoader","setResponseType","decodeAudioData","Cache","files","file","clear","Loader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","extractUrlBase","initMaterials","texturePath","createMaterial","textureLoader","materialLoader","TextureLoader","MaterialLoader","loadTexture","repeat","wrap","anisotropy","fullPath","Handlers","setCrossOrigin","wrapS","wrapT","blending","specular","emissive","shininess","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","lightMap","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","aoMap","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","bumpMap","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","bumpScale","normalMap","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","normalScale","specularMap","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","alphaMap","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","side","opacity","transparent","setTextures","handlers","regex","cached","setTimeout","request","XMLHttpRequest","overrideMimeType","open","response","status","itemEnd","itemError","responseType","withCredentials","send","itemStart","setPath","setWithCredentials","FontLoader","text","substring","font","Font","ImageLoader","image","document","createElement","src","JSONLoader","_statusDomElement","setTexturePath","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","hasMaterial","faceA","faceB","uvLayer","nUvLayers","parseModel","influencesPerVertex","parseSkin","dstVertices","srcVertices","morphColors","parseMorphing","outputAnimations","concat","morphAnimationClips","parseAnimations","LoadingManager","isLoading","itemsLoaded","itemsTotal","onStart","BufferGeometryLoader","TYPED_ARRAYS","typedArray","drawcalls","offsets","getTexture","roughness","metalness","uniforms","vertexShader","fragmentShader","shading","alphaTest","depthTest","depthWrite","colorWrite","wireframe","wireframeLinewidth","sizeAttenuation","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","emissiveIntensity","envMap","combine","reflectivity","lightMapIntensity","aoMapIntensity","ObjectLoader","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","widthSegments","heightSegments","depth","depthSegments","segments","thetaStart","thetaLength","radiusTop","radiusBottom","radialSegments","openEnded","phiStart","phiLength","detail","innerRadius","outerRadius","thetaSegments","phiSegments","tube","tubularSegments","arc","loadImage","parseConstant","Texture","mapping","getGeometry","getMaterial","Scene","SkinnedMesh","Group","levels","level","addLevel","CubeTextureLoader","urls","CubeTexture","loaded","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","texData","mipmaps","mipmapCount","CompressedTextureLoader","CompressedTexture","texDatas","isCubemap","Material","MaterialIdCount","fog","lights","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","clippingPlanes","clipShadows","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","overdraw","_needsUpdate","setValues","newValue","currentValue","isRoot","srcPlanes","dstPlanes","LineBasicMaterial","linewidth","linecap","linejoin","LineDashedMaterial","dashSize","gapSize","MeshBasicMaterial","refractionRatio","wireframeLinecap","wireframeLinejoin","skinning","MeshDepthMaterial","depthPacking","MeshLambertMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshStandardMaterial","defines","envMapIntensity","MeshPhysicalMaterial","MultiMaterial","PointsMaterial","ShaderMaterial","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","UniformsUtils","RawShaderMaterial","SpriteMaterial","ShadowMaterial","UniformsLib","ShaderChunk","encoding","TextureIdCount","sourceFile","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","canvas","toDataURL","getContext","drawImage","getDataURL","transformUv","DepthTexture","CanvasTexture","VideoTexture","video","requestAnimationFrame","readyState","HAVE_CURRENT_DATA","inverseMatrix","localThreshold","localThresholdSq","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","LineSegments","precisionSq","vStart","vEnd","interSegment","interRay","step","faceIndex","nbVertices","drawMode","updateMorphTargets","setDrawMode","morphTargetBase","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","checkBufferGeometryIntersection","intersection","fvA","fvB","fvC","isFaceMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","Bone","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","offsetMatrix","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","sw","vec","skinWeight","getObjectForDistance","matrixPosition","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","merged","uniforms_src","uniforms_dst","parameter_src","common","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","properties","ShaderLib","WebGLRenderer","_canvas","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","opaqueObjects","opaqueObjectsLastIndex","transparentObjects","transparentObjectsLastIndex","sprites","domElement","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","localClippingEnabled","gammaInput","gammaOutput","physicallyCorrectLights","toneMapping","toneMappingExposure","toneMappingWhitePoint","maxMorphTargets","maxMorphNormals","autoScaleCubemaps","_gl","_this","_currentProgram","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentScissor","_currentScissorTest","_currentViewport","_usedTextureUnits","_clearColor","_clearAlpha","_width","_height","_pixelRatio","_scissor","_scissorTest","_viewport","_frustum","_clipping","WebGLClipping","_clippingEnabled","_localClippingEnabled","_sphere","_projScreenMatrix","_vector3","_lights","ambient","directional","directionalShadowMap","directionalShadowMatrix","spot","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","hemi","shadows","_infoMemory","_infoRender","calls","info","memory","programs","getShaderPrecisionFormat","onContextLost","_isWebGL2","WebGL2RenderingContext","WebGLExtensions","capabilities","WebGLCapabilities","state","WebGLState","paramThreeToGL","WebGLProperties","WebGLObjects","programCache","WebGLPrograms","lightCache","WebGLLights","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","getTargetPixelRatio","glClearColor","clearColor","setDefaultGLState","init","scissor","viewport","resetGLState","shadowMap","WebGLShadowMap","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","preventDefault","onTextureDispose","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","delete","deallocateTexture","onRenderTargetDispose","renderTargetProperties","depthTexture","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","deallocateRenderTarget","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","program","releaseProgram","absNumericalSort","painterSortStable","reversePainterSortStable","pushRenderItem","renderItem","isSphereViewable","numPlanes","negRad","renderObjects","renderList","ImmediateRenderObject","setMaterial","setProgram","renderBufferImmediate","renderBufferDirect","CULL_FACE","setFlipSided","setBlending","setDepthFunc","setDepthTest","setDepthWrite","setColorWrite","setPolygonOffset","materialProperties","useCache","setState","numClippingPlanes","lightsHash","getParameters","code","getProgramCode","programChange","shaderID","shader","__webglShader","acquireProgram","getAttributes","numSupportedMorphTargets","numSupportedMorphNormals","uniform","ambientLightColor","directionalLights","spotLights","pointLights","hemisphereLights","progUniforms","getUniforms","uniformsList","WebGLUniforms","seqWithValue","seq","dynamicUniforms","splitDynamic","initMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","logarithmicDepthBuffer","uCamPos","cameraPosition","setOptional","floatVertexTextures","fogColor","fogNear","fogFar","fogDensity","refreshUniformsFog","diffuse","uvScaleMap","WebGLRenderTarget","offsetRepeat","flipEnvMap","refreshUniformsCommon","refreshUniformsLine","totalSize","refreshUniformsDash","clientHeight","refreshUniformsPoints","refreshUniformsLambert","refreshUniformsPhong","refreshUniformsStandard","refreshUniformsPhysical","upload","dynUniforms","evalDynamic","setTextureParameters","textureType","isPowerOfTwoImage","extension","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","uploadTexture","slot","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","maxTextureSize","textureNeedsPowerOfTwo","HTMLImageElement","HTMLCanvasElement","makePowerOfTwo","glFormat","glType","mipmap","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","texImage2D","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","__version","maxSize","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthRenderbuffer","isCube","setTexture2D","webglDepthTexture","setupDepthTexture","createRenderbuffer","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","HALF_FLOAT_OES","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","getContextAttributes","forceContextLoss","loseContext","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","setSize","getSize","updateStyle","setViewport","setScissor","setScissorTest","boolean","getClearColor","setClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearDepth","clearStencil","clearTarget","initAttributes","buffers","hasPositions","createBuffer","hasNormals","hasUvs","hasColors","bindBuffer","ARRAY_BUFFER","bufferData","positionArray","DYNAMIC_DRAW","enableAttribute","vertexAttribPointer","normalArray","nx","ny","nz","uvArray","colorArray","disableUnusedAttributes","drawArrays","TRIANGLES","updateBuffers","geometryProgram","activeInfluences","getWireframeAttribute","startIndex","geometryAttributes","programAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","getAttributeBuffer","enableAttributeAndDivisor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","ELEMENT_ARRAY_BUFFER","dataCount","rangeStart","rangeCount","groupStart","groupCount","drawStart","drawEnd","drawCount","setLineWidth","setMode","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","lineWidth","LINE_STRIP","POINTS","renderInstances","forceClear","projectObject","isObjectViewable","groupMaterial","beginShadows","lightShadowsLength","setupShadows","ll","viewMatrix","directionalLength","pointLength","spotLength","hemiLength","shadowBias","shadowRadius","shadowMapSize","coneCos","penumbraCos","setupLights","endShadows","TEXTURE_CUBE_MAP","updateRenderTargetMipmap","setFaceCulling","cullFace","frontFaceDirection","setCullFace","allocTextureUnit","textureUnit","maxTextures","warned","complete","setTexture","setTextureCube","isCompressed","isDataTexture","cubeImage","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setTextureCubeDynamic","getCurrentRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","setupRenderTarget","scissorTest","activeMipMapLevel","readRenderTargetPixels","restore","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","drawArraysInstancedANGLE","globalState","numGlobalPlanes","renderingShadows","viewNormalMatrix","resetGlobalState","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","i4","enableLocalClipping","fromCache","nGlobal","lGlobal","clippingState","drawElements","drawElementsInstancedANGLE","gl","getExtension","getMaxPrecision","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","_maxPrecision","WebGLGeometries","onGeometryDispose","buffergeometry","deleteAttribute","deleteAttributes","property","bufferproperty","__webglBuffer","deleteBuffer","removeAttributeBuffer","_bufferGeometry","updateAttribute","attributeProperties","usage","STATIC_DRAW","bufferSubData","updateBuffer","checkEdge","edges","list","TypeArray","WebGLProgram","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numPointLights","numHemiLights","parseIncludes","include","unrollLoops","snippet","unroll","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","rendererExtensions","envMapCubeUV","flatShading","generateExtensions","customDefines","generateDefines","createProgram","supportsVertexTextures","maxBones","doubleSided","flipSided","shadowMapEnabled","useFog","fogExp","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","cachedUniforms","cachedAttributes","programLog","getProgramInfoLog","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","getProgramParameter","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","identifiers","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","shaderIDs","parameterNames","getTextureEncodingFromMap","gammaOverrideLinear","nClipPlanes","nVertexUniforms","allocateBones","currentRenderTarget","envMapMode","pl","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","lines","addLineNumbers","_renderer","_state","_lightShadows","_shadowMapSize","_lookTarget","_lightPositionWorld","_renderList","_depthMaterials","_distanceMaterials","_materialCache","cubeDirections","cubeUps","cube2DViewPorts","depthMaterialTemplate","distanceShader","distanceUniforms","useMorphing","useSkinning","depthMaterial","distanceMaterial","getDepthMaterial","isPointLight","lightPositionWorld","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","renderSingleSided","renderReverseSided","lightPos","shadowCamera","faceCount","BLEND","vpWidth","vpHeight","pars","shadowMatrix","vpDimensions","clearAlpha","WebGLColorBuffer","WebGLDepthBuffer","WebGLStencilBuffer","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentScissorTest","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","emptyTextures","DEPTH_TEST","enableVertexAttribArray","vertexAttribDivisorANGLE","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","blendFuncSeparate","blendFunc","setMask","setTest","setFunc","setStencilTest","stencilTest","setStencilWrite","stencilWrite","setStencilFunc","stencilFunc","stencilRef","stencilMask","setStencilOp","stencilFail","stencilZFail","stencilZPass","setOp","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","factor","units","POLYGON_OFFSET_FILL","getScissorTest","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","setClear","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","STENCIL_TEST","stencilOp","UniformContainer","arrayCacheF32","arrayCacheI32","flatten","nBlocks","blockSize","firstElem","allocTexUnits","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setValueT6","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","tex","setValueT6a","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","RePathPart","addUniform","container","uniformObject","parseUniform","pathLength","matchEnd","idIsIndex","subscript","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","flares","vertexBuffer","elementBuffer","tempTexture","occlusionTexture","renderType","occlusionMap","screenPosition","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","validArea","TEXTURE1","copyTexImage2D","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","Face4","LineStrip","LinePieces","MeshFaceMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","isIntersectionBox","isIntersectionSphere","multiplyVector3","multiplyVector3Array","extractPosition","multiplyVector4","rotateAxis","crossVector","rotateByAxis","isIntersectionLine","isIntersectionPlane","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","getChildByName","renderDepth","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","addIndex","addDrawCall","indexOffset","clearDrawCalls","computeOffsets","wrapAround","wrapRGB","metal","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapCullFace","getData","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","CurveUtils","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","SceneUtils","createMultiMaterialObject","detach","attach","ShapeUtils","contour","triangulate","snip","verts","px","py","aX","aY","bX","bY","cX","cY","cCROSSap","bCROSScp","vertIndices","nv","triangulateShape","holes","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","seg1Pt","seg2Pt","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","allPointsMap","allpoints","hl","shapeWithoutHoles","hole","shape","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","sIdx","nextIdx","indepHoles","intersectsHoleEdge","ihIdx","chkHole","hIdx","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","minShapeIndex","counter","h2","removeHoles","triangles","isClockWise","pts","b2p0","b2p1","b2p2","b3","b3p0","b3p1","b3p2","b3p3","Curve","getPointAt","getUtoTmapping","getPoints","divisions","getSpacedPoints","lengths","getLengths","__arcLengthDivisions","cacheArcLengths","current","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","getPointFunc","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","createPointsGeometry","createGeometry","createSpacedPointsGeometry","generateShapes","createPath","glyph","glyphs","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","Path","outline","_cachedOutline","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","ha","String","resolution","ret","createPaths","shapes","toShapes","fromPoints","args","lastargs","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","lastPoint","item","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","Shape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","subPaths","inActions","lastPath","extractSubpaths","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sLen","sho","ho","hole_unassigned","s2Idx","froms","tos","extrude","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","extractAllPoints","extractPoints","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","CatmullRomCurve3","CubicPoly","pz","c0","initNonuniformCatmullRom","x3","dt0","dt1","dt2","initCatmullRom","tension","calc","closed","ClosedSplineCurve3","BoxGeometry","BoxBufferGeometry","CubeGeometry","vertexCount","calculateVertexCount","indexCount","calculateIndexCount","vertexBufferOffset","uvBufferOffset","indexBufferOffset","numberOfVertices","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","CircleGeometry","CircleBufferGeometry","ii","segment","CylinderBufferGeometry","nbCap","indexArray","halfHeight","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","tanTheta","indexRow","i3","generateTorso","CylinderGeometry","ConeBufferGeometry","ConeGeometry","EdgesGeometry","thresholdAngle","thresholdDot","edge","sortFunction","vert1","vert2","face1","face2","addShapeList","addShape","extrudePts","splineTube","binormal","position2","ahole","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","extrudePath","extrudeByPath","uvgen","UVGenerator","WorldUVGenerator","frames","TubeGeometry","FrenetFrames","shapesOffset","shapePoints","reverse","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","sidewalls","layeroffset","slen1","slen2","f4","f3","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","indexD","LatheBufferGeometry","base","inverseSegments","n1","n2","LatheGeometry","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","offset2","RingBufferGeometry","radiusStep","thetaSegmentLevel","RingGeometry","SphereGeometry","SphereBufferGeometry","thetaEnd","verticesRow","v4","TextGeometry","TorusBufferGeometry","TorusGeometry","TorusKnotBufferGeometry","P1","P2","B","T","N","calculatePositionOnCurve","cu","su","quOverP","cs","TorusKnotGeometry","heightScale","taper","NoTaper","ip","jp","uva","uvb","uvc","uvd","grid","numpoints","pos2","tangents","SinusoidalTaper","smallest","tz","mat","MAX_VALUE","initialNormal3","PolyhedronGeometry","that","prepare","centroid","subdivide","azimuth","inclination","make","azi","correctUV","cols","aj","bj","rows","DodecahedronGeometry","IcosahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","WireframeGeometry","numEdges","ol","numTris","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","CameraHelper","pointMap","addLine","addPoint","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","FaceNormalsHelper","nNormals","objGeometry","GridHelper","setColors","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","objPos","objNorm","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","endFrame","createAnimation","setAnimationWeight","lastFrame","currentFrame","active","directionBackwards","mirroredLoop","autoCreateAnimations","firstAnimation","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","playAnimation","stopAnimation","keyframe","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","test1","getOwnPropertyNames","test2","fromCharCode","test3","forEach","letter","shouldUseNative","symbols","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","process","for","A","C","encodeURIComponent","D","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","E","F","refs","updater","G","H","isReactComponent","forceUpdate","I","isPureReactComponent","J","K","L","ref","__self","__source","M","defaultProps","$$typeof","_owner","O","P","Q","R","keyPrefix","S","V","U","escape","W","aa","X","Y","Z","ba","ReactCurrentDispatcher","ReactCurrentBatchConfig","suspense","ReactCurrentOwner","IsSomeRendererActing","Children","only","Component","Fragment","Profiler","PureComponent","StrictMode","Suspense","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","createFactory","createRef","forwardRef","isValidElement","lazy","_ctor","_status","_result","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","da","ea","fa","ia","ja","la","ma","na","oa","currentTarget","ka","ra","sa","extractEvents","eventTypes","ta","phasedRegistrationNames","ua","registrationName","va","wa","dependencies","xa","ya","za","Aa","Ba","Ca","stateNode","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","sanitizeURL","Ua","Va","toUpperCase","xlinkHref","Wa","Xa","Sa","Ta","Ra","setAttribute","setAttributeNS","Ya","Za","$a","bb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","displayName","tag","_debugOwner","_debugSource","fileName","lineNumber","return","rb","sb","xb","_valueTracker","getOwnPropertyDescriptor","stopTracking","tb","yb","checked","zb","defaultChecked","defaultValue","_wrapperState","initialChecked","Ab","initialValue","controlled","Bb","Cb","Db","Eb","ownerDocument","activeElement","Gb","Fb","Hb","selected","defaultSelected","disabled","Ib","dangerouslySetInnerHTML","Jb","Kb","Lb","textContent","Mb","Nb","Ob","Pb","Qb","MSApp","execUnsafeLocalFunction","namespaceURI","innerHTML","valueOf","firstChild","removeChild","appendChild","Rb","lastChild","nodeType","nodeValue","Sb","Tb","animationend","animationiteration","animationstart","transitionend","Ub","Vb","Wb","transition","Xb","Yb","Zb","$b","WeakMap","Map","cc","dc","alternate","effectTag","ec","memoizedState","dehydrated","fc","hc","sibling","gc","ic","jc","kc","lc","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","mc","nc","srcElement","correspondingUseElement","parentNode","oc","qc","topLevelType","nativeEvent","targetInst","ancestors","rc","eventSystemFlags","sc","containerInfo","tc","uc","has","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Kc","blockedOn","Lc","pointerId","Mc","Nc","Pc","unstable_runWithPriority","priority","hydrate","Qc","Rc","Sc","Tc","Uc","unstable_scheduleCallback","unstable_NormalPriority","Vc","Wc","Yc","Zc","$c","bubbled","captured","eventPriority","cd","dd","unstable_UserBlockingPriority","ed","fd","gd","hd","Oc","jd","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","orphans","tabSize","widows","zIndex","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","kd","ld","md","setProperty","nd","menuitem","br","col","embed","hr","img","input","keygen","link","param","wbr","od","is","qd","rd","sd","td","body","ud","vd","nextSibling","xd","HTMLIFrameElement","contentWindow","location","href","yd","contentEditable","Dd","Ed","Fd","autoFocus","Gd","__html","Hd","Id","clearTimeout","Jd","Kd","previousSibling","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","dispatchConfig","Ud","_targetInst","Vd","Wd","Xd","Yd","Zd","$d","Interface","isDefaultPrevented","defaultPrevented","returnValue","ee","eventPool","fe","destructor","getPooled","stopPropagation","cancelBubble","persist","eventPhase","bubbles","cancelable","timeStamp","isTrusted","extend","ge","he","ie","je","ke","documentMode","le","ne","oe","beforeInput","compositionEnd","compositionStart","compositionUpdate","pe","qe","keyCode","se","ve","locale","which","ctrlKey","altKey","metaKey","char","ue","we","date","datetime","email","month","number","password","search","tel","week","xe","ye","change","ze","Ae","Be","Ce","De","Ee","Fe","Ge","detachEvent","He","Ie","attachEvent","Je","Ke","Le","Me","_isInputEventSupported","Ne","Oe","Alt","Control","Meta","Shift","Pe","getModifierState","Qe","Re","Se","Te","Ue","Ve","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","We","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Xe","mouseEnter","mouseLeave","pointerEnter","pointerLeave","Ye","defaultView","parentWindow","$e","select","ef","ff","gf","hf","jf","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","kf","onSelect","lf","animationName","pseudoElement","mf","clipboardData","nf","of","charCode","pf","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","qf","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","rf","dataTransfer","tf","touches","targetTouches","changedTouches","uf","vf","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","wf","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","yf","zf","Af","Bf","Cf","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","childContextTypes","Df","Ef","Ff","getChildContext","Gf","__reactInternalMemoizedMergedChildContext","Hf","If","Jf","Kf","unstable_cancelCallback","Lf","unstable_requestPaint","Mf","unstable_now","Nf","unstable_getCurrentPriorityLevel","Of","unstable_ImmediatePriority","Pf","Qf","Rf","unstable_LowPriority","Sf","unstable_IdlePriority","Tf","Uf","unstable_shouldYield","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","childExpirationTime","qg","firstContext","expirationTime","rg","sg","observedBits","responders","tg","ug","updateQueue","baseState","baseQueue","shared","effects","vg","wg","suspenseConfig","payload","xg","yg","zg","ca","Ag","Bg","Cg","Dg","Eg","Fg","Jg","_reactInternalFiber","Gg","Hg","Ig","Kg","shouldComponentUpdate","Lg","contextType","Mg","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Ng","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Og","Pg","_stringRef","Qg","Rg","lastEffect","nextEffect","firstEffect","Sg","Tg","elementType","Ug","implementation","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","documentElement","tagName","eh","fh","gh","hh","memoizedProps","revealOrder","ih","responder","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","queue","uh","vh","wh","lastRenderedReducer","eagerReducer","eagerState","lastRenderedState","dispatch","xh","yh","zh","Ah","deps","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","readContext","useResponder","useDeferredValue","useTransition","Oh","Ph","Qh","Rh","Sh","Th","pendingProps","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","gi","getDerivedStateFromError","hi","pendingContext","ni","pi","qi","retryTime","ji","fallback","unstable_avoidThisFallback","ki","li","isBackwards","rendering","renderingStartTime","tail","tailExpiration","tailMode","mi","ri","si","wasMultiple","multiple","onClick","onclick","createElementNS","createTextNode","ti","ui","vi","wi","xi","yi","zi","Ai","stack","Bi","WeakSet","Set","Ci","Fi","Ei","Gi","__reactInternalSnapshotBeforeUpdate","Hi","Ii","Ji","Ki","Li","componentWillUnmount","Di","Mi","Ni","Oi","Pi","Qi","insertBefore","_reactRootContainer","Ri","Si","Ti","display","Ui","Vi","then","Wi","Xi","element","Yi","Zi","$i","componentDidCatch","componentStack","Rj","cj","dj","kj","lj","mj","nj","oj","qj","rj","sj","tj","uj","vj","wj","timeoutMs","xj","yj","zj","lastExpiredTime","Aj","firstPendingTime","lastPingedTime","nextKnownPendingLevel","callbackExpirationTime","callbackPriority","callbackNode","Bj","timeout","Cj","Dj","Ej","Fj","Gj","Hj","finishedWork","finishedExpirationTime","lastSuspendedTime","Ij","timeoutHandle","Jj","busyMinDurationMs","busyDelayMs","Kj","Mj","Nj","pingCache","Oj","ub","Pj","Xc","Qj","Sj","firstSuspendedTime","wb","activeElementDetached","focusedElem","selectionRange","Tj","wd","contains","compareDocumentPosition","createRange","setStart","removeAllRanges","addRange","setEnd","scrollLeft","scrollTop","vb","Uj","Vj","Wj","hidden","ob","Xj","unstable_observedBits","Zj","pendingChildren","ak","bk","ck","dk","ek","fk","Jc","_internalRoot","gk","ik","hasAttribute","hk","jk","kk","unmount","querySelectorAll","form","Lj","lk","Events","findFiberByHostInstance","isDisabled","supportsFiber","inject","onCommitFiberRoot","onCommitFiberUnmount","Yj","overrideHookState","overrideProps","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","bundleType","rendererPackageName","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","MessageChannel","unstable_forceFrameRate","cancelAnimationFrame","port2","port1","onmessage","postMessage","sortIndex","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback"],"mappings":"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","file":"static/js/2.a5c36292.chunk.js","sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '77' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n// Polyfills\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// Missing in IE.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\t( function () {\r\n\r\n\t\tObject.assign = function ( target ) {\r\n\r\n\t\t\t'use strict';\r\n\r\n\t\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar output = Object( target );\r\n\r\n\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\r\n\r\n\t\t\t\tvar source = arguments[ index ];\r\n\r\n\t\t\t\tif ( source !== undefined && source !== null ) {\r\n\r\n\t\t\t\t\tfor ( var nextKey in source ) {\r\n\r\n\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n}\r\n\r\n//\r\n\r\nObject.assign( THREE, {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\n\tMOUSE: { LEFT: 0, MIDDLE: 1, RIGHT: 2 },\r\n\r\n\t// GL STATE CONSTANTS\r\n\r\n\tCullFaceNone: 0,\r\n\tCullFaceBack: 1,\r\n\tCullFaceFront: 2,\r\n\tCullFaceFrontBack: 3,\r\n\r\n\tFrontFaceDirectionCW: 0,\r\n\tFrontFaceDirectionCCW: 1,\r\n\r\n\t// SHADOWING TYPES\r\n\r\n\tBasicShadowMap: 0,\r\n\tPCFShadowMap: 1,\r\n\tPCFSoftShadowMap: 2,\r\n\r\n\t// MATERIAL CONSTANTS\r\n\r\n\t// side\r\n\r\n\tFrontSide: 0,\r\n\tBackSide: 1,\r\n\tDoubleSide: 2,\r\n\r\n\t// shading\r\n\r\n\tFlatShading: 1,\r\n\tSmoothShading: 2,\r\n\r\n\t// colors\r\n\r\n\tNoColors: 0,\r\n\tFaceColors: 1,\r\n\tVertexColors: 2,\r\n\r\n\t// blending modes\r\n\r\n\tNoBlending: 0,\r\n\tNormalBlending: 1,\r\n\tAdditiveBlending: 2,\r\n\tSubtractiveBlending: 3,\r\n\tMultiplyBlending: 4,\r\n\tCustomBlending: 5,\r\n\r\n\t// custom blending equations\r\n\t// (numbers start from 100 not to clash with other\r\n\t// mappings to OpenGL constants defined in Texture.js)\r\n\r\n\tAddEquation: 100,\r\n\tSubtractEquation: 101,\r\n\tReverseSubtractEquation: 102,\r\n\tMinEquation: 103,\r\n\tMaxEquation: 104,\r\n\r\n\t// custom blending destination factors\r\n\r\n\tZeroFactor: 200,\r\n\tOneFactor: 201,\r\n\tSrcColorFactor: 202,\r\n\tOneMinusSrcColorFactor: 203,\r\n\tSrcAlphaFactor: 204,\r\n\tOneMinusSrcAlphaFactor: 205,\r\n\tDstAlphaFactor: 206,\r\n\tOneMinusDstAlphaFactor: 207,\r\n\r\n\t// custom blending source factors\r\n\r\n\t//ZeroFactor: 200,\r\n\t//OneFactor: 201,\r\n\t//SrcAlphaFactor: 204,\r\n\t//OneMinusSrcAlphaFactor: 205,\r\n\t//DstAlphaFactor: 206,\r\n\t//OneMinusDstAlphaFactor: 207,\r\n\tDstColorFactor: 208,\r\n\tOneMinusDstColorFactor: 209,\r\n\tSrcAlphaSaturateFactor: 210,\r\n\r\n\t// depth modes\r\n\r\n\tNeverDepth: 0,\r\n\tAlwaysDepth: 1,\r\n\tLessDepth: 2,\r\n\tLessEqualDepth: 3,\r\n\tEqualDepth: 4,\r\n\tGreaterEqualDepth: 5,\r\n\tGreaterDepth: 6,\r\n\tNotEqualDepth: 7,\r\n\r\n\r\n\t// TEXTURE CONSTANTS\r\n\r\n\tMultiplyOperation: 0,\r\n\tMixOperation: 1,\r\n\tAddOperation: 2,\r\n\r\n\t// Tone Mapping modes\r\n\r\n\tNoToneMapping: 0, // do not do any tone mapping, not even exposure (required for special purpose passes.)\r\n\tLinearToneMapping: 1, // only apply exposure.\r\n\tReinhardToneMapping: 2,\r\n\tUncharted2ToneMapping: 3, // John Hable\r\n\tCineonToneMapping: 4, // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\r\n\r\n\t// Mapping modes\r\n\r\n\tUVMapping: 300,\r\n\r\n\tCubeReflectionMapping: 301,\r\n\tCubeRefractionMapping: 302,\r\n\r\n\tEquirectangularReflectionMapping: 303,\r\n\tEquirectangularRefractionMapping: 304,\r\n\r\n\tSphericalReflectionMapping: 305,\r\n\tCubeUVReflectionMapping: 306,\r\n\tCubeUVRefractionMapping: 307,\r\n\r\n\t// Wrapping modes\r\n\r\n\tRepeatWrapping: 1000,\r\n\tClampToEdgeWrapping: 1001,\r\n\tMirroredRepeatWrapping: 1002,\r\n\r\n\t// Filters\r\n\r\n\tNearestFilter: 1003,\r\n\tNearestMipMapNearestFilter: 1004,\r\n\tNearestMipMapLinearFilter: 1005,\r\n\tLinearFilter: 1006,\r\n\tLinearMipMapNearestFilter: 1007,\r\n\tLinearMipMapLinearFilter: 1008,\r\n\r\n\t// Data types\r\n\r\n\tUnsignedByteType: 1009,\r\n\tByteType: 1010,\r\n\tShortType: 1011,\r\n\tUnsignedShortType: 1012,\r\n\tIntType: 1013,\r\n\tUnsignedIntType: 1014,\r\n\tFloatType: 1015,\r\n\tHalfFloatType: 1025,\r\n\r\n\t// Pixel types\r\n\r\n\t//UnsignedByteType: 1009,\r\n\tUnsignedShort4444Type: 1016,\r\n\tUnsignedShort5551Type: 1017,\r\n\tUnsignedShort565Type: 1018,\r\n\r\n\t// Pixel formats\r\n\r\n\tAlphaFormat: 1019,\r\n\tRGBFormat: 1020,\r\n\tRGBAFormat: 1021,\r\n\tLuminanceFormat: 1022,\r\n\tLuminanceAlphaFormat: 1023,\r\n\t// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\n\tRGBEFormat: THREE.RGBAFormat, //1024;\r\n\tDepthFormat: 1026,\r\n\r\n\t// DDS / ST3C Compressed texture formats\r\n\r\n\tRGB_S3TC_DXT1_Format: 2001,\r\n\tRGBA_S3TC_DXT1_Format: 2002,\r\n\tRGBA_S3TC_DXT3_Format: 2003,\r\n\tRGBA_S3TC_DXT5_Format: 2004,\r\n\r\n\t// PVRTC compressed texture formats\r\n\r\n\tRGB_PVRTC_4BPPV1_Format: 2100,\r\n\tRGB_PVRTC_2BPPV1_Format: 2101,\r\n\tRGBA_PVRTC_4BPPV1_Format: 2102,\r\n\tRGBA_PVRTC_2BPPV1_Format: 2103,\r\n\r\n\t// ETC compressed texture formats\r\n\r\n\tRGB_ETC1_Format: 2151,\r\n\r\n\t// Loop styles for AnimationAction\r\n\r\n\tLoopOnce: 2200,\r\n\tLoopRepeat: 2201,\r\n\tLoopPingPong: 2202,\r\n\r\n\t// Interpolation\r\n\r\n\tInterpolateDiscrete: 2300,\r\n\tInterpolateLinear: 2301,\r\n\tInterpolateSmooth: 2302,\r\n\r\n\t// Interpolant ending modes\r\n\r\n\tZeroCurvatureEnding: 2400,\r\n\tZeroSlopeEnding: 2401,\r\n\tWrapAroundEnding: 2402,\r\n\r\n\t// Triangle Draw modes\r\n\r\n\tTrianglesDrawMode: 0,\r\n\tTriangleStripDrawMode: 1,\r\n\tTriangleFanDrawMode: 2,\r\n\r\n\t// Texture Encodings\r\n\r\n\tLinearEncoding: 3000, // No encoding at all.\r\n\tsRGBEncoding: 3001,\r\n\tGammaEncoding: 3007, // uses GAMMA_FACTOR, for backwards compatibility with WebGLRenderer.gammaInput/gammaOutput\r\n\r\n\t// The following Texture Encodings are for RGB-only (no alpha) HDR light emission sources.\r\n\t// These encodings should not specified as output encodings except in rare situations.\r\n\tRGBEEncoding: 3002, // AKA Radiance.\r\n\tLogLuvEncoding: 3003,\r\n\tRGBM7Encoding: 3004,\r\n\tRGBM16Encoding: 3005,\r\n\tRGBDEncoding: 3006, // MaxRange is 256.\r\n\r\n\t// Depth packing strategies\r\n\r\n\tBasicDepthPacking: 3200, // for writing to float textures for high precision or for visualizing results in RGB buffers\r\n\tRGBADepthPacking: 3201 // for packing into RGBA buffers.\r\n\r\n} );\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( r, g, b ) {\r\n\r\n\tif ( g === undefined && b === undefined ) {\r\n\r\n\t\t// r is THREE.Color, hex or string\r\n\t\treturn this.set( r );\r\n\r\n\t}\r\n\r\n\treturn this.setRGB( r, g, b );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\treturn this.normalize();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\treturn this.conjugate().normalize();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nObject.assign( THREE.Quaternion, {\r\n\r\n\tslerp: function( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function(\r\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\r\n\r\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tvar s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.x;\r\n\r\n\t},\r\n\r\n\tset width( value ) {\r\n\r\n\t\tthis.x = value;\r\n\r\n\t},\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.y;\r\n\r\n\t},\r\n\r\n\tset height( value ) {\r\n\r\n\t\tthis.y = value;\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tvar angle = Math.atan2( this.y, this.x );\r\n\r\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tvar x = this.x - center.x;\r\n\t\tvar y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function( s ) {\r\n\r\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\r\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\treturn this.setFromMatrixColumn( m, 3 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\tif ( typeof m === 'number' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).' );\r\n\t\t\tvar temp = m\r\n\t\t\tm = index;\r\n\t\t\tindex = temp;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\r\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\t\r\n\t\t\treturn this.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tvar minX = + Infinity;\r\n\t\tvar minY = + Infinity;\r\n\t\tvar minZ = + Infinity;\r\n\r\n\t\tvar maxX = - Infinity;\r\n\t\tvar maxY = - Infinity;\r\n\t\tvar maxZ = - Infinity;\r\n\r\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\tvar x = array[ i ];\r\n\t\t\tvar y = array[ i + 1 ];\r\n\t\t\tvar z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.fromArray( positions, i );\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t\t point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t\t point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t\t box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t\t box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: ( function () {\r\n\r\n\t\tvar closestPoint;\r\n\r\n\t\treturn function intersectsSphere( sphere ) {\r\n\r\n\t\t\tif ( closestPoint === undefined ) closestPoint = new THREE.Vector3();\r\n\r\n\t\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\r\n\r\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tvar min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= plane.constant && max >= plane.constant );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n\t\tif( this.isEmpty() ) this.makeEmpty();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// transform of empty box is an empty box.\r\n\t\t\tif( this.isEmpty() ) return this;\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\r\n\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n * @author tschw\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( matrix instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\t\t}\r\n\t\t\r\n\t\tvar detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\tte[ 3 ] = t12 * detInv;\r\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\tte[ 6 ] = t13 * detInv;\r\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\r\n\t\t\t\t\"- just use .toArray instead.\" );\r\n\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) {\r\n\r\n\t\t\t\tx = new THREE.Vector3();\r\n\t\t\t\ty = new THREE.Vector3();\r\n\t\t\t\tz = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\r\n\t\t\t\t\"- just use .toArray instead.\" );\r\n\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\treturn v1.setFromMatrixColumn( this, 3 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\r\n\t\t}\r\n\t\t\r\n\t\tvar detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\t\t\t\tmatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = 1.0 / ( right - left );\r\n\t\tvar h = 1.0 / ( top - bottom );\r\n\t\tvar p = 1.0 / ( far - near );\r\n\r\n\t\tvar x = ( right + left ) * w;\r\n\t\tvar y = ( top + bottom ) * h;\r\n\t\tvar z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectsBox: ( function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We use the following equation to compute the signed distance from\r\n\t\t// the center of the sphere to the plane.\r\n\t\t//\r\n\t\t// distance = q * n - d\r\n\t\t//\r\n\t\t// If this distance is greater than the radius of the sphere,\r\n\t\t// then there is no intersection.\r\n\r\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null )\r\n\t\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere )\r\n\t\t\t\t.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSprite: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( sprite ) {\r\n\r\n\t\t\tsphere.center.set( 0, 0, 0 );\r\n\t\t\tsphere.radius = 0.7071067811865476;\r\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\r\n\r\n\t\t\t// transform normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\r\n\t\t\tthis.constant = - referencePoint.dot( normal );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spherical.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The poles (phi) are at the positive and negative y axis.\r\n * The equator starts at positive z.\r\n */\r\n\r\nTHREE.Spherical = function ( radius, phi, theta ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\r\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Spherical.prototype = {\r\n\r\n\tconstructor: THREE.Spherical,\r\n\r\n\tset: function ( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius.copy( other.radius );\r\n\t\tthis.phi.copy( other.phi );\r\n\t\tthis.theta.copy( other.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe: function() {\r\n\r\n\t\tvar EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function( vec3 ) {\r\n\r\n\t\tthis.radius = vec3.length();\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\r\n\t\t\tthis.phi = Math.acos( THREE.Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * THREE.Math.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * THREE.Math.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function () {\r\n\r\n\t\tvar plane, edgeList, projectedPoint, closestPoint;\r\n\r\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\r\n\r\n\t\t\tif ( plane === undefined ) {\r\n\r\n\t\t\t\tplane = new THREE.Plane();\r\n\t\t\t\tedgeList = [ new THREE.Line3(), new THREE.Line3(), new THREE.Line3() ];\r\n\t\t\t\tprojectedPoint = new THREE.Vector3();\r\n\t\t\t\tclosestPoint = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tvar minDistance = Infinity;\r\n\r\n\t\t\t// project the point onto the plane of the triangle\r\n\r\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\t\t\tplane.projectPoint( point, projectedPoint );\r\n\r\n\t\t\t// check if the projection lies within the triangle\r\n\r\n\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\r\n\r\n\t\t\t\t// if so, this is the closest point\r\n\r\n\t\t\t\tresult.copy( projectedPoint );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\r\n\r\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\r\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\r\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\r\n\r\n\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\r\n\r\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\r\n\r\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\r\n\r\n\t\t\t\t\tif( distance < minDistance ) {\r\n\r\n\t\t\t\t\t\tminDistance = distance;\r\n\r\n\t\t\t\t\t\tresult.copy( closestPoint );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Interpolant.js\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.Interpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n};\r\n\r\nTHREE.Interpolant.prototype = {\r\n\r\n\tconstructor: THREE.Interpolant,\r\n\r\n\tevaluate: function( t ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[   i1   ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tvar right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n//- See http://jsperf.com/comparison-to-undefined/3\r\n//- slower code:\r\n//-\r\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n//- slower code:\r\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[   i1   ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function() {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tthrow new Error( \"call to abstract method\" );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Interpolant.prototype, {\r\n\r\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_,\r\n\r\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/CubicInterpolant.js\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.CubicInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = -0;\r\n\tthis._offsetPrev = -0;\r\n\tthis._weightNext = -0;\r\n\tthis._offsetNext = -0;\r\n\r\n};\r\n\r\nTHREE.CubicInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\r\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\r\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\r\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/DiscreteInterpolant.js\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.DiscreteInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.DiscreteInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.DiscreteInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/LinearInterpolant.js\r\n\r\n/**\r\n * @author tschw\r\n */\r\n\r\nTHREE.LinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.LinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.LinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/QuaternionLinearInterpolant.js\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionLinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.QuaternionLinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset = i1 * stride,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tTHREE.Quaternion.slerpFlat( result, 0,\r\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = ( performance || Date ).now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = ( performance || Date ).now();\r\n\r\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nObject.assign( THREE.EventDispatcher.prototype, {\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [], i = 0;\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Layers.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Layers = function () {\r\n\r\n\tthis.mask = 1;\r\n\r\n};\r\n\r\nTHREE.Layers.prototype = {\r\n\r\n\tconstructor: THREE.Layers,\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel );\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://clara.io/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction ascSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new THREE.Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nObject.assign( THREE.Object3D.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\t// meta is '' when called from JSON.stringify\r\n\t\tvar isRootObject = ( meta === undefined || meta === '' );\r\n\r\n\t\tvar output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tvar object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.geometry !== undefined ) {\r\n\r\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.geometry = this.geometry.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.material = this.material.uuid;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize, normalized ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\tthis.normalized = normalized === true;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.count;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.Geometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex  );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tvar faces = this.faces;\r\n\t\tvar length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tvar newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = true;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.DirectGeometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tvar morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tvar morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nObject.assign( THREE.BufferGeometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\tif ( positions !== undefined ) {\r\n\r\n\t\t\tthis.boundingBox.setFromArray( positions );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function computeBoundingSphere() {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tbox.setFromArray( positions );\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar array = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tarray[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry2 = new THREE.BufferGeometry();\r\n\r\n\t\tvar indices = this.index.array;\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\r\n\t\t\tvar array = attribute.array;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\r\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tvar index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.addAttribute( name, new THREE.BufferAttribute( array2, itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array,\r\n\t\t\t\tnormalized: attribute.normalized\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/Uniform.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Uniform = function ( value ) {\r\n\r\n\tif ( typeof value === 'string' ) {\r\n\r\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n\t\tvalue = arguments[ 1 ];\r\n\r\n\t}\r\n\r\n\tthis.value = value;\r\n\r\n\tthis.dynamic = false;\r\n\r\n};\r\n\r\nTHREE.Uniform.prototype = {\r\n\r\n\tconstructor: THREE.Uniform,\r\n\r\n\tonUpdate: function ( callback ) {\r\n\r\n\t\tthis.dynamic = true;\r\n\t\tthis.onUpdateCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/AnimationAction.js\r\n\r\n/**\r\n *\r\n * Action provided by AnimationMixer for scheduling clip playback on specific\r\n * objects.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n *\r\n */\r\n\r\nTHREE.AnimationAction = function() {\r\n\r\n\tthrow new Error( \"THREE.AnimationAction: \" +\r\n\t\t\t\"Use mixer.clipAction for construction.\" );\r\n\r\n};\r\n\r\nTHREE.AnimationAction._new =\r\n\t\tfunction AnimationAction( mixer, clip, localRoot ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\r\n\tvar tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tvar interpolantSettings = {\r\n\t\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants;\t// bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\r\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = THREE.LoopRepeat;\r\n\tthis._loopCount = -1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\r\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\r\n\r\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n};\r\n\r\nTHREE.AnimationAction._new.prototype = {\r\n\r\n\tconstructor: THREE.AnimationAction._new,\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function() {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function() {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0;\t\t\t// restart clip\r\n\t\tthis._loopCount = -1;\t// forget previous loops\r\n\t\tthis._startTime = null;\t// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function() {\r\n\r\n\t\tvar start = this._startTime;\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function() {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function() {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\r\n\r\n\t\tvar mixer = this._mixer;\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif( warp ) {\r\n\r\n\t\t\tvar fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function() {\r\n\r\n\t\tvar weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the weight stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function() {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function( duration ) {\r\n\r\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._timeScaleInterpolant,\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function() {\r\n\r\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function() {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function() {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\r\n\t\t// called by the mixer\r\n\r\n\t\tvar startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tvar clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tvar weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tvar interpolants = this._interpolants;\r\n\t\t\tvar propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function( time ) {\r\n\r\n\t\tvar weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tvar interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function( time ) {\r\n\r\n\t\tvar timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tvar interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.paused = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function( deltaTime ) {\r\n\r\n\t\tvar time = this.time + deltaTime;\r\n\r\n\t\tif ( deltaTime === 0 ) return time;\r\n\r\n\t\tvar duration = this._clip.duration,\r\n\r\n\t\t\tloop = this.loop,\r\n\t\t\tloopCount = this._loopCount;\r\n\r\n\t\tif ( loop === THREE.LoopOnce ) {\r\n\r\n\t\t\tif ( loopCount === -1 ) {\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tthis.loopCount = 0;\r\n\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle_stop: {\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else break handle_stop;\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // repetitive Repeat or PingPong\r\n\r\n\t\t\tvar pingPong = ( loop === THREE.LoopPingPong );\r\n\r\n\t\t\tif ( loopCount === -1 ) {\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tif ( deltaTime >= 0 ) {\r\n\r\n\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( time >= duration || time < 0 ) {\r\n\t\t\t\t// wrap around\r\n\r\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\tvar pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\tif ( pending < 0 ) {\r\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// keep running\r\n\r\n\t\t\t\t\tif ( pending === 0 ) {\r\n\t\t\t\t\t\t// entering the last round\r\n\r\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\tthis.time = time;\r\n\t\t\t\treturn duration - time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.time = time;\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function( atStart, atEnd, pingPong ) {\r\n\r\n\t\tvar settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart \t= THREE.ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd\t\t= THREE.ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationClip.js\r\n\r\n/**\r\n *\r\n * Reusable set of Tracks that represent an animation.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationClip = function ( name, duration, tracks ) {\r\n\r\n\tthis.name = name;\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n\t// maybe only do these on demand, as doing them here could potentially slow down loading\r\n\t// but leaving these here during development as this ensures a lot of testing of these functions\r\n\tthis.trim();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.AnimationClip.prototype = {\r\n\r\n\tconstructor: THREE.AnimationClip,\r\n\r\n\tresetDuration: function() {\r\n\r\n\t\tvar tracks = this.tracks,\r\n\t\t\tduration = 0;\r\n\r\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max(\r\n\t\t\t\t\tduration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t},\r\n\r\n\ttrim: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\toptimize: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.AnimationClip, {\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( json.name, json.duration, tracks );\r\n\r\n\t},\r\n\r\n\r\n\ttoJSON: function( clip ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tvar json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\r\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n\t\tvar numMorphTargets = morphTargetSequence.length;\r\n\t\tvar tracks = [];\r\n\r\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tvar times = [];\r\n\t\t\tvar values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tvar order = THREE.AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = THREE.AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = THREE.AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\t\tnew THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\t\ttimes, values\r\n\t\t\t\t\t).scale( 1.0 / fps ) );\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( name, -1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function( objectOrClipArray, name ) {\r\n\r\n\t\tvar clipArray = objectOrClipArray;\r\n\r\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n\t\t\tvar o = objectOrClipArray;\r\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps, noLoop ) {\r\n\r\n\t\tvar animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\t\tvar parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tvar name = parts[ 1 ];\r\n\r\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar clips = [];\r\n\r\n\t\tfor ( var name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( THREE.AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function( animation, bones, nodeName ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar addNonemptyTrack = function(\r\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tvar times = [];\r\n\t\t\t\tvar values = [];\r\n\r\n\t\t\t\tTHREE.AnimationUtils.flattenJSON(\r\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar tracks = [];\r\n\r\n\t\tvar clipName = animation.name || 'default';\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tvar duration = animation.length || -1;\r\n\t\tvar fps = animation.fps || 30;\r\n\r\n\t\tvar hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n\t\t\t// process morph targets in a way exactly compatible\r\n\t\t\t// with AnimationHandler.init( animation )\r\n\t\t\tif ( animationKeys[0].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tvar morphTargetNames = {};\r\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tvar times = [];\r\n\t\t\t\t\tvar values = [];\r\n\r\n\t\t\t\t\tfor ( var m = 0;\r\n\t\t\t\t\t\t\tm !== animationKeys[k].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t\t'.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.QuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar clip = new THREE.AnimationClip( clipName, duration, tracks );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/AnimationMixer.js\r\n\r\n/**\r\n *\r\n * Player for AnimationClips.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationMixer = function( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n};\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\r\n\t\t\tprototypeAction = null;\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tvar existingAction =\r\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tif ( clipObject === null )\r\n\t\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tvar newAction = new THREE.\r\n\t\t\t\tAnimationMixer._Action( this, clipObject, optionalRoot );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function() {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tthis._nActiveActions = 0;\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tactions[ i ].reset();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].useCount = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tvar action = actions[ i ];\r\n\r\n\t\t\tif ( action.enabled ) {\r\n\r\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function( clip ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tclipUuid = clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tvar cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function( root ) {\r\n\r\n\t\tvar rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( var clipUuid in actionsByClip ) {\r\n\r\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( var trackName in bindingByName ) {\r\n\r\n\t\t\t\tvar binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.AnimationMixer._Action = THREE.AnimationAction._new;\r\n\r\n// Implementation details:\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, {\r\n\r\n\t_bindAction: function( action, prototypeAction ) {\r\n\r\n\t\tvar root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tvar track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name,\r\n\t\t\t\tbinding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new THREE.PropertyMixer(\r\n\t\t\t\t\t\tTHREE.PropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipUuid = action._clip.uuid,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function() {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \t\tknownActions: Array< _Action >\t- used as prototypes\r\n\t\t// \t\tactionByRoot: _Action\t\t\t- lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() { return scope._actions.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveActions; }\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() { return scope._bindings.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for _Action objects\r\n\r\n\t_isActiveAction: function( action ) {\r\n\r\n\t\tvar index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function( action, clipUuid, rootUuid ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function( action ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tvar clipUuid = action._clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function( action ) {\r\n\r\n\t\tvar bindings = action._propertyBindings;\r\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function( binding, rootUuid, trackName ) {\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tremove_empty_map: {\r\n\r\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function() {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\r\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new THREE.LinearInterpolant(\r\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function( interpolant ) {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\r\n\r\n} );\r\n\r\n// File:src/animation/AnimationObjectGroup.js\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n *\r\n * \t-\tInstead pass this object as 'root'.\r\n *\r\n * \t-\tYou can also add and remove objects later when the mixer\r\n * \t\tis running.\r\n *\r\n * Note:\r\n *\r\n *  \tObjects of this class appear as one object to the mixer,\r\n *  \tso cache control of the individual objects must be done\r\n *  \ton the group.\r\n *\r\n * Limitation:\r\n *\r\n * \t- \tThe animated properties must be compatible among the\r\n * \t\tall objects in the group.\r\n *\r\n *  -\tA single property can either be controlled through a\r\n *  \ttarget group or directly, but not both.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationObjectGroup = function( var_args ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0;\t\t\t// threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tvar indices = {};\r\n\tthis._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = [];\t\t\t\t\t// inside: string\r\n\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() { return scope._objects.length; },\r\n\t\t\tget inUse() { return this.total - scope.nCachedObjects_;  }\r\n\t\t},\r\n\r\n\t\tget bindingsPerObject() { return scope._bindings.length; }\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.AnimationObjectGroup.prototype = {\r\n\r\n\tconstructor: THREE.AnimationObjectGroup,\r\n\r\n\tadd: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push(\r\n\t\t\t\t\t\t\tnew THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tvar knownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject) {\r\n\r\n\t\t\t\tconsole.error( \"Different objects with the same UUID \" +\r\n\t\t\t\t\t\t\"detected. Clean the caches or recreate your \" +\r\n\t\t\t\t\t\t\"infrastructure when reloading scenes...\" );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tvar lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function( path, parsedPath ) {\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tvar paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( var i = nCachedObjects,\r\n\t\t\t\tn = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = objects[ i ];\r\n\r\n\t\t\tbindingsForPath[ i ] =\r\n\t\t\t\t\tnew THREE.PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function( path ) {\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationUtils.js\r\n\r\n/**\r\n * @author tschw\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function( array, from, to ) {\r\n\r\n\t\tif ( THREE.AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tvar n = times.length;\r\n\t\tvar result = new Array( n );\r\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function( values, stride, order ) {\r\n\r\n\t\tvar nValues = values.length;\r\n\t\tvar result = new values.constructor( nValues );\r\n\r\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tvar srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tvar i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tvar value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/KeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A timed sequence of keyframes for a specific property.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.KeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\r\n\r\n\tif( times === undefined || times.length === 0 ) {\r\n\r\n\t\tthrow new Error( \"no keyframes in track named \" + name );\r\n\r\n\t}\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = THREE.AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = THREE.AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n\tthis.validate();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.KeyframeTrack.prototype = {\r\n\r\n\tconstructor: THREE.KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function( result ) {\r\n\r\n\t\treturn new THREE.DiscreteInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.LinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function( result ) {\r\n\r\n\t\treturn new THREE.CubicInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function( interpolation ) {\r\n\r\n\t\tvar factoryMethod;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase THREE.InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tvar message = \"unsupported interpolation for \" +\r\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( message );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function() {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn THREE.InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn THREE.InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn THREE.InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function() {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function( timeOffset ) {\r\n\r\n\t\tif( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function( timeScale ) {\r\n\r\n\t\tif( timeScale !== 1.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function( startTime, endTime ) {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tnKeys = times.length,\r\n\t\t\tfrom = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\r\n\t\twhile ( to !== -1 && times[ to ] > endTime ) -- to;\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) to = Math.max( to , 1 ), from = to - 1;\r\n\r\n\t\t\tvar stride = this.getValueSize();\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = THREE.AnimationUtils.\r\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function() {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tvar valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( \"invalid value size in track\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( \"track is empty\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar prevTime = null;\r\n\r\n\t\tfor( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tvar currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( THREE.AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tvar value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function() {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\twriteIndex = 1;\r\n\r\n\t\tfor( var i = 1, n = times.length - 1; i <= n; ++ i ) {\r\n\r\n\t\t\tvar keep = false;\r\n\r\n\t\t\tvar time = times[ i ];\r\n\t\t\tvar timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\t\t\t\tvar offset = i * stride,\r\n\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\tvar value = values[ offset + j ];\r\n\r\n\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tvar readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = THREE.AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tif( json.type === undefined ) {\r\n\r\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar trackType = THREE.KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n\t\tif ( json.times === undefined ) {\r\n\r\n\t\t\tvar times = [], values = [];\r\n\r\n\t\t\tTHREE.AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\t\tjson.times = times;\r\n\t\t\tjson.values = values;\r\n\r\n\t\t}\r\n\r\n\t\t// derived classes can define a static parse method\r\n\t\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\t\treturn trackType.parse( json );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we asssume a constructor compatible with the base\r\n\t\t\treturn new trackType(\r\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function( track ) {\r\n\r\n\t\tvar trackType = track.constructor;\r\n\r\n\t\tvar json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': THREE.AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': THREE.AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\t_getTrackTypeForValueTypeName: function( typeName ) {\r\n\r\n\t\tswitch( typeName.toLowerCase() ) {\r\n\r\n\t\t\tcase \"scalar\":\r\n\t\t\tcase \"double\":\r\n\t\t\tcase \"float\":\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"integer\":\r\n\r\n\t\t\t\treturn THREE.NumberKeyframeTrack;\r\n\r\n\t\t\tcase \"vector\":\r\n\t\t\tcase \"vector2\":\r\n\t\t\tcase \"vector3\":\r\n\t\t\tcase \"vector4\":\r\n\r\n\t\t\t\treturn THREE.VectorKeyframeTrack;\r\n\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\treturn THREE.ColorKeyframeTrack;\r\n\r\n\t\t\tcase \"quaternion\":\r\n\r\n\t\t\t\treturn THREE.QuaternionKeyframeTrack;\r\n\r\n\t\t\tcase \"bool\":\r\n\t\t\tcase \"boolean\":\r\n\r\n\t\t\t\treturn THREE.BooleanKeyframeTrack;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\t\treturn THREE.StringKeyframeTrack;\r\n\r\n\t\t}\r\n\r\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/PropertyBinding.js\r\n\r\n/**\r\n *\r\n * A reference to a real property in the scene graph.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyBinding = function ( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = THREE.PropertyBinding.findNode(\r\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding,\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function() {\r\n\r\n\t\tvar targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = THREE.PropertyBinding.findNode(\r\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n \t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif( objectName ) {\r\n\r\n\t\t\tvar objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[i].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tvar nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( ! nodeProperty ) {\r\n\r\n\t\t\tvar nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\r\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tvar versioning = this.Versioning.None;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tvar bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[i].name === propertyIndex ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( nodeProperty.length !== undefined ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function() {},\r\n\t_setValue_unavailable: function() {},\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: THREE.PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: THREE.PropertyBinding.prototype.setValue,\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tvar source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t]\r\n\r\n} );\r\n\r\nTHREE.PropertyBinding.Composite =\r\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tvar parsedPath = optionalParsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.Composite.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding.Composite,\r\n\r\n\tgetValue: function( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function( array, offset ) {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.create = function( root, path, parsedPath ) {\r\n\r\n\tif ( ! ( root instanceof THREE.AnimationObjectGroup ) ) {\r\n\r\n\t\treturn new THREE.PropertyBinding( root, path, parsedPath );\r\n\r\n\t} else {\r\n\r\n\t\treturn new THREE.PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.parseTrackName = function( trackName ) {\r\n\r\n\t// matches strings in the form of:\r\n\t//    nodeName.property\r\n\t//    nodeName.property[accessor]\r\n\t//    nodeName.material.property[accessor]\r\n\t//    uuid.property[accessor]\r\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\r\n\t//    parentName/nodeName.property\r\n\t//    parentName/parentName/nodeName.property[index]\r\n\t//\t  .bone[Armature.DEF_cog].position\r\n\t// created and tested via https://regex101.com/#javascript\r\n\r\n\tvar re = /^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_.:\\- ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;\r\n\tvar matches = re.exec(trackName);\r\n\r\n\tif( ! matches ) {\r\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\r\n\t}\r\n\r\n    if (matches.index === re.lastIndex) {\r\n        re.lastIndex++;\r\n    }\r\n\r\n\tvar results = {\r\n\t\t// directoryName: matches[1], // (tschw) currently unused\r\n\t\tnodeName: matches[3], \t// allowed to be null, specified root node.\r\n\t\tobjectName: matches[5],\r\n\t\tobjectIndex: matches[7],\r\n\t\tpropertyName: matches[9],\r\n\t\tpropertyIndex: matches[11]\t// allowed to be null, specifies that the whole property is set.\r\n\t};\r\n\r\n\tif( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\r\n\t}\r\n\r\n\treturn results;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.findNode = function( root, nodeName ) {\r\n\r\n\tif( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\treturn root;\r\n\r\n\t}\r\n\r\n\t// search into skeleton bones.\r\n\tif( root.skeleton ) {\r\n\r\n\t\tvar searchSkeleton = function( skeleton ) {\r\n\r\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\r\n\r\n\t\t\t\tvar bone = skeleton.bones[i];\r\n\r\n\t\t\t\tif( bone.name === nodeName ) {\r\n\r\n\t\t\t\t\treturn bone;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar bone = searchSkeleton( root.skeleton );\r\n\r\n\t\tif( bone ) {\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// search into node subtree.\r\n\tif( root.children ) {\r\n\r\n\t\tvar searchNodeSubtree = function( children ) {\r\n\r\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tvar childNode = children[i];\r\n\r\n\t\t\t\tif( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\tif( result ) return result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\tif( subTreeNode ) {\r\n\r\n\t\t\treturn subTreeNode;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n};\r\n\r\n// File:src/animation/PropertyMixer.js\r\n\r\n/**\r\n *\r\n * Buffered scene graph property that allows weighted accumulation.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyMixer = function ( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tvar bufferType = Float64Array,\r\n\t\tmixFunction;\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\t\t\tmixFunction = this._slerp;\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\r\n\t\t\tbufferType = Array,\t\tmixFunction = this._select;\t\tbreak;\r\n\r\n\t\tdefault:\t\t\t\t\tmixFunction = this._lerp;\r\n\r\n\t}\r\n\r\n\tthis.buffer = new bufferType( valueSize * 4 );\r\n\t// layout: [ incoming | accu0 | accu1 | orig ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n};\r\n\r\nTHREE.PropertyMixer.prototype = {\r\n\r\n\tconstructor: THREE.PropertyMixer,\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tcurrentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tvar mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function( accuIndex ) {\r\n\r\n\t\tvar stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tvar originalValueOffset = stride * 3;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function() {\r\n\r\n\t\tvar binding = this.binding;\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * 3;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function() {\r\n\r\n\t\tvar originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tTHREE.Quaternion.slerpFlat( buffer, dstOffset,\r\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tvar s = 1 - t;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tvar j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/tracks/BooleanKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of Boolean keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.BooleanKeyframeTrack = function ( name, times, values ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values );\r\n\r\n};\r\n\r\nTHREE.BooleanKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/ColorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of keyframe values that represent color.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.ColorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.ColorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.ColorKeyframeTrack,\r\n\r\n\tValueTypeName: 'color'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n\r\n\t// Note: Very basic implementation and nothing special yet.\r\n\t// However, this is the place for color space parameterization.\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/NumberKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of numeric keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.NumberKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.NumberKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/QuaternionKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of quaternion keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.QuaternionKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.QuaternionLinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/StringKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track that interpolates Strings\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.StringKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.StringKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/VectorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of vectored keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.VectorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.VectorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis.filters = [];\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Audio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tsetNodeSource: function ( audioNode ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'audioNode';\r\n\t\tthis.source = audioNode;\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetBuffer: function ( audioBuffer ) {\r\n\r\n\t\tthis.source.buffer = audioBuffer;\r\n\t\tthis.sourceType = 'buffer';\r\n\r\n\t\tif ( this.autoplay ) this.play();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tplay: function () {\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar source = this.context.createBufferSource();\r\n\r\n\t\tsource.buffer = this.source.buffer;\r\n\t\tsource.loop = this.source.loop;\r\n\t\tsource.onended = this.source.onended;\r\n\t\tsource.start( 0, this.startTime );\r\n\t\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.source = source;\r\n\r\n\t\treturn this.connect();\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = this.context.currentTime;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.connect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilters: function () {\r\n\r\n\t\treturn this.filters;\r\n\r\n\t},\r\n\r\n\tsetFilters: function ( value ) {\r\n\r\n\t\tif ( ! value ) value = [];\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filters = value;\r\n\t\t\tthis.connect();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.filters = value;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.getFilters()[ 0 ];\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( filter ) {\r\n\r\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\r\n\r\n\t},\r\n\r\n\tsetPlaybackRate: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.playbackRate = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetPlaybackRate: function () {\r\n\r\n\t\treturn this.playbackRate;\r\n\r\n\t},\r\n\r\n\tonEnded: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tgetLoop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.source.loop;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.loop = value;\r\n\r\n\t},\r\n\r\n\tgetVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\r\n\tsetVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.value = value;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/audio/AudioAnalyser.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioAnalyser = function ( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n};\r\n\r\nObject.assign( THREE.AudioAnalyser.prototype, {\r\n\r\n\tgetFrequencyData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\r\n\t\treturn this.data;\r\n\r\n\t},\r\n\r\n\tgetAverageFrequency: function () {\r\n\r\n\t\tvar value = 0, data = this.getFrequencyData();\r\n\r\n\t\tfor ( var i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\tvalue += data[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn value / data.length;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/audio/AudioContext.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.defineProperty( THREE, 'AudioContext', {\r\n\r\n\tget: ( function () {\r\n\r\n\t\tvar context;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( context === undefined ) {\r\n\r\n\t\t\t\tcontext = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn context;\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/audio/PositionalAudio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PositionalAudio = function ( listener ) {\r\n\r\n\tTHREE.Audio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype = Object.assign( Object.create( THREE.Audio.prototype ), {\r\n\r\n\tconstructor: THREE.PositionalAudio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.panner;\r\n\r\n\t},\r\n\r\n\tgetRefDistance: function () {\r\n\r\n\t\treturn this.panner.refDistance;\r\n\r\n\t},\r\n\r\n\tsetRefDistance: function ( value ) {\r\n\r\n\t\tthis.panner.refDistance = value;\r\n\r\n\t},\r\n\r\n\tgetRolloffFactor: function () {\r\n\r\n\t\treturn this.panner.rolloffFactor;\r\n\r\n\t},\r\n\r\n\tsetRolloffFactor: function ( value ) {\r\n\r\n\t\tthis.panner.rolloffFactor = value;\r\n\r\n\t},\r\n\r\n\tgetDistanceModel: function () {\r\n\r\n\t\treturn this.panner.distanceModel;\r\n\r\n\t},\r\n\r\n\tsetDistanceModel: function ( value ) {\r\n\r\n\t\tthis.panner.distanceModel = value;\r\n\r\n\t},\r\n\r\n\tgetMaxDistance: function () {\r\n\r\n\t\treturn this.panner.maxDistance;\r\n\r\n\t},\r\n\r\n\tsetMaxDistance: function ( value ) {\r\n\r\n\t\tthis.panner.maxDistance = value;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: ( function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n\r\n} );\r\n\r\n// File:src/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = THREE.AudioContext;\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.AudioListener,\r\n\r\n\tgetInput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tremoveFilter: function ( ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\t\t\tthis.gain.connect( this.context.destination );\r\n\t\t\tthis.filter = null;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.filter;\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( value ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t\t}\r\n\r\n\t\tthis.filter = value;\r\n\t\tthis.gain.connect( this.filter );\r\n\t\tthis.filter.connect( this.context.destination );\r\n\r\n\t},\r\n\r\n\tgetMasterVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetMasterVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.value = value;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: ( function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\tvar orientation = new THREE.Vector3();\r\n\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\t\tvar listener = this.context.listener;\r\n\t\t\tvar up = this.up;\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tvar options = { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter };\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\r\n\r\n\tconstructor: THREE.OrthographicCamera,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tvar cx = ( this.right + this.left ) / 2;\r\n\t\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\t\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author tschw\r\n */\r\n\r\nTHREE.PerspectiveCamera = function( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\tthis.focus = 10;\r\n\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.view = null;\r\n\r\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\r\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\r\n\r\n\tconstructor: THREE.PerspectiveCamera,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\tthis.focus = source.focus;\r\n\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\tthis.filmGauge = source.filmGauge;\r\n\t\tthis.filmOffset = source.filmOffset;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */\r\n\tsetFocalLength: function ( focalLength ) {\r\n\r\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n\t\tthis.fov = THREE.Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */\r\n\tgetFocalLength: function () {\r\n\r\n\t\tvar vExtentSlope = Math.tan( THREE.Math.DEG2RAD * 0.5 * this.fov );\r\n\r\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n\t},\r\n\r\n\tgetEffectiveFOV: function () {\r\n\r\n\t\treturn THREE.Math.RAD2DEG * 2 * Math.atan(\r\n\t\t\t\tMath.tan( THREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n\t},\r\n\r\n\tgetFilmWidth: function () {\r\n\r\n\t\t// film not completely covered in portrait format (aspect < 1)\r\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\tgetFilmHeight: function () {\r\n\r\n\t\t// film not completely covered in landscape format (aspect > 1)\r\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   var w = 1920;\r\n\t *   var h = 1080;\r\n\t *   var fullWidth = w * 3;\r\n\t *   var fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tthis.aspect = fullWidth / fullHeight;\r\n\r\n\t\tthis.view = {\r\n\t\t\tfullWidth: fullWidth,\r\n\t\t\tfullHeight: fullHeight,\r\n\t\t\toffsetX: x,\r\n\t\t\toffsetY: y,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function() {\r\n\r\n\t\tthis.view = null;\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tvar near = this.near,\r\n\t\t\ttop = near * Math.tan(\r\n\t\t\t\t\tTHREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n\t\t\theight = 2 * top,\r\n\t\t\twidth = this.aspect * height,\r\n\t\t\tleft = - 0.5 * width,\r\n\t\t\tview = this.view;\r\n\r\n\t\tif ( view !== null ) {\r\n\r\n\t\t\tvar fullWidth = view.fullWidth,\r\n\t\t\t\tfullHeight = view.fullHeight;\r\n\r\n\t\t\tleft += view.offsetX * width / fullWidth;\r\n\t\t\ttop -= view.offsetY * height / fullHeight;\r\n\t\t\twidth *= view.width / fullWidth;\r\n\t\t\theight *= view.height / fullHeight;\r\n\r\n\t\t}\r\n\r\n\t\tvar skew = this.filmOffset;\r\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\t\tleft, left + width, top - height, top, near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.zoom = this.zoom;\r\n\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\tdata.object.focus = this.focus;\r\n\r\n\t\tdata.object.aspect = this.aspect;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\tdata.object.filmGauge = this.filmGauge;\r\n\t\tdata.object.filmOffset = this.filmOffset;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/cameras/StereoCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.StereoCamera = function () {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.cameraL = new THREE.PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new THREE.PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.StereoCamera.prototype, {\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar focus, fov, aspect, near, far;\r\n\r\n\t\tvar eyeRight = new THREE.Matrix4();\r\n\t\tvar eyeLeft = new THREE.Matrix4();\r\n\r\n\t\treturn function update ( camera ) {\r\n\r\n\t\t\tvar needsUpdate = focus !== camera.focus || fov !== camera.fov ||\r\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far;\r\n\r\n\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\tfocus = camera.focus;\r\n\t\t\t\tfov = camera.fov;\r\n\t\t\t\taspect = camera.aspect * this.aspect;\r\n\t\t\t\tnear = camera.near;\r\n\t\t\t\tfar = camera.far;\r\n\r\n\t\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\t\tvar eyeSep = 0.064 / 2;\r\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focus;\r\n\t\t\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\r\n\t\t\t\tvar xmin, xmax;\r\n\r\n\t\t\t\t// translate xOffset\r\n\r\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\r\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\r\n\r\n\t\t\t\t// for left eye\r\n\r\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t\t// for right eye\r\n\r\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color, intensity ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Light,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.intensity = source.intensity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\r\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/LightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LightShadow = function ( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new THREE.Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.matrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nObject.assign( THREE.LightShadow.prototype, {\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.AmbientLight\r\n\r\n} );\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.shadow = new THREE.DirectionalLightShadow();\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.DirectionalLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/DirectionalLightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectionalLightShadow = function ( light ) {\r\n\r\n\tTHREE.LightShadow.call( this, new THREE.OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.DirectionalLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\r\n\r\n\tconstructor: THREE.DirectionalLightShadow\r\n\r\n} );\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.HemisphereLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.PointLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\treturn this.intensity * Math.PI;\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\tthis.intensity = power / Math.PI;\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.SpotLightShadow();\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.SpotLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.penumbra = source.penumbra;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/SpotLightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SpotLightShadow = function () {\r\n\r\n\tTHREE.LightShadow.call( this, new THREE.PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.SpotLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\r\n\r\n\tconstructor: THREE.SpotLightShadow,\r\n\r\n\tupdate: function ( light ) {\r\n\r\n\t\tvar fov = THREE.Math.RAD2DEG * 2 * light.angle;\r\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\r\n\t\tvar far = light.distance || 500;\r\n\r\n\t\tvar camera = this.camera;\r\n\r\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n\t\t\tcamera.fov = fov;\r\n\t\t\tcamera.aspect = aspect;\r\n\t\t\tcamera.far = far;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/loaders/AudioLoader.js\r\n\r\n/**\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */\r\n\r\nTHREE.AudioLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.AudioLoader.prototype = {\r\n\r\n\tconstructor: THREE.AudioLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar context = THREE.AudioContext;\r\n\r\n\t\t\tcontext.decodeAudioData( buffer, function ( audioBuffer ) {\r\n\r\n\t\t\t\tonLoad( audioBuffer );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar color, textureLoader, materialLoader;\r\n\r\n\t\treturn function ( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tif ( color === undefined ) color = new THREE.Color();\r\n\t\t\tif ( textureLoader === undefined ) textureLoader = new THREE.TextureLoader();\r\n\t\t\tif ( materialLoader === undefined ) materialLoader = new THREE.MaterialLoader();\r\n\r\n\t\t\t// convert from old material format\r\n\r\n\t\t\tvar textures = {};\r\n\r\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + path;\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( repeat !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.offset.fromArray( offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap !== undefined ) {\r\n\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uuid = THREE.Math.generateUUID();\r\n\r\n\t\t\t\ttextures[ uuid ] = texture;\r\n\r\n\t\t\t\treturn uuid;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar json = {\r\n\t\t\t\tuuid: THREE.Math.generateUUID(),\r\n\t\t\t\ttype: 'MeshLambertMaterial'\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var name in m ) {\r\n\r\n\t\t\t\tvar value = m[ name ];\r\n\r\n\t\t\t\tswitch ( name ) {\r\n\t\t\t\t\tcase 'DbgColor':\r\n\t\t\t\t\tcase 'DbgIndex':\r\n\t\t\t\t\tcase 'opticalDensity':\r\n\t\t\t\t\tcase 'illumination':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'DbgName':\r\n\t\t\t\t\t\tjson.name = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'blending':\r\n\t\t\t\t\t\tjson.blending = THREE[ value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorAmbient':\r\n\t\t\t\t\tcase 'mapAmbient':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorDiffuse':\r\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorSpecular':\r\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorEmissive':\r\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specularCoef':\r\n\t\t\t\t\t\tjson.shininess = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shading':\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuse':\r\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuseRepeat':\r\n\t\t\t\t\tcase 'mapDiffuseOffset':\r\n\t\t\t\t\tcase 'mapDiffuseWrap':\r\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLight':\r\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLightRepeat':\r\n\t\t\t\t\tcase 'mapLightOffset':\r\n\t\t\t\t\tcase 'mapLightWrap':\r\n\t\t\t\t\tcase 'mapLightAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAO':\r\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAORepeat':\r\n\t\t\t\t\tcase 'mapAOOffset':\r\n\t\t\t\t\tcase 'mapAOWrap':\r\n\t\t\t\t\tcase 'mapAOAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBump':\r\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpScale':\r\n\t\t\t\t\t\tjson.bumpScale = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpRepeat':\r\n\t\t\t\t\tcase 'mapBumpOffset':\r\n\t\t\t\t\tcase 'mapBumpWrap':\r\n\t\t\t\t\tcase 'mapBumpAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormal':\r\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalFactor':\r\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalRepeat':\r\n\t\t\t\t\tcase 'mapNormalOffset':\r\n\t\t\t\t\tcase 'mapNormalWrap':\r\n\t\t\t\t\tcase 'mapNormalAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecular':\r\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecularRepeat':\r\n\t\t\t\t\tcase 'mapSpecularOffset':\r\n\t\t\t\t\tcase 'mapSpecularWrap':\r\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlpha':\r\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlphaRepeat':\r\n\t\t\t\t\tcase 'mapAlphaOffset':\r\n\t\t\t\t\tcase 'mapAlphaWrap':\r\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'flipSided':\r\n\t\t\t\t\t\tjson.side = THREE.BackSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'doubleSided':\r\n\t\t\t\t\t\tjson.side = THREE.DoubleSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n\t\t\t\t\t\tjson.opacity = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'depthTest':\r\n\t\t\t\t\tcase 'depthWrite':\r\n\t\t\t\t\tcase 'colorWrite':\r\n\t\t\t\t\tcase 'opacity':\r\n\t\t\t\t\tcase 'reflectivity':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'visible':\r\n\t\t\t\t\tcase 'wireframe':\r\n\t\t\t\t\t\tjson[ name ] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vertexColors':\r\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = THREE.FaceColors;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\r\n\r\n\t\t\tmaterialLoader.setTextures( textures );\r\n\r\n\t\t\treturn materialLoader.parse( json );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tvar handlers = this.handlers;\r\n\r\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = handlers[ i ];\r\n\t\t\tvar loader  = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.overrideMimeType( 'text/plain' );\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tvar response = event.target.response;\r\n\r\n\t\t\tTHREE.Cache.add( url, response );\r\n\r\n\t\t\tif ( this.status === 200 ) {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else if ( this.status === 0 ) {\r\n\r\n\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\tconsole.warn( 'THREE.XHRLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/FontLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.FontLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.FontLoader.prototype = {\r\n\r\n\tconstructor: THREE.FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar font = scope.parse( json );\r\n\r\n\t\t\tif ( onLoad ) onLoad( font );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\treturn new THREE.Font( json );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tvar type = metadata.type;\r\n\r\n\t\t\t\tif ( type !== undefined ) {\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\t\tparseAnimations();\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\r\n\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimations() {\r\n\r\n\t\t\tvar outputAnimations = [];\r\n\r\n\t\t\t// parse old style Bone/Hierarchy animations\r\n\t\t\tvar animations = [];\r\n\r\n\t\t\tif ( json.animation !== undefined ) {\r\n\r\n\t\t\t\tanimations.push( json.animation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.animations !== undefined ) {\r\n\r\n\t\t\t\tif ( json.animations.length ) {\r\n\r\n\t\t\t\t\tanimations = animations.concat( json.animations );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tanimations.push( json.animations );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n\t\t\t\tvar clip = THREE.AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// parse implicit morph animations\r\n\t\t\tif ( geometry.morphTargets ) {\r\n\r\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n\t\t\t\tvar morphAnimationClips = THREE.AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tvar TYPED_ARRAYS = {\r\n\t\t\t'Int8Array': Int8Array,\r\n\t\t\t'Uint8Array': Uint8Array,\r\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\r\n\t\t\t'Int16Array': Int16Array,\r\n\t\t\t'Uint16Array': Uint16Array,\r\n\t\t\t'Int32Array': Int32Array,\r\n\t\t\t'Uint32Array': Uint32Array,\r\n\t\t\t'Float32Array': Float32Array,\r\n\t\t\t'Float64Array': Float64Array\r\n\t\t};\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tvar normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new THREE.Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = this.getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = this.getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = this.getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MultiMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ConeGeometry':\r\n\t\t\t\t\tcase 'ConeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE [ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\t\t\t\t\tcase 'LatheBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tvar animations = [];\r\n\r\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tvar clip = THREE.AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\r\n\t\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n\t\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n\t\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\r\n\t\t\t\t\tvar material = getMaterial( data.material );\r\n\r\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t};\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.Texture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CubeTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.CubeTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.CubeTexture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.fog = true;\r\n\tthis.lights = true;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\tthis.side = THREE.FrontSide;\r\n\tthis.shading = THREE.SmoothShading; // THREE.FlatShading, THREE.SmoothShading\r\n\tthis.vertexColors = THREE.NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.clippingPlanes = null;\r\n\tthis.clipShadows = false;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate() {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRoot = meta === undefined;\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== 0.5 ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== 0.5 ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.roughnessMap instanceof THREE.Texture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap instanceof THREE.Texture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap instanceof THREE.Texture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.side !== THREE.FrontSide ) data.side = this.side;\r\n\t\tif ( this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.fog = source.fog;\r\n\t\tthis.lights = source.lights;\r\n\r\n\t\tthis.blending = source.blending;\r\n\t\tthis.side = source.side;\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\t\tthis.clipShadows = source.clipShadows;\r\n\r\n\t\tvar srcPlanes = source.clippingPlanes,\r\n\t\t\tdstPlanes = null;\r\n\r\n\t\tif ( srcPlanes !== null ) {\r\n\r\n\t\t\tvar n = srcPlanes.length;\r\n\t\t\tdstPlanes = new Array( n );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i )\r\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tthis.clippingPlanes = dstPlanes;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Material.prototype, THREE.EventDispatcher.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / https://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.depthPacking = THREE.BasicDepthPacking;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.depthPacking = source.depthPacking;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshStandardMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshStandardMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 0.5;\r\n\tthis.metalness = 0.5;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshStandardMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial;\r\n\r\nTHREE.MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhysicalMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  reflectivity: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhysicalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.MeshStandardMaterial.call( this );\r\n\r\n\tthis.defines = { 'PHYSICAL': '' };\r\n\r\n\tthis.type = 'MeshPhysicalMaterial';\r\n\r\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhysicalMaterial.prototype = Object.create( THREE.MeshStandardMaterial.prototype );\r\nTHREE.MeshPhysicalMaterial.prototype.constructor = THREE.MeshPhysicalMaterial;\r\n\r\nTHREE.MeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.MeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'PHYSICAL': '' };\r\n\r\n\tthis.reflectivity = source.reflectivity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tvar materials = this.materials;\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar material = materials[ i ].toJSON( meta );\r\n\t\t\tdelete material.metadata;\r\n\r\n\t\t\toutput.materials.push( material );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"1f\", value: 1.0 }, \"parameter2\": { type: \"1i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\tthis.lights = false; // set to use scene lights\r\n\tthis.clipping = false; // set to use user-defined clipping planes\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.lights = source.lights;\r\n\tthis.clipping = source.clipping;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = source.extensions;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2()\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShadowMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ShadowMaterial = function () {\r\n\r\n\tTHREE.ShaderMaterial.call( this, {\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\t\tvertexShader: THREE.ShaderChunk[ 'shadow_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'shadow_frag' ]\r\n\t} );\r\n\r\n\tthis.lights = true;\r\n\tthis.transparent = true;\r\n\r\n\tObject.defineProperties( this, {\r\n\t\topacity: {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.uniforms.opacity.value;\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\t\t\t\tthis.uniforms.opacity.value = value;\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.ShadowMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.ShadowMaterial.prototype.constructor = THREE.ShadowMaterial;\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = encoding !== undefined ? encoding :  THREE.LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Texture.prototype, THREE.EventDispatcher.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/DepthTexture.js\r\n\r\n/**\r\n * @author Matt DesLauriers / @mattdesl\r\n */\r\n\r\nTHREE.DepthTexture = function ( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n  THREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, THREE.DepthFormat, type, anisotropy );\r\n\r\n  this.image = { width: width, height: height };\r\n\r\n  this.type = type !== undefined ? type : THREE.UnsignedShortType;\r\n\r\n  this.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n  this.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\r\n  this.flipY = false;\r\n  this.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DepthTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DepthTexture.prototype.constructor = THREE.DepthTexture;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nObject.defineProperty( THREE.CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tfunction update() {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Group\r\n\r\n} );\r\n\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Points,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar object = this;\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\t\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\t\tvar position = new THREE.Vector3();\r\n\r\n\t\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Line,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar precision = raycaster.linePrecision;\r\n\t\t\tvar precisionSq = precision * precision;\r\n\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\tvar vStart = new THREE.Vector3();\r\n\t\t\tvar vEnd = new THREE.Vector3();\r\n\t\t\tvar interSegment = new THREE.Vector3();\r\n\t\t\tvar interRay = new THREE.Vector3();\r\n\t\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.assign( Object.create( THREE.Line.prototype ), {\r\n\r\n\tconstructor: THREE.LineSegments\r\n\r\n} );\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.drawMode = THREE.TrianglesDrawMode;\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Mesh,\r\n\r\n\tsetDrawMode: function ( value ) {\r\n\r\n\t\tthis.drawMode = value;\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\t\tthis.morphTargetBase = - 1;\r\n\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetMorphTargetIndexByName: function ( name ) {\r\n\r\n\t\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\t\treturn 0;\r\n\r\n\t},\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\tvar vA = new THREE.Vector3();\r\n\t\tvar vB = new THREE.Vector3();\r\n\t\tvar vC = new THREE.Vector3();\r\n\r\n\t\tvar tempA = new THREE.Vector3();\r\n\t\tvar tempB = new THREE.Vector3();\r\n\t\tvar tempC = new THREE.Vector3();\r\n\r\n\t\tvar uvA = new THREE.Vector2();\r\n\t\tvar uvB = new THREE.Vector2();\r\n\t\tvar uvC = new THREE.Vector2();\r\n\r\n\t\tvar barycoord = new THREE.Vector3();\r\n\r\n\t\tvar intersectionPoint = new THREE.Vector3();\r\n\t\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\t\treturn uv1.clone();\r\n\r\n\t\t}\r\n\r\n\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\t\t\tvar intersect;\r\n\t\t\tvar material = object.material;\r\n\r\n\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== THREE.DoubleSide, point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( intersect === null ) return null;\r\n\r\n\t\t\tintersectionPointWorld.copy( point );\r\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdistance: distance,\r\n\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\tobject: object\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, positions, uvs, a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC,  uvA, uvB, uvC );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersection.face = new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) );\r\n\t\t\t\tintersection.faceIndex = a;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn intersection;\r\n\r\n\t\t}\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar material = this.material;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t\tif ( material === undefined ) return;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\t// Check boundingBox before continuing\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uvs, intersection;\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar a, b, c;\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\tuvs = attributes.uv.array;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tvar fvA, fvB, fvC;\r\n\t\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\r\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\t\tfvA = vertices[ face.a ];\r\n\t\t\t\t\tfvB = vertices[ face.b ];\r\n\t\t\t\t\tfvC = vertices[ face.c ];\r\n\r\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvA.add( fvA );\r\n\t\t\t\t\t\tvB.add( fvB );\r\n\t\t\t\t\t\tvC.add( fvC );\r\n\r\n\t\t\t\t\t\tfvA = vA;\r\n\t\t\t\t\t\tfvB = vB;\r\n\t\t\t\t\t\tfvC = vC;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\r\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Bone,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.skin = source.skin;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Skeleton.prototype, {\r\n\r\n\tcalculateInverses: function () {\r\n\r\n\t\tthis.boneInverses = [];\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tvar bone;\r\n\r\n\t\t// recover the bind-time world matrices\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tbone = this.bones[ b ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tbone = this.bones[ b ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\t// flatten bone matrices to array\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\t\toffsetMatrix.toArray( this.boneMatrices, b * 16 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null &&\r\n\t\t\t\t\tbones[ gbone.parent ] !== undefined ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.assign( Object.create( THREE.Mesh.prototype ), {\r\n\r\n\tconstructor: THREE.SkinnedMesh,\r\n\r\n\tbind: function( skeleton, bindMatrix ) {\r\n\r\n\t\tthis.skeleton = skeleton;\r\n\r\n\t\tif ( bindMatrix === undefined ) {\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t\t}\r\n\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tthis.skeleton.pose();\r\n\r\n\t},\r\n\r\n\tnormalizeSkinWeights: function () {\r\n\r\n\t\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar vec = new THREE.Vector4();\r\n\r\n\t\t\tvar skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n\t\t\t\tvec.x = skinWeight.getX( i );\r\n\t\t\t\tvec.y = skinWeight.getY( i );\r\n\t\t\t\tvec.z = skinWeight.getZ( i );\r\n\t\t\t\tvec.w = skinWeight.getW( i );\r\n\r\n\t\t\t\tvar scale = 1.0 / vec.lengthManhattan();\r\n\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\t\tvec.multiplyScalar( scale );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function( force ) {\r\n\r\n\t\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\t\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function() {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.LOD,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\t\tvar levels = source.levels;\r\n\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar level = levels[ i ];\r\n\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddLevel: function ( object, distance ) {\r\n\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\r\n\t\tdistance = Math.abs( distance );\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t},\r\n\r\n\tgetObjectForDistance: function ( distance ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn levels[ i - 1 ].object;\r\n\r\n\t},\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tupdate: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function update( camera ) {\r\n\r\n\t\t\tvar levels = this.levels;\r\n\r\n\t\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.levels = [];\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar level = levels[ i ];\r\n\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Sprite';\r\n\r\n\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n};\r\n\r\nTHREE.Sprite.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Sprite,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y / 4;\r\n\r\n\t\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.push( {\r\n\r\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\t\tpoint: this.position,\r\n\t\t\t\tface: null,\r\n\t\t\t\tobject: this\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.LensFlare,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.positionScreen.copy( source.positionScreen );\r\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\t\tif ( size === undefined ) size = - 1;\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\tif ( opacity === undefined ) opacity = 1;\r\n\t\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\t\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\t\tthis.lensFlares.push( {\r\n\t\t\ttexture: texture,\t// THREE.Texture\r\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\t\tscale: 1, \t\t// scale\r\n\t\t\trotation: 0, \t\t// rotation\r\n\t\t\topacity: opacity,\t// opacity\r\n\t\t\tcolor: color,\t\t// color\r\n\t\t\tblending: blending\t// blending\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Update lens flares update positions on all flares based on the screen position\r\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n\t */\r\n\r\n\tupdateLensFlares: function () {\r\n\r\n\t\tvar f, fl = this.lensFlares.length;\r\n\t\tvar flare;\r\n\t\tvar vecX = - this.positionScreen.x * 2;\r\n\t\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\t\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source, recursive ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment' ] = \"#ifdef ALPHATEST\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment' ] = \"#ifdef USE_AOMAP\\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment' ] = \"#ifdef USE_AOMAP\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex' ] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex' ] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\r\n\r\nTHREE.ShaderChunk[ 'bsdfs' ] = \"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\t\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\t\t}\\n\t\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat alpha = pow2( roughness );\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\tfloat D = D_GGX( alpha, dotNH );\\n\treturn F * ( G * D );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\tvec4 r = roughness * c0 + c1;\\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_BlinnPhong_Implicit( );\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment' ] = \"#ifdef USE_BUMPMAP\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\tvec2 dHdxy_fwd() {\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\t\treturn vec2( dBx, dBy );\\n\t}\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_fragment' ] = \"#if NUM_CLIPPING_PLANES > 0\\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\t\tvec4 plane = clippingPlanes[ i ];\\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_pars_fragment' ] = \"#if NUM_CLIPPING_PLANES > 0\\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\t\tvarying vec3 vViewPosition;\\n\t#endif\\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_pars_vertex' ] = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvarying vec3 vViewPosition;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_vertex' ] = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment' ] = \"#ifdef USE_COLOR\\n\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex' ] = \"#ifdef USE_COLOR\\n\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common' ] = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\tvec3 color;\\n\tvec3 direction;\\n\tbool visible;\\n};\\nstruct ReflectedLight {\\n\tvec3 directDiffuse;\\n\tvec3 directSpecular;\\n\tvec3 indirectDiffuse;\\n\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\tvec3 position;\\n\tvec3 normal;\\n\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_uv_reflection_fragment' ] = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\tvec3 absDirection = abs(direction);\\n\tint face = -1;\\n\tif( absDirection.x > absDirection.z ) {\\n\t\tif(absDirection.x > absDirection.y )\\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\telse {\\n\t\tif(absDirection.z > absDirection.y )\\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\tfloat dxRoughness = dFdx(roughness);\\n\tfloat dyRoughness = dFdy(roughness);\\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\tfloat mipLevel = 0.5 * log2(d);\\n\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\tbool bRes = mipLevel == 0.0;\\n\tscale =  bRes && (scale < a) ? a : scale;\\n\tvec3 r;\\n\tvec2 offset;\\n\tint face = getFaceFromDirection(direction);\\n\tfloat rcpPowScale = 1.0 / powScale;\\n\tif( face == 0) {\\n\t\tr = vec3(direction.x, -direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 1) {\\n\t\tr = vec3(direction.y, direction.x, direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 2) {\\n\t\tr = vec3(direction.z, direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 3) {\\n\t\tr = vec3(direction.x, direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse if( face == 4) {\\n\t\tr = vec3(direction.y, direction.x, -direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse {\\n\t\tr = vec3(direction.z, -direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\tr = normalize(r);\\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\tvec2 base = offset + vec2( texelOffset );\\n\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\tfloat r1 = floor(roughnessVal);\\n\tfloat r2 = r1 + 1.0;\\n\tfloat t = fract(roughnessVal);\\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\tfloat s = mipInfo.y;\\n\tfloat level0 = mipInfo.x;\\n\tfloat level1 = level0 + 1.0;\\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\tvec4 result = mix(color10, color20, t);\\n\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex' ] = \"#ifdef FLIP_SIDED\\n\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_pars_fragment' ] = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n  return value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n  float maxComponent = max( max( value.r, value.g ), value.b );\\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n  float maxRGB = max( value.x, max( value.g, value.b ) );\\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n  M            = ceil( M * 255.0 ) / 255.0;\\n  return vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n    float maxRGB = max( value.x, max( value.g, value.b ) );\\n    float D      = max( maxRange / maxRGB, 1.0 );\\n    D            = min( floor( D ) / 255.0, 1.0 );\\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n  vec4 vResult;\\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n  vResult.w = fract(Le);\\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n  return vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n  float Le = value.z * 255.0 + value.w;\\n  vec3 Xp_Y_XYZp;\\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n  return vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_fragment' ] = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#else\\n\t\tvec3 reflectVec = vReflect;\\n\t#endif\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\tenvColor = envMapTexelToLinear( envColor );\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment' ] = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\tuniform float reflectivity;\\n\tuniform float envMapIntenstiy;\\n#endif\\n#ifdef USE_ENVMAP\\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\t\tvarying vec3 vWorldPosition;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\t\tuniform float refractionRatio;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvarying vec3 vWorldPosition;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t\tuniform float refractionRatio;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvWorldPosition = worldPosition.xyz;\\n\t#else\\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment' ] = \"#ifdef USE_FOG\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\t#ifdef FOG_EXP2\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\t#else\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\t#endif\\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment' ] = \"#ifdef USE_FOG\\n\tuniform vec3 fogColor;\\n\t#ifdef FOG_EXP2\\n\t\tuniform float fogDensity;\\n\t#else\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex' ] = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_pars' ] = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\tvec3 irradiance = ambientLightColor;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\tstruct DirectionalLight {\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tdirectLight.color = directionalLight.color;\\n\t\tdirectLight.direction = directionalLight.direction;\\n\t\tdirectLight.visible = true;\\n\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\tstruct PointLight {\\n\t\tvec3 position;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tvec3 lVector = pointLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\\n\t\t\tdirectLight.color = pointLight.color;\\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tstruct SpotLight {\\n\t\tvec3 position;\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tfloat coneCos;\\n\t\tfloat penumbraCos;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\t\tvec3 lVector = spotLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\t\t\tdirectLight.color = spotLight.color;\\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tstruct HemisphereLight {\\n\t\tvec3 direction;\\n\t\tvec3 skyColor;\\n\t\tvec3 groundColor;\\n\t};\\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tirradiance *= PI;\\n\t\t#endif\\n\t\treturn irradiance;\\n\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\t\t#else\\n\t\t\tvec4 envMapColor = vec4( 0.0 );\\n\t\t#endif\\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\\n\t}\\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\t}\\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\t\t#endif\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\t\tvec2 sampleUV;\\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#endif\\n\t\treturn envMapColor.rgb * envMapIntensity;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment' ] = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment' ] = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\tvec3\tdiffuseColor;\\n\tvec3\tspecularColor;\\n\tfloat\tspecularShininess;\\n\tfloat\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\t(0)\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_physical_fragment' ] = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\tmaterial.specularColor = mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_physical_pars_fragment' ] = \"struct PhysicalMaterial {\\n\tvec3\tdiffuseColor;\\n\tfloat\tspecularRoughness;\\n\tvec3\tspecularColor;\\n\t#ifndef STANDARD\\n\t#endif\\n};\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_Physical\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_template' ] = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\t#ifdef USE_LIGHTMAP\\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tlightMapIrradiance *= PI;\\n\t\t#endif\\n\t\tirradiance += lightMapIrradiance;\\n\t#endif\\n\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t}\\n\t#endif\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\t#endif\\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment' ] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tuniform float logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\t#else\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 texelColor = texture2D( map, vUv );\\n\ttexelColor = mapTexelToLinear( texelColor );\\n\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_fragment' ] = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_pars_fragment' ] = \"#ifdef USE_METALNESSMAP\\n\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex' ] = \"#ifdef USE_MORPHNORMALS\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\t#ifndef USE_MORPHNORMALS\\n\tuniform float morphTargetInfluences[ 8 ];\\n\t#else\\n\tuniform float morphTargetInfluences[ 4 ];\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\t#ifndef USE_MORPHNORMALS\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_fragment' ] = \"#ifdef FLAT_SHADED\\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\tvec3 normal = normalize( vNormal );\\n\t#ifdef DOUBLE_SIDED\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment' ] = \"#ifdef USE_NORMALMAP\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/packing.glsl\r\n\r\nTHREE.ShaderChunk[ 'packing' ] = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n  return normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n  return 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\\n  return ( viewZ + near ) / ( near - far );\\n}\\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n  return linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'premultiplied_alpha_fragment' ] = \"#ifdef PREMULTIPLIED_ALPHA\\n\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_fragment' ] = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_pars_fragment' ] = \"#ifdef USE_ROUGHNESSMAP\\n\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\t}\\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\t\tvec2 f = fract( uv * size + 0.5 );\\n\t\tfloat a = mix( lb, lt, f.y );\\n\t\tfloat b = mix( rb, rt, f.y );\\n\t\tfloat c = mix( a, b, f.x );\\n\t\treturn c;\\n\t}\\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tshadowCoord.xyz /= shadowCoord.w;\\n\t\tshadowCoord.z += shadowBias;\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\t\tbool frustumTest = all( frustumTestVec );\\n\t\tif ( frustumTest ) {\\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\t\t#endif\\n\t\t}\\n\t\treturn 1.0;\\n\t}\\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\t\tvec3 absV = abs( v );\\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\t\tabsV *= scaleToCube;\\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\t\tvec2 planar = v.xy;\\n\t\tfloat almostATexel = 1.5 * texelSizeY;\\n\t\tfloat almostOne = 1.0 - almostATexel;\\n\t\tif ( absV.z >= almostOne ) {\\n\t\t\tif ( v.z > 0.0 )\\n\t\t\t\tplanar.x = 4.0 - v.x;\\n\t\t} else if ( absV.x >= almostOne ) {\\n\t\t\tfloat signX = sign( v.x );\\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\\n\t\t} else if ( absV.y >= almostOne ) {\\n\t\t\tfloat signY = sign( v.y );\\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\t\t\tplanar.y = v.z * signY - 2.0;\\n\t\t}\\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\t}\\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\t\tvec3 lightToPosition = shadowCoord.xyz;\\n\t\tvec3 bd3D = normalize( lightToPosition );\\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmask_pars_fragment' ] = \"float getShadowMask() {\\n\tfloat shadow = 1.0;\\n\t#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#endif\\n\treturn shadow;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex' ] = \"#ifdef USE_SKINNING\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\t#ifdef BONE_TEXTURE\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\t\t\ty = dy * ( y + 0.5 );\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\t\t\treturn bone;\\n\t\t}\\n\t#else\\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\t\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment' ] = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n#else\\n\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment' ] = \"#ifdef USE_SPECULARMAP\\n\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_fragment' ] = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_pars_fragment' ] = \"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n  return toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  color = max( vec3( 0.0 ), color - 0.004 );\\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvUv2 = uv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex' ] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\t#ifdef USE_SKINNING\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\t#else\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"1f\", value: 1.0 },\r\n\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\": { type: \"t\", value: null },\r\n\t\t\"alphaMap\": { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\": { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\": { type: \"1f\", value: - 1 },\r\n\t\t\"reflectivity\": { type: \"1f\", value: 1.0 },\r\n\t\t\"refractionRatio\": { type: \"1f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\": { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\": { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\": { type: \"t\", value: null },\r\n\t\t\"bumpScale\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\": { type: \"t\", value: null },\r\n\t\t\"normalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\": { type: \"t\", value: null },\r\n\t\t\"displacementScale\": { type: \"1f\", value: 1 },\r\n\t\t\"displacementBias\": { type: \"1f\", value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\t\"roughnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\t\"metalnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\t\"fogDensity\": { type: \"1f\", value: 0.00025 },\r\n\t\t\"fogNear\": { type: \"1f\", value: 1 },\r\n\t\t\"fogFar\": { type: \"1f\", value: 2000 },\r\n\t\t\"fogColor\": { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\": { type: \"3fv\", value: [] },\r\n\r\n\t\t\"directionalLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"color\": { type: \"c\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"directionalShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"directionalShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"spotLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"distance\": { type: \"1f\" },\r\n\t\t\t\"coneCos\": { type: \"1f\" },\r\n\t\t\t\"penumbraCos\": { type: \"1f\" },\r\n\t\t\t\"decay\": { type: \"1f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"spotShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"spotShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"pointLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"decay\": { type: \"1f\" },\r\n\t\t\t\"distance\": { type: \"1f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"pointShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"pointShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"hemisphereLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"skyColor\": { type: \"c\" },\r\n\t\t\t\"groundColor\": { type: \"c\" }\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"1f\", value: 1.0 },\r\n\t\t\"size\": { type: \"1f\", value: 1.0 },\r\n\t\t\"scale\": { type: \"1f\", value: 1.0 },\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_frag' ] = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_frag' ] = \"#if DEPTH_PACKING == 3200\\n\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( 1.0 );\\n\t#if DEPTH_PACKING == 3200\\n\t\tdiffuseColor.a = opacity;\\n\t#endif\\n\t#include <map_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <logdepthbuf_fragment>\\n\t#if DEPTH_PACKING == 3200\\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\t#elif DEPTH_PACKING == 3201\\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\t#endif\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_vert' ] = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_frag' ] = \"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_vert' ] = \"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvWorldPosition = worldPosition;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_frag' ] = \"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 direction = normalize( vWorldPosition );\\n\tvec2 sampleUV;\\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\t\tdiscard;\\n\t}\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <color_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_vert' ] = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\tvLineDistance = scale * lineDistance;\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\tgl_Position = projectionMatrix * mvPosition;\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\tReflectedLight reflectedLight;\\n\treflectedLight.directDiffuse = vec3( 0.0 );\\n\treflectedLight.directSpecular = vec3( 0.0 );\\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\\n\treflectedLight.indirectSpecular = vec3( 0.0 );\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_vert' ] = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <skinbase_vertex>\\n\t#ifdef USE_ENVMAP\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#endif\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <envmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_frag' ] = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <emissivemap_fragment>\\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\t#include <lightmap_fragment>\\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\t#ifdef DOUBLE_SIDED\\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\t#else\\n\t\treflectedLight.directDiffuse = vLightFront;\\n\t#endif\\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_vert' ] = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <lights_lambert_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_frag' ] = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_phong_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_vert' ] = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphysical_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphysical_frag' ] = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\nuniform float envMapIntensity;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <roughnessmap_fragment>\\n\t#include <metalnessmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_physical_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphysical_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphysical_vert' ] = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_frag' ] = \"uniform float opacity;\\nvarying vec3 vNormal;\\n#include <common>\\n#include <packing>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_vert' ] = \"varying vec3 vNormal;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvNormal = normalize( normalMatrix * normal );\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_particle_fragment>\\n\t#include <color_fragment>\\n\t#include <alphatest_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_vert' ] = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#ifdef USE_SIZEATTENUATION\\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\t#else\\n\t\tgl_PointSize = size;\\n\t#endif\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/shadow_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadow_frag' ] = \"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/shadow_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadow_vert' ] = \"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshbasic_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshbasic_frag' ]\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshlambert_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshlambert_frag' ]\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"1f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphong_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphong_frag' ]\r\n\r\n\t},\r\n\r\n\t'standard': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'roughnessmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'metalnessmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"roughness\": { type: \"1f\", value: 0.5 },\r\n\t\t\t\t\"metalness\": { type: \"1f\", value: 0 },\r\n\t\t\t\t\"envMapIntensity\" : { type: \"1f\", value: 1 } // temporary\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'points' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'points_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'points_frag' ]\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"1f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"1f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"1f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'linedashed_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'linedashed_frag' ]\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'depth_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'depth_frag' ]\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"1f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'normal_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'normal_frag' ]\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tCube\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"1f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'cube_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'cube_frag' ]\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"1f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'equirect_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'equirect_frag' ]\r\n\r\n\t},\r\n\r\n\t'distanceRGBA': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"lightPos\": { type: \"v3\", value: new THREE.Vector3() }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'distanceRGBA_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'distanceRGBA_frag' ]\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderLib[ 'physical' ] = {\r\n\r\n\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\tTHREE.ShaderLib[ 'standard' ].uniforms,\r\n\r\n\t\t{\r\n\t\t\t// future\r\n\t\t}\r\n\r\n\t] ),\r\n\r\n\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\r\n\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\r\n\r\n};\r\n\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n * @author tschw\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = - 1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = - 1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// user-defined clipping\r\n\r\n\tthis.clippingPlanes = [];\r\n\tthis.localClippingEnabled = false;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = THREE.LinearToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\tthis.toneMappingWhitePoint = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentRenderTarget = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_currentScissor = new THREE.Vector4(),\r\n\t_currentScissorTest = null,\r\n\r\n\t_currentViewport = new THREE.Vector4(),\r\n\r\n\t//\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t//\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\t_pixelRatio = 1,\r\n\r\n\t_scissor = new THREE.Vector4( 0, 0, _width, _height ),\r\n\t_scissorTest = false,\r\n\r\n\t_viewport = new THREE.Vector4( 0, 0, _width, _height ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t// clipping\r\n\r\n\t_clipping = new THREE.WebGLClipping(),\r\n\t_clippingEnabled = false,\r\n\t_localClippingEnabled = false,\r\n\r\n\t_sphere = new THREE.Sphere(),\r\n\r\n\t// camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_lights = {\r\n\r\n\t\thash: '',\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\tpoint: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: [],\r\n\r\n\t\tshadows: []\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar _isWebGL2 = (typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext);\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'WEBGL_depth_texture' );\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\tvar lightCache = new THREE.WebGLLights();\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\tstate.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.properties = properties;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, _lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * _pixelRatio;\r\n\t\t_canvas.height = height * _pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t}\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget ) return;\r\n\r\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\trenderTarget.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget.texture );\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.type !== 'MeshStandardMaterial' && material.type !== 'MeshPhysicalMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( absNumericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprogram.getUniforms().setValue(\r\n\t\t\t\t\t_gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar dataStart = 0;\r\n\t\tvar dataCount = Infinity;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdataCount = index.count;\r\n\r\n\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\tdataCount = position.count;\r\n\r\n\t\t}\r\n\r\n\t\tvar rangeStart = geometry.drawRange.start;\r\n\t\tvar rangeCount = geometry.drawRange.count;\r\n\r\n\t\tvar groupStart = group !== null ? group.start : 0;\r\n\t\tvar groupCount = group !== null ? group.count : Infinity;\r\n\r\n\t\tvar drawStart = Math.max( dataStart, rangeStart, groupStart );\r\n\t\tvar drawEnd = Math.min( dataStart + dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\t//\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( object.drawMode ) {\r\n\r\n\t\t\t\t\tcase THREE.TrianglesDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleStripDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleFanDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar type = _gl.FLOAT;\r\n\t\t\t\t\tvar array = geometryAttribute.array;\r\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\r\n\r\n\t\t\t\t\tif ( array instanceof Float32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.FLOAT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Float64Array ) {\r\n\r\n\t\t\t\t\t\tconsole.warn(\"Unsupported data buffer format: Float64Array\");\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint16Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int16Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.SHORT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.INT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int8Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.BYTE;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint8Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_BYTE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * geometryAttribute.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction absNumericalSort( a, b ) {\r\n\r\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = - 1;\r\n\t\ttransparentObjectsLastIndex = - 1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\t_localClippingEnabled = this.localClippingEnabled;\r\n\t\t_clippingEnabled = _clipping.init(\r\n\t\t\t\tthis.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n\t\tprojectObject( scene, camera );\r\n\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\r\n\r\n\t\tsetupShadows( lights );\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\tsetupLights( lights, camera );\r\n\r\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\trenderTarget = null;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\t\trenderObjects( opaqueObjects, camera, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.NearestFilter &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// TODO Duplicated code (Frustum)\r\n\r\n\tfunction isObjectViewable( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null )\r\n\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t_sphere.copy( geometry.boundingSphere ).\r\n\t\t\tapplyMatrix4( object.matrixWorld );\r\n\r\n\t\treturn isSphereViewable( _sphere );\r\n\r\n\t}\r\n\r\n\tfunction isSpriteViewable( sprite ) {\r\n\r\n\t\t_sphere.center.set( 0, 0, 0 );\r\n\t\t_sphere.radius = 0.7071067811865476;\r\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\treturn isSphereViewable( _sphere );\r\n\r\n\t}\r\n\r\n\tfunction isSphereViewable( sphere ) {\r\n\r\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\r\n\r\n\t\tvar numPlanes = _clipping.numPlanes;\r\n\r\n\t\tif ( numPlanes === 0 ) return true;\r\n\r\n\t\tvar planes = _this.clippingPlanes,\r\n\r\n\t\t\tcenter = sphere.center,\r\n\t\t\tnegRad = - sphere.radius,\r\n\t\t\ti = 0;\r\n\r\n\t\tdo {\r\n\r\n\t\t\t// out when deeper than radius in the negative halfspace\r\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\r\n\r\n\t\t} while ( ++ i !== numPlanes );\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) ) {\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || isSpriteViewable( object ) === true ) {\r\n\r\n\t\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || isObjectViewable( object ) === true ) {\r\n\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tsetMaterial( material );\r\n\r\n\t\t\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, fog, geometry, material, object, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters(\r\n\t\t\t\tmaterial, _lights, fog, _clipping.numPlanes, object );\r\n\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( ! ( material instanceof THREE.ShaderMaterial ) &&\r\n\t\t\t\t! ( material instanceof THREE.RawShaderMaterial ) ||\r\n\t\t\t\tmaterial.clipping === true ) {\r\n\r\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\r\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lights ) {\r\n\r\n\t\t\t// store the light setup it was created for\r\n\r\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\r\n\t\t\tuniforms.directionalLights.value = _lights.directional;\r\n\t\t\tuniforms.spotLights.value = _lights.spot;\r\n\t\t\tuniforms.pointLights.value = _lights.point;\r\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\r\n\r\n\t\t}\r\n\r\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\r\n\t\t\tuniformsList =\r\n\t\t\t\t\tTHREE.WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n\t\tmaterialProperties.uniformsList = uniformsList;\r\n\t\tmaterialProperties.dynamicUniforms =\r\n\t\t\t\tTHREE.WebGLUniforms.splitDynamic( uniformsList, uniforms );\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tif ( material.side !== THREE.DoubleSide )\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\t\telse\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( _clippingEnabled ) {\r\n\r\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\r\n\r\n\t\t\t\tvar useCache =\r\n\t\t\t\t\t\tcamera === _currentCamera &&\r\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\r\n\r\n\t\t\t\t// we might want to call this function with some ClippingGroup\r\n\t\t\t\t// object instead of the material, once it becomes feasible\r\n\t\t\t\t// (#8465, #8379)\r\n\t\t\t\t_clipping.setState(\r\n\t\t\t\t\t\tmaterial.clippingPlanes, material.clipShadows,\r\n\t\t\t\t\t\tcamera, materialProperties, useCache );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialProperties.numClippingPlanes !== undefined &&\r\n\t\t\t\tmaterialProperties.numClippingPlanes !== _clipping.numPlanes ) {\r\n\r\n\t\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.lightsHash !== undefined &&\r\n\t\t\tmaterialProperties.lightsHash !== _lights.hash ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tinitMaterial( material, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\tp_uniforms.set( _gl, camera, 'projectionMatrix' );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\r\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n\t\t\t\tif ( uCamPos !== undefined ) {\r\n\r\n\t\t\t\t\tuCamPos.setValue( _gl,\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingExposure' );\r\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingWhitePoint' );\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n\t\t\tvar skeleton = object.skeleton;\r\n\r\n\t\t\tif ( skeleton ) {\r\n\r\n\t\t\t\tif ( capabilities.floatVertexTextures && skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTexture' );\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureWidth' );\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureHeight' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tif ( material.lights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhysicalMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tTHREE.WebGLUniforms.upload(\r\n\t\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// common matrices\r\n\r\n\t\tp_uniforms.set( _gl, object, 'modelViewMatrix' );\r\n\t\tp_uniforms.set( _gl, object, 'normalMatrix' );\r\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n\r\n\t\t// dynamic uniforms\r\n\r\n\t\tvar dynUniforms = materialProperties.dynamicUniforms;\r\n\r\n\t\tif ( dynUniforms !== null ) {\r\n\r\n\t\t\tTHREE.WebGLUniforms.evalDynamic(\r\n\t\t\t\t\tdynUniforms, m_uniforms, object, camera );\r\n\r\n\t\t\tTHREE.WebGLUniforms.upload( _gl, dynUniforms, m_uniforms, _this );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uvScaleMap instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\r\n\t\t// don't flip CubeTexture envMaps, flip everything else:\r\n\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\r\n\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\r\n\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\r\n\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap instanceof THREE.CubeTexture ) ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * _pixelRatio;\r\n\t\tuniforms.scale.value = _canvas.clientHeight * 0.5;\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard ( uniforms, material ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhysical ( uniforms, material ) {\r\n\r\n\t\trefreshUniformsStandard( uniforms, material );\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\t// Lighting\r\n\r\n\tfunction setupShadows ( lights ) {\r\n\r\n\t\tvar lightShadowsLength = 0;\r\n\r\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t_lights.shadows[ lightShadowsLength ++ ] = light;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.shadows.length = lightShadowsLength;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\t\tshadowMap,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirectionalLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\r\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\r\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\r\n\r\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\r\n\r\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new THREE.Matrix4();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\r\n\t\t\t\t// equal to inverse of the light's position\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\r\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\r\n\r\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.ambient[ 0 ] = r;\r\n\t\t_lights.ambient[ 1 ] = g;\r\n\t\t_lights.ambient[ 2 ] = b;\r\n\r\n\t\t_lights.directional.length = directionalLength;\r\n\t\t_lights.spot.length = spotLength;\r\n\t\t_lights.point.length = pointLength;\r\n\t\t_lights.hemi.length = hemiLength;\r\n\r\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + hemiLength + ',' + _lights.shadows.length;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tstate.setCullFace( cullFace );\r\n\t\tstate.setFlipSided( frontFaceDirection === THREE.FrontFaceDirectionCW );\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction allocTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isPowerOfTwoImage ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n\t\t\timage = makePowerOfTwo( image );\r\n\r\n\t\t}\r\n\r\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DepthTexture ) {\r\n\r\n\t\t\t// populate depth texture with dummy data\r\n\r\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType ) {\r\n\r\n\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\r\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\r\n\r\n\t\t\t} else if ( _isWebGL2 ) {\r\n\r\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\r\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n\t\t} else if ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture2D( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) return true;\r\n\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) return true;\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction makePowerOfTwo( image ) {\r\n\r\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\r\n\t\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setTextureCube ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setTextureCubeDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\tthis.allocTextureUnit = allocTextureUnit;\r\n\r\n\t//this.setTexture2D = setTexture2D;\r\n\tthis.setTexture2D = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\t// backwards compatibility: peel texture.texture\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\tif ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\t\twarned = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture = texture.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetTexture2D( texture, slot );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.setTexture = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\r\n\t\t\t\twarned = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.setTexture2D( texture, slot );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.setTextureCube = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\t// backwards compatibility: peel texture.texture\r\n\t\t\tif ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\t\twarned = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture = texture.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\r\n\t\t\t// TODO: unify these code paths\r\n\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t// this function alone should take care of cube textures\r\n\t\t\t\tsetTextureCube( texture, slot );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\r\n\r\n\t\t\t\tsetTextureCubeDynamic( texture, slot );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture ( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\r\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\r\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// FIXME: We don't support !depth !stencil\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\r\n\tfunction setupDepthTexture ( framebuffer, renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\tif ( !( renderTarget.depthTexture instanceof THREE.DepthTexture ) ) {\r\n\r\n\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\r\n\r\n\t\t}\r\n\r\n\t\t// upload an empty depth texture with framebuffer size\r\n\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\r\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\r\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\r\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\r\n\t\t}\r\n\r\n\t\t_this.setTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\r\n\r\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t_infoMemory.textures ++;\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height );\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.getCurrentRenderTarget = function() {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t};\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tsetupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar framebuffer;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTarget === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && paramThreeToGL( texture.format ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.type !== THREE.UnsignedByteType &&\r\n\t\t\t\t     paramThreeToGL( texture.type ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) &&\r\n\t\t\t\t     ! ( texture.type === THREE.FloatType && extensions.get( 'WEBGL_color_buffer_float' ) ) &&\r\n\t\t\t\t     ! ( texture.type === THREE.HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( texture.format ), paramThreeToGL( texture.type ), buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tvar target = renderTarget instanceof THREE.WebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n\t\tvar texture = properties.get( renderTarget.texture ).__webglTexture;\r\n\r\n\t\tstate.bindTexture( target, texture );\r\n\t\t_gl.generateMipmap( target );\r\n\t\tstate.bindTexture( target, null );\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\t\tif ( p === THREE.DepthFormat ) return _gl.DEPTH_COMPONENT;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_ETC1_Format ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author Marius Kintel / https://github.com/kintel\r\n */\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new THREE.Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new THREE.Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tif ( options.minFilter === undefined ) options.minFilter = THREE.LinearFilter;\r\n\r\n\tthis.texture = new THREE.Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\tthis.depthTexture = null;\r\n\r\n};\r\n\r\nObject.assign( THREE.WebGLRenderTarget.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\tthis.depthTexture = source.depthTexture;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\tthis.activeMipMapLevel = 0;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tcount = position.data.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcount = position.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLClipping.js\r\n\r\nTHREE.WebGLClipping = function() {\r\n\r\n\tvar scope = this,\r\n\r\n\t\tglobalState = null,\r\n\t\tnumGlobalPlanes = 0,\r\n\t\tlocalClippingEnabled = false,\r\n\t\trenderingShadows = false,\r\n\r\n\t\tplane = new THREE.Plane(),\r\n\t\tviewNormalMatrix = new THREE.Matrix3(),\r\n\r\n\t\tuniform = { value: null, needsUpdate: false };\r\n\r\n\tthis.uniform = uniform;\r\n\tthis.numPlanes = 0;\r\n\r\n\tthis.init = function( planes, enableLocalClipping, camera ) {\r\n\r\n\t\tvar enabled =\r\n\t\t\tplanes.length !== 0 ||\r\n\t\t\tenableLocalClipping ||\r\n\t\t\t// enable state of previous frame - the clipping code has to\r\n\t\t\t// run another frame in order to reset the state:\r\n\t\t\tnumGlobalPlanes !== 0 ||\r\n\t\t\tlocalClippingEnabled;\r\n\r\n\t\tlocalClippingEnabled = enableLocalClipping;\r\n\r\n\t\tglobalState = projectPlanes( planes, camera, 0 );\r\n\t\tnumGlobalPlanes = planes.length;\r\n\r\n\t\treturn enabled;\r\n\r\n\t};\r\n\r\n\tthis.beginShadows = function() {\r\n\r\n\t\trenderingShadows = true;\r\n\t\tprojectPlanes( null );\r\n\r\n\t};\r\n\r\n\tthis.endShadows = function() {\r\n\r\n\t\trenderingShadows = false;\r\n\t\tresetGlobalState();\r\n\r\n\t};\r\n\r\n\tthis.setState = function( planes, clipShadows, camera, cache, fromCache ) {\r\n\r\n\t\tif ( ! localClippingEnabled ||\r\n\t\t\t\tplanes === null || planes.length === 0 ||\r\n\t\t\t\trenderingShadows && ! clipShadows ) {\r\n\t\t\t// there's no local clipping\r\n\r\n\t\t\tif ( renderingShadows ) {\r\n\t\t\t\t// there's no global clipping\r\n\r\n\t\t\t\tprojectPlanes( null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresetGlobalState();\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n\t\t\t\tlGlobal = nGlobal * 4,\r\n\r\n\t\t\t\tdstArray = cache.clippingState || null;\r\n\r\n\t\t\tuniform.value = dstArray; // ensure unique state\r\n\r\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\r\n\r\n\t\t\t\tdstArray[ i ] = globalState[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache.clippingState = dstArray;\r\n\t\t\tthis.numPlanes += nGlobal;\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tfunction resetGlobalState() {\r\n\r\n\t\tif ( uniform.value !== globalState ) {\r\n\r\n\t\t\tuniform.value = globalState;\r\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = numGlobalPlanes;\r\n\r\n\t}\r\n\r\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\r\n\t\t\tdstArray = null;\r\n\r\n\t\tif ( nPlanes !== 0 ) {\r\n\r\n\t\t\tdstArray = uniform.value;\r\n\r\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\r\n\r\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\r\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, i4 = dstOffset;\r\n\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n\t\t\t\t\tplane.copy( planes[ i ] ).\r\n\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\r\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniform.value = dstArray;\r\n\t\t\tuniform.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = nPlanes;\r\n\t\treturn dstArray;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry, start, count ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'WEBGL_depth_texture':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_etc1':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tdeleteAttribute( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\t// TODO\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( property.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( geometry );\r\n\r\n\t\tvar bufferproperty = properties.get( buffergeometry );\r\n\r\n\t\tif ( bufferproperty.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( buffergeometry );\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLLights.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLLights = function () {\r\n\r\n\tvar lights = {};\r\n\r\n\tthis.get = function ( light ) {\r\n\r\n\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\treturn lights[ light.id ];\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms;\r\n\r\n\t\tswitch ( light.type ) {\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tskyColor: new THREE.Color(),\r\n\t\t\t\t\tgroundColor: new THREE.Color()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tfunction getEncodingComponents( encoding ) {\r\n\r\n\t\tswitch ( encoding ) {\r\n\r\n\t\t\tcase THREE.LinearEncoding:\r\n\t\t\t\treturn [ 'Linear','( value )' ];\r\n\t\t\tcase THREE.sRGBEncoding:\r\n\t\t\t\treturn [ 'sRGB','( value )' ];\r\n\t\t\tcase THREE.RGBEEncoding:\r\n\t\t\t\treturn [ 'RGBE','( value )' ];\r\n\t\t\tcase THREE.RGBM7Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\r\n\t\t\tcase THREE.RGBM16Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\r\n\t\t\tcase THREE.RGBDEncoding:\r\n\t\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\r\n\t\t\tcase THREE.GammaEncoding:\r\n\t\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\t\tvar toneMappingName;\r\n\r\n\t\tswitch ( toneMapping ) {\r\n\r\n\t\t\tcase THREE.LinearToneMapping:\r\n\t\t\t\ttoneMappingName = \"Linear\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.ReinhardToneMapping:\r\n\t\t\t\ttoneMappingName = \"Reinhard\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.Uncharted2ToneMapping:\r\n\t\t\t\ttoneMappingName = \"Uncharted2\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.CineonToneMapping:\r\n\t\t\t\ttoneMappingName = \"OptimizedCineon\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\r\n\r\n\t\t}\r\n\r\n\t\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\r\n\r\n\t}\r\n\r\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n\t\textensions = extensions || {};\r\n\r\n\t\tvar chunks = [\r\n\t\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : '',\r\n\t\t];\r\n\r\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\tfunction replaceLightNums( string, parameters ) {\r\n\r\n\t\treturn string\r\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n\t}\r\n\r\n\tfunction parseIncludes( string ) {\r\n\r\n\t\tvar pattern = /#include +<([\\w\\d.]+)>/g;\r\n\r\n\t\tfunction replace( match, include ) {\r\n\r\n\t\t\tvar replace = THREE.ShaderChunk[ include ];\r\n\r\n\t\t\tif ( replace === undefined ) {\r\n\r\n\t\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn parseIncludes( replace );\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\tfunction unrollLoops( string ) {\r\n\r\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n\t\tfunction replace( match, start, end, snippet ) {\r\n\r\n\t\t\tvar unroll = '';\r\n\r\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn unroll;\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar extensions = material.extensions;\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.CubeUVReflectionMapping:\r\n\t\t\t\tcase THREE.CubeUVRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tcustomExtensions,\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\r\n\r\n\t\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? THREE.ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\r\n\r\n\t\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? THREE.ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\r\n\r\n\t\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvertexShader = parseIncludes( vertexShader, parameters );\r\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\r\n\t\tfragmentShader = parseIncludes( fragmentShader, parameters );\r\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\r\n\t\tif ( material instanceof THREE.ShaderMaterial === false ) {\r\n\r\n\t\t\tvertexShader = unrollLoops( vertexShader );\r\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms =\r\n\t\t\t\t\t\tnew THREE.WebGLUniforms( gl, program, renderer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshStandardMaterial: 'physical',\r\n\t\tMeshPhysicalMaterial: 'physical',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\",\r\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"depthPacking\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\r\n\r\n\t\tvar encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = THREE.LinearEncoding;\r\n\r\n\t\t} else if ( map instanceof THREE.Texture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\r\n\t\tif ( encoding === THREE.LinearEncoding && gammaOverrideLinear ) {\r\n\r\n\t\t\tencoding = THREE.GammaEncoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, nClipPlanes, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar currentRenderTarget = renderer.getCurrentRenderTarget();\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\r\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === THREE.CubeUVReflectionMapping ) || ( material.envMap.mapping === THREE.CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tnumClippingPlanes: nClipPlanes,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: renderer.toneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide,\r\n\r\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tarray.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.push( material.fragmentShader );\r\n\t\t\tarray.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tarray.push( name );\r\n\t\t\t\tarray.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tfunction addLineNumbers( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t}\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_lightShadows = _lights.shadows,\r\n\r\n\t_shadowMapSize = new THREE.Vector2(),\r\n\r\n\t_lookTarget = new THREE.Vector3(),\r\n\t_lightPositionWorld = new THREE.Vector3(),\r\n\r\n\t_renderList = [],\r\n\r\n\t_MorphingFlag = 1,\r\n\t_SkinningFlag = 2,\r\n\r\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\r\n\r\n\t_materialCache = {};\r\n\r\n\tvar cubeDirections = [\r\n\t\tnew THREE.Vector3( 1, 0, 0 ), new THREE.Vector3( - 1, 0, 0 ), new THREE.Vector3( 0, 0, 1 ),\r\n\t\tnew THREE.Vector3( 0, 0, - 1 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tvar cubeUps = [\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ),\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 1 ),\tnew THREE.Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n\tvar cube2DViewPorts = [\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(),\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4()\r\n\t];\r\n\r\n\t// init\r\n\r\n\tvar depthMaterialTemplate = new THREE.MeshDepthMaterial();\r\n\tdepthMaterialTemplate.depthPacking = THREE.RGBADepthPacking;\r\n\tdepthMaterialTemplate.clipping = true;\r\n\r\n\tvar distanceShader = THREE.ShaderLib[ \"distanceRGBA\" ];\r\n\tvar distanceUniforms = THREE.UniformsUtils.clone( distanceShader.uniforms );\r\n\r\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\r\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n\t\tvar depthMaterial = depthMaterialTemplate.clone();\r\n\t\tdepthMaterial.morphTargets = useMorphing;\r\n\t\tdepthMaterial.skinning = useSkinning;\r\n\r\n\t\t_depthMaterials[ i ] = depthMaterial;\r\n\r\n\t\tvar distanceMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tdefines: {\r\n\t\t\t\t'USE_SHADOWMAP': ''\r\n\t\t\t},\r\n\t\t\tuniforms: distanceUniforms,\r\n\t\t\tvertexShader: distanceShader.vertexShader,\r\n\t\t\tfragmentShader: distanceShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning,\r\n\t\t\tclipping: true\r\n\t\t} );\r\n\r\n\t\t_distanceMaterials[ i ] = distanceMaterial;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\r\n\tthis.renderReverseSided = true;\r\n\tthis.renderSingleSided = true;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\tif ( _lightShadows.length === 0 ) return;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\t\t_state.setDepthTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tvar faceCount, isPointLight;\r\n\r\n\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = _lightShadows[ i ];\r\n\t\t\tvar shadow = light.shadow;\r\n\r\n\t\t\tif ( shadow === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowCamera = shadow.camera;\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tfaceCount = 6;\r\n\t\t\t\tisPointLight = true;\r\n\r\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\r\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\r\n\r\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t\t\t// following orientation:\r\n\t\t\t\t//\r\n\t\t\t\t//  xzXZ\r\n\t\t\t\t//   y Y\r\n\t\t\t\t//\r\n\t\t\t\t// X - Positive x direction\r\n\t\t\t\t// x - Negative x direction\r\n\t\t\t\t// Y - Positive y direction\r\n\t\t\t\t// y - Negative y direction\r\n\t\t\t\t// Z - Positive z direction\r\n\t\t\t\t// z - Negative z direction\r\n\r\n\t\t\t\t// positive X\r\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative X\r\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Z\r\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative Z\r\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Y\r\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n\t\t\t\t// negative Y\r\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n\t\t\t\t_shadowMapSize.x *= 4.0;\r\n\t\t\t\t_shadowMapSize.y *= 2.0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfaceCount = 1;\r\n\t\t\t\tisPointLight = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tvar pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tshadow.map = new THREE.WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow instanceof THREE.SpotLightShadow ) {\r\n\r\n\t\t\t\tshadow.update( light );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = shadow.map;\r\n\t\t\tvar shadowMatrix = shadow.matrix;\r\n\r\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// render shadow map for each cube face (if omni-directional) or\r\n\t\t\t// run a single pass if not\r\n\r\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n\t\t\t\tif ( isPointLight ) {\r\n\r\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\r\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\r\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\r\n\t\t\t\t\t_state.viewport( vpDimensions );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t\t// compute shadow matrix\r\n\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t\t_renderList.length = 0;\r\n\r\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\r\n\r\n\t\t\t\t// render shadow map\r\n\t\t\t\t// render regular objects\r\n\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Restore GL state.\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar result = null;\r\n\r\n\t\tvar materialVariants = _depthMaterials;\r\n\t\tvar customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( isPointLight ) {\r\n\r\n\t\t\tmaterialVariants = _distanceMaterials;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! customMaterial ) {\r\n\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined &&\r\n\t\t\t\t\tgeometry.morphTargets.length > 0 && material.morphTargets;\r\n\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\t\tvar variantIndex = 0;\r\n\r\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\r\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n\t\t\tresult = materialVariants[ variantIndex ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _renderer.localClippingEnabled &&\r\n\t\t\t material.clipShadows === true &&\r\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\r\n\r\n\t\t\t// in this case we need a unique material instance reflecting the\r\n\t\t\t// appropriate state\r\n\r\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\r\n\r\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\r\n\r\n\t\t\tif ( materialsForVariant === undefined ) {\r\n\r\n\t\t\t\tmaterialsForVariant = {};\r\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n\t\t\tif ( cachedMaterial === undefined ) {\r\n\r\n\t\t\t\tcachedMaterial = result.clone();\r\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tresult.visible = material.visible;\r\n\t\tresult.wireframe = material.wireframe;\r\n\r\n\t\tvar side = material.side;\r\n\r\n\t\tif ( scope.renderSingleSided && side == THREE.DoubleSide ) {\r\n\r\n\t\t\tside = THREE.FrontSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.renderReverseSided ) {\r\n\r\n\t\t\tif ( side === THREE.FrontSide ) side = THREE.BackSide;\r\n\t\t\telse if ( side === THREE.BackSide ) side = THREE.FrontSide;\r\n\r\n\t\t}\r\n\r\n\t\tresult.side = side;\r\n\r\n\t\tresult.clipShadows = material.clipShadows;\r\n\t\tresult.clippingPlanes = material.clippingPlanes;\r\n\r\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\tresult.linewidth = material.linewidth;\r\n\r\n\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\r\n\r\n\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera, shadowCamera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) && ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tthis.buffers = {\r\n\t\tcolor: new THREE.WebGLColorBuffer( gl, this ),\r\n\t\tdepth: new THREE.WebGLDepthBuffer( gl, this ),\r\n\t\tstencil: new THREE.WebGLStencilBuffer( gl, this )\r\n\t};\r\n\r\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\r\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\r\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\tvar currentPremultipledAlpha = false;\r\n\r\n\tvar currentFlipSided = null;\r\n\tvar currentCullFace = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar currentScissorTest = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = null;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tvar currentScissor = new THREE.Vector4();\r\n\tvar currentViewport = new THREE.Vector4();\r\n\r\n\tfunction createTexture( type, target, count ) {\r\n\r\n\t\tvar data = new Uint8Array( 3 );\r\n\t\tvar texture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( type, texture );\r\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\r\n\t\tfor ( var i = 0; i < count; i ++ ) {\r\n\r\n\t\t\tgl.texImage2D( target + i, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, data );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\tvar emptyTextures = {};\r\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\r\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\r\n\r\n\t//\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tthis.clearColor( 0, 0, 0, 1 );\r\n\t\tthis.clearDepth( 1 );\r\n\t\tthis.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tthis.setDepthFunc( THREE.LessEqualDepth );\r\n\r\n\t\tthis.setFlipSided( false );\r\n\t\tthis.setCullFace( THREE.CullFaceBack );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tthis.setBlending( THREE.NormalBlending );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\r\n\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\r\n\t\t\tattributeDivisors[ attribute ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttributeAndDivisor = function ( attribute, meshPerAttribute, extension ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending !== THREE.NoBlending ) {\r\n\r\n\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.BLEND );\r\n\t\t\tcurrentBlending = blending; // no blending, that is\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\tif ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// TODO Deprecate\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\tthis.buffers.color.setMask( colorWrite );\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tthis.buffers.depth.setTest( depthTest );\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tthis.buffers.depth.setMask( depthWrite );\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tthis.buffers.depth.setFunc( depthFunc );\r\n\r\n\t};\r\n\r\n\tthis.setStencilTest = function ( stencilTest ) {\r\n\r\n\t\tthis.buffers.stencil.setTest( stencilTest );\r\n\r\n\t};\r\n\r\n\tthis.setStencilWrite = function ( stencilWrite ) {\r\n\r\n\t\tthis.buffers.stencil.setMask( stencilWrite );\r\n\r\n\t};\r\n\r\n\tthis.setStencilFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tthis.buffers.stencil.setFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n\t};\r\n\r\n\tthis.setStencilOp = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tthis.buffers.stencil.setOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setCullFace = function ( cullFace ) {\r\n\r\n\t\tif ( cullFace !== THREE.CullFaceNone ) {\r\n\r\n\t\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\t\tif ( cullFace !== currentCullFace ) {\r\n\r\n\t\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.BACK );\r\n\r\n\t\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.FRONT );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t\tcurrentCullFace = cullFace;\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn currentScissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tcurrentScissorTest = scissorTest;\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === null ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// TODO Deprecate\r\n\r\n\tthis.clearColor = function ( r, g, b, a ) {\r\n\r\n\t\tthis.buffers.color.setClear( r, g, b, a );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function ( depth ) {\r\n\r\n\t\tthis.buffers.depth.setClear( depth );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function ( stencil ) {\r\n\r\n\t\tthis.buffers.stencil.setClear( stencil );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.scissor = function ( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.viewport = function ( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentTextureSlot = null;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\t\tcurrentCullFace = null;\r\n\r\n\t\tthis.buffers.color.reset();\r\n\t\tthis.buffers.depth.reset();\r\n\t\tthis.buffers.stencil.reset();\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLColorBuffer = function ( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar color = new THREE.Vector4();\r\n\tvar currentColorMask = null;\r\n\tvar currentColorClear = new THREE.Vector4();\r\n\r\n\tthis.setMask = function ( colorMask ) {\r\n\r\n\t\tif ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n\t\t\tcurrentColorMask = colorMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( r, g, b, a ) {\r\n\r\n\t\tcolor.set( r, g, b, a );\r\n\r\n\t\tif ( currentColorClear.equals( color ) === false ) {\r\n\r\n\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\tcurrentColorClear.copy( color );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentColorMask = null;\r\n\t\tcurrentColorClear = new THREE.Vector4();\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLDepthBuffer = function( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar currentDepthMask = null;\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthClear = null;\r\n\r\n\tthis.setTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMask = function( depthMask ){\r\n\r\n\t\tif ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n\t\t\tgl.depthMask( depthMask );\r\n\t\t\tcurrentDepthMask = depthMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( depth ) {\r\n\r\n\t\tif ( currentDepthClear !== depth ) {\r\n\r\n\t\t\tgl.clearDepth( depth );\r\n\t\t\tcurrentDepthClear = depth;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentDepthMask = null;\r\n\t\tcurrentDepthFunc = null;\r\n\t\tcurrentDepthClear = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLStencilBuffer = function ( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar currentStencilMask = null;\r\n\tvar currentStencilFunc = null;\r\n\tvar currentStencilRef = null;\r\n\tvar currentStencilFuncMask = null;\r\n\tvar currentStencilFail  = null;\r\n\tvar currentStencilZFail = null;\r\n\tvar currentStencilZPass = null;\r\n\tvar currentStencilClear = null;\r\n\r\n\tthis.setTest = function ( stencilTest ) {\r\n\r\n\t\tif ( stencilTest ) {\r\n\r\n\t\t\tstate.enable( gl.STENCIL_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.disable( gl.STENCIL_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMask = function ( stencilMask ) {\r\n\r\n\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n\t\t\tgl.stencilMask( stencilMask );\r\n\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t     currentStencilRef \t!== stencilRef \t||\r\n\t\t     currentStencilFuncMask !== stencilMask ) {\r\n\r\n\t\t\tgl.stencilFunc( stencilFunc,  stencilRef, stencilMask );\r\n\r\n\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\tcurrentStencilRef  = stencilRef;\r\n\t\t\tcurrentStencilFuncMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setOp\t = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t     currentStencilZFail !== stencilZFail ||\r\n\t\t     currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\tgl.stencilOp( stencilFail,  stencilZFail, stencilZPass );\r\n\r\n\t\t\tcurrentStencilFail  = stencilFail;\r\n\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( stencil ) {\r\n\r\n\t\tif ( currentStencilClear !== stencil ) {\r\n\r\n\t\t\tgl.clearStencil( stencil );\r\n\t\t\tcurrentStencilClear = stencil;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentStencilMask = null;\r\n\t\tcurrentStencilFunc = null;\r\n\t\tcurrentStencilRef = null;\r\n\t\tcurrentStencilFuncMask = null;\r\n\t\tcurrentStencilFail = null;\r\n\t\tcurrentStencilZFail = null;\r\n\t\tcurrentStencilZPass = null;\r\n\t\tcurrentStencilClear = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLUniforms.js\r\n\r\n/**\r\n *\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [renderer] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'renderer' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (renderer factorizations):\r\n *\r\n * .upload( gl, seq, values, renderer )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n * .splitDynamic( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with dynamic entry and removes them from 'seq'\r\n *\r\n *\r\n * Methods of the top-level container (renderer factorizations):\r\n *\r\n * .setValue( gl, name, value )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .set( gl, obj, prop )\r\n *\r\n * \t\tsets uniform from object and property with same name than uniform\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n *\r\n * @author tschw\r\n *\r\n */\r\n\r\nTHREE.WebGLUniforms = ( function() { // scope\r\n\r\n\t// --- Base for inner nodes (including the root) ---\r\n\r\n\tvar UniformContainer = function() {\r\n\r\n\t\t\tthis.seq = [];\r\n\t\t\tthis.map = {};\r\n\r\n\t\t},\r\n\r\n\t// --- Utilities ---\r\n\r\n\t// Array Caches (provide typed arrays for temporary by size)\r\n\r\n\t\tarrayCacheF32 = [],\r\n\t\tarrayCacheI32 = [],\r\n\r\n\t\tuncacheTemporaryArrays = function() {\r\n\r\n\t\t\tarrayCacheF32.length = 0;\r\n\t\t\tarrayCacheI32.length = 0;\r\n\r\n\t\t},\r\n\r\n\t// Flattening for arrays of vectors and matrices\r\n\r\n\t\tflatten = function( array, nBlocks, blockSize ) {\r\n\r\n\t\t\tvar firstElem = array[ 0 ];\r\n\r\n\t\t\tif ( firstElem <= 0 || firstElem > 0 ) return array;\r\n\t\t\t// unoptimized: ! isNaN( firstElem )\r\n\t\t\t// see http://jacksondunstan.com/articles/983\r\n\r\n\t\t\tvar n = nBlocks * blockSize,\r\n\t\t\t\tr = arrayCacheF32[ n ];\r\n\r\n\t\t\tif ( r === undefined ) {\r\n\r\n\t\t\t\tr = new Float32Array( n );\r\n\t\t\t\tarrayCacheF32[ n ] = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nBlocks !== 0 ) {\r\n\r\n\t\t\t\tfirstElem.toArray( r, 0 );\r\n\r\n\t\t\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n\t\t\t\t\toffset += blockSize;\r\n\t\t\t\t\tarray[ i ].toArray( r, offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn r;\r\n\r\n\t\t},\r\n\r\n\t// Texture unit allocation\r\n\r\n\t\tallocTexUnits = function( renderer, n ) {\r\n\r\n\t\t\tvar r = arrayCacheI32[ n ];\r\n\r\n\t\t\tif ( r === undefined ) {\r\n\r\n\t\t\t\tr = new Int32Array( n );\r\n\t\t\t\tarrayCacheI32[ n ] = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i )\r\n\t\t\t\tr[ i ] = renderer.allocTextureUnit();\r\n\r\n\t\t\treturn r;\r\n\r\n\t\t},\r\n\r\n\t// --- Setters ---\r\n\r\n\t// Note: Defining these methods externally, because they come in a bunch\r\n\t// and this way their names minify.\r\n\r\n\t\t// Single scalar\r\n\r\n\t\tsetValue1f = function( gl, v ) { gl.uniform1f( this.addr, v ); },\r\n\t\tsetValue1i = function( gl, v ) { gl.uniform1i( this.addr, v ); },\r\n\r\n\t\t// Single float vector (from flat array or THREE.VectorN)\r\n\r\n\t\tsetValue2fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\r\n\t\t\telse gl.uniform2f( this.addr, v.x, v.y );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue3fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x !== undefined )\r\n\t\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\t\t\telse if ( v.r !== undefined )\r\n\t\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\t\t\telse\r\n\t\t\t\tgl.uniform3fv( this.addr, v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue4fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\r\n\t\t\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n\t\t},\r\n\r\n\t\t// Single matrix (from flat array or MatrixN)\r\n\r\n\t\tsetValue2fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue3fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix3fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue4fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix4fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\t// Single texture (2D / Cube)\r\n\r\n\t\tsetValueT1 = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar unit = renderer.allocTextureUnit();\r\n\t\t\tgl.uniform1i( this.addr, unit );\r\n\t\t\tif ( v ) renderer.setTexture2D( v, unit );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueT6 = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar unit = renderer.allocTextureUnit();\r\n\t\t\tgl.uniform1i( this.addr, unit );\r\n\t\t\tif ( v ) renderer.setTextureCube( v, unit );\r\n\r\n\t\t},\r\n\r\n\t\t// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\n\t\tsetValue2iv = function( gl, v ) { gl.uniform2iv( this.addr, v ); },\r\n\t\tsetValue3iv = function( gl, v ) { gl.uniform3iv( this.addr, v ); },\r\n\t\tsetValue4iv = function( gl, v ) { gl.uniform4iv( this.addr, v ); },\r\n\r\n\t\t// Helper to pick the right setter for the singular case\r\n\r\n\t\tgetSingularSetter = function( type ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0x1406: return setValue1f; // FLOAT\r\n\t\t\t\tcase 0x8b50: return setValue2fv; // _VEC2\r\n\t\t\t\tcase 0x8b51: return setValue3fv; // _VEC3\r\n\t\t\t\tcase 0x8b52: return setValue4fv; // _VEC4\r\n\r\n\t\t\t\tcase 0x8b5a: return setValue2fm; // _MAT2\r\n\t\t\t\tcase 0x8b5b: return setValue3fm; // _MAT3\r\n\t\t\t\tcase 0x8b5c: return setValue4fm; // _MAT4\r\n\r\n\t\t\t\tcase 0x8b5e: return setValueT1; // SAMPLER_2D\r\n\t\t\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\r\n\r\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\r\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t// Array of scalars\r\n\r\n\t\tsetValue1fv = function( gl, v ) { gl.uniform1fv( this.addr, v ); },\r\n\t\tsetValue1iv = function( gl, v ) { gl.uniform1iv( this.addr, v ); },\r\n\r\n\t\t// Array of vectors (flat or from THREE classes)\r\n\r\n\t\tsetValueV2a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueV3a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueV4a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\r\n\r\n\t\t},\r\n\r\n\t\t// Array of matrices (flat or from THREE clases)\r\n\r\n\t\tsetValueM2a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueM3a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueM4a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\r\n\r\n\t\t},\r\n\r\n\t\t// Array of textures (2D / Cube)\r\n\r\n\t\tsetValueT1a = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar n = v.length,\r\n\t\t\t\tunits = allocTexUnits( renderer, n );\r\n\r\n\t\t\tgl.uniform1iv( this.addr, units );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar tex = v[ i ];\r\n\t\t\t\tif ( tex ) renderer.setTexture2D( tex, units[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsetValueT6a = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar n = v.length,\r\n\t\t\t\tunits = allocTexUnits( renderer, n );\r\n\r\n\t\t\tgl.uniform1iv( this.addr, units );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar tex = v[ i ];\r\n\t\t\t\tif ( tex ) renderer.setTextureCube( tex, units[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\r\n\t\t// Helper to pick the right setter for a pure (bottom-level) array\r\n\r\n\t\tgetPureArraySetter = function( type ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0x1406: return setValue1fv; // FLOAT\r\n\t\t\t\tcase 0x8b50: return setValueV2a; // _VEC2\r\n\t\t\t\tcase 0x8b51: return setValueV3a; // _VEC3\r\n\t\t\t\tcase 0x8b52: return setValueV4a; // _VEC4\r\n\r\n\t\t\t\tcase 0x8b5a: return setValueM2a; // _MAT2\r\n\t\t\t\tcase 0x8b5b: return setValueM3a; // _MAT3\r\n\t\t\t\tcase 0x8b5c: return setValueM4a; // _MAT4\r\n\r\n\t\t\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\r\n\t\t\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\r\n\r\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\r\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t// --- Uniform Classes ---\r\n\r\n\t\tSingleUniform = function SingleUniform( id, activeInfo, addr ) {\r\n\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.addr = addr;\r\n\t\t\tthis.setValue = getSingularSetter( activeInfo.type );\r\n\r\n\t\t\t// this.path = activeInfo.name; // DEBUG\r\n\r\n\t\t},\r\n\r\n\t\tPureArrayUniform = function( id, activeInfo, addr ) {\r\n\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.addr = addr;\r\n\t\t\tthis.size = activeInfo.size;\r\n\t\t\tthis.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n\t\t\t// this.path = activeInfo.name; // DEBUG\r\n\r\n\t\t},\r\n\r\n\t\tStructuredUniform = function( id ) {\r\n\r\n\t\t\tthis.id = id;\r\n\r\n\t\t\tUniformContainer.call( this ); // mix-in\r\n\r\n\t\t};\r\n\r\n\tStructuredUniform.prototype.setValue = function( gl, value ) {\r\n\r\n\t\t// Note: Don't need an extra 'renderer' parameter, since samplers\r\n\t\t// are not allowed in structured uniforms.\r\n\r\n\t\tvar seq = this.seq;\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ];\r\n\t\t\tu.setValue( gl, value[ u.id ] );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// --- Top-level ---\r\n\r\n\t// Parser - builds up the property tree from the path strings\r\n\r\n\tvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g,\r\n\t\t// extracts\r\n\t\t// \t- the identifier (member name or array index)\r\n\t\t//  - followed by an optional right bracket (found when array index)\r\n\t\t//  - followed by an optional left bracket or dot (type of subscript)\r\n\t\t//\r\n\t\t// Note: These portions can be read in a non-overlapping fashion and\r\n\t\t// allow straightforward parsing of the hierarchy that WebGL encodes\r\n\t\t// in the uniform names.\r\n\r\n\t\taddUniform = function( container, uniformObject ) {\r\n\r\n\t\t\tcontainer.seq.push( uniformObject );\r\n\t\t\tcontainer.map[ uniformObject.id ] = uniformObject;\r\n\r\n\t\t},\r\n\r\n\t\tparseUniform = function( activeInfo, addr, container ) {\r\n\r\n\t\t\tvar path = activeInfo.name,\r\n\t\t\t\tpathLength = path.length;\r\n\r\n\t\t\t// reset RegExp object, because of the early exit of a previous run\r\n\t\t\tRePathPart.lastIndex = 0;\r\n\r\n\t\t\tfor (; ;) {\r\n\r\n\t\t\t\tvar match = RePathPart.exec( path ),\r\n\t\t\t\t\tmatchEnd = RePathPart.lastIndex,\r\n\r\n\t\t\t\t\tid = match[ 1 ],\r\n\t\t\t\t\tidIsIndex = match[ 2 ] === ']',\r\n\t\t\t\t\tsubscript = match[ 3 ];\r\n\r\n\t\t\t\tif ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n\t\t\t\tif ( subscript === undefined ||\r\n\t\t\t\t\t\tsubscript === '[' && matchEnd + 2 === pathLength ) {\r\n\t\t\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n\t\t\t\t\taddUniform( container, subscript === undefined ?\r\n\t\t\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\r\n\t\t\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// step into inner node / create it in case it doesn't exist\r\n\r\n\t\t\t\t\tvar map = container.map,\r\n\t\t\t\t\t\tnext = map[ id ];\r\n\r\n\t\t\t\t\tif ( next === undefined ) {\r\n\r\n\t\t\t\t\t\tnext = new StructuredUniform( id );\r\n\t\t\t\t\t\taddUniform( container, next );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontainer = next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t// Root Container\r\n\r\n\t\tWebGLUniforms = function WebGLUniforms( gl, program, renderer ) {\r\n\r\n\t\t\tUniformContainer.call( this );\r\n\r\n\t\t\tthis.renderer = renderer;\r\n\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar info = gl.getActiveUniform( program, i ),\r\n\t\t\t\t\tpath = info.name,\r\n\t\t\t\t\taddr = gl.getUniformLocation( program, path );\r\n\r\n\t\t\t\tparseUniform( info, addr, this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\tWebGLUniforms.prototype.setValue = function( gl, name, value ) {\r\n\r\n\t\tvar u = this.map[ name ];\r\n\r\n\t\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.prototype.set = function( gl, object, name ) {\r\n\r\n\t\tvar u = this.map[ name ];\r\n\r\n\t\tif ( u !== undefined ) u.setValue( gl, object[ name ], this.renderer );\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.prototype.setOptional = function( gl, object, name ) {\r\n\r\n\t\tvar v = object[ name ];\r\n\r\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n\t};\r\n\r\n\r\n\t// Static interface\r\n\r\n\tWebGLUniforms.upload = function( gl, seq, values, renderer ) {\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ],\r\n\t\t\t\tv = values[ u.id ];\r\n\r\n\t\t\tif ( v.needsUpdate !== false ) {\r\n\t\t\t\t// note: always updating when .needsUpdate is undefined\r\n\r\n\t\t\t\tu.setValue( gl, v.value, renderer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.seqWithValue = function( seq, values ) {\r\n\r\n\t\tvar r = [];\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ];\r\n\t\t\tif ( u.id in values ) r.push( u );\r\n\r\n\t\t}\r\n\r\n\t\treturn r;\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.splitDynamic = function( seq, values ) {\r\n\r\n\t\tvar r = null,\r\n\t\t\tn = seq.length,\r\n\t\t\tw = 0;\r\n\r\n\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ],\r\n\t\t\t\tv = values[ u.id ];\r\n\r\n\t\t\tif ( v && v.dynamic === true ) {\r\n\r\n\t\t\t\tif ( r === null ) r = [];\r\n\t\t\t\tr.push( u );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// in-place compact 'seq', removing the matches\r\n\t\t\t\tif ( w < i ) seq[ w ] = u;\r\n\t\t\t\t++ w;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( w < n ) seq.length = w;\r\n\r\n\t\treturn r;\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.evalDynamic = function( seq, values, object, camera ) {\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar v = values[ seq[ i ].id ],\r\n\t\t\t\tf = v.onUpdateCallback;\r\n\r\n\t\t\tif ( f !== undefined ) f.call( v, object, camera );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn WebGLUniforms;\r\n\r\n} )();\r\n\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar shader, program, attributes, uniforms;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tshader = {\r\n\r\n\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\"}\"\r\n\r\n\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\"}\"\r\n\r\n\t\t\t].join( \"\\n\" )\r\n\r\n\t\t};\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewport ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewport.w / viewport.z,\r\n\t\t\thalfViewportWidth = viewport.z * 0.5,\r\n\t\t\thalfViewportHeight = viewport.w * 0.5;\r\n\r\n\t\tvar size = 16 / viewport.w,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tvar validArea = new THREE.Box2();\r\n\r\n\t\tvalidArea.min.set( 0, 0 );\r\n\t\tvalidArea.max.set( viewport.z - 16, viewport.w - 16 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.setDepthWrite( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewport.w;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\r\n\r\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\r\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tstate.setDepthWrite( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\trenderer.setTexture2D( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture2D( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\t\t\r\n\t\tif ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/Three.Legacy.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.assign( THREE, {\r\n\tFace4: function ( a, b, c, d, normal, color, materialIndex ) {\r\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\t\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\t},\r\n\tLineStrip: 0,\r\n\tLinePieces: 1,\r\n\tMeshFaceMaterial: THREE.MultiMaterial,\r\n\tPointCloud: function ( geometry, material ) {\r\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t},\r\n\tParticle: THREE.Sprite,\r\n\tParticleSystem: function ( geometry, material ) {\r\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t},\r\n\tPointCloudMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tParticleBasicMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tParticleSystemMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tVertex: function ( x, y, z ) {\r\n\t\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\t\treturn new THREE.Vector3( x, y, z );\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Box2.prototype, {\r\n\tempty: function () {\r\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Box3.prototype, {\r\n\tempty: function () {\r\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Matrix3.prototype, {\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\t},\r\n\tmultiplyVector3Array: function ( a ) {\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Matrix4.prototype, {\r\n\textractPosition: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\t},\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\t},\r\n\tmultiplyVector4: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\t},\r\n\tmultiplyVector3Array: function ( a ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\t},\r\n\trotateAxis: function ( v ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\tv.transformDirection( this );\r\n\t},\r\n\tcrossVector: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\t},\r\n\ttranslate: function ( v ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t},\r\n\trotateX: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t},\r\n\trotateY: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t},\r\n\trotateZ: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t},\r\n\trotateByAxis: function ( axis, angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Plane.prototype, {\r\n\tisIntersectionLine: function ( line ) {\r\n\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\t\treturn this.intersectsLine( line );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Quaternion.prototype, {\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Ray.prototype, {\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t},\r\n\tisIntersectionPlane: function ( plane ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\treturn this.intersectsPlane( plane );\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Vector3.prototype, {\r\n\tsetEulerFromRotationMatrix: function () {\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t},\r\n\tsetEulerFromQuaternion: function () {\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t},\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\t},\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\treturn this.setFromMatrixScale( m );\r\n\t},\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\treturn this.setFromMatrixColumn( matrix, index );\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Object3D.prototype, {\r\n\tgetChildByName: function ( name ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\t},\r\n\trenderDepth: function ( value ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t},\r\n\ttranslate: function ( distance, axis ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Object3D.prototype, {\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.LOD.prototype, {\r\n\tobjects: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\treturn this.levels;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n\tthis.setFocalLength( focalLength );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.BufferAttribute.prototype, {\r\n\tlength: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.BufferGeometry.prototype, {\r\n\taddIndex: function ( index ) {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\t},\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\t\tif ( indexOffset !== undefined ) {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\t}\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\t},\r\n\tclearDrawCalls: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\t},\r\n\tcomputeTangents: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t},\r\n\tcomputeOffsets: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.BufferGeometry.prototype, {\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Material.prototype, {\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t}\r\n\t},\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.MeshPhongMaterial.prototype, {\r\n\tmetal: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.ShaderMaterial.prototype, {\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.EventDispatcher.prototype = Object.assign( Object.create( {\r\n\r\n\t// Note: Extra base ensures these properties are not 'assign'ed.\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( target ) {\r\n\r\n\t\tconsole.warn( \"THREE.EventDispatcher: .apply is deprecated, \" +\r\n\t\t\t\t\"just inherit or Object.assign the prototype to mix-in.\" );\r\n\r\n\t\tObject.assign( target, this );\r\n\r\n\t}\r\n\r\n} ), THREE.EventDispatcher.prototype );\r\n\r\n//\r\n\r\nObject.assign( THREE.WebGLRenderer.prototype, {\r\n\tsupportsFloatTextures: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\t},\r\n\tsupportsHalfFloatTextures: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\t},\r\n\tsupportsStandardDerivatives: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\t},\r\n\tsupportsCompressedTextureS3TC: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t},\r\n\tsupportsBlendMinMax: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\t},\r\n\tsupportsVertexTextures: function () {\r\n\t\treturn this.capabilities.vertexTextures;\r\n\t},\r\n\tsupportsInstancedArrays: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\t},\r\n\tenableScissorTest: function ( boolean ) {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\tthis.setScissorTest( boolean );\r\n\t},\r\n\tinitMaterial: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t},\r\n\taddPrePlugin: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t},\r\n\taddPostPlugin: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t},\r\n\tupdateShadowMap: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.WebGLRenderer.prototype, {\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.enabled;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.cullFace;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\tthis.shadowMap.cullFace = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.WebGLShadowMap.prototype, {\r\n\tcullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.renderReverseSided ? THREE.CullFaceFront : THREE.CullFaceBack;\r\n\t\t},\r\n\t\tset: function ( cullFace ) {\r\n\t\t\tvar value = ( cullFace !== THREE.CullFaceBack );\r\n\t\t\tconsole.warn( \"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \" + value + \".\" );\r\n\t\t\tthis.renderReverseSided = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderTarget.prototype, {\r\n\twrapS: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Audio.prototype, {\r\n\tload: function ( file ) {\r\n\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.' );\r\n\t\tvar scope = this;\r\n\t\tvar audioLoader = new THREE.AudioLoader();\r\n\t\taudioLoader.load( file, function ( buffer ) {\r\n\t\t\tscope.setBuffer( buffer );\r\n\t\t} );\r\n\t\treturn this;\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.AudioAnalyser.prototype, {\r\n\tgetData: function ( file ) {\r\n\t\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n\t\treturn this.getFrequencyData();\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.TextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.CubeTextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n// File:src/extras/CurveUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.CurveUtils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ShapeUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\ttriangulate: ( function () {\r\n\r\n\t\t/**\r\n\t\t * This code is a quick port of code written in C++ which was submitted to\r\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t\t * See original code and more information here:\r\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t\t *\r\n\t\t * ported to actionscript by Zevan Rosser\r\n\t\t * www.actionsnippet.com\r\n\t\t *\r\n\t\t * ported to javascript by Joshua Koo\r\n\t\t * http://www.lab4games.net/zz85/blog\r\n\t\t *\r\n\t\t */\r\n\r\n\t\tfunction snip( contour, u, v, w, n, verts ) {\r\n\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\t\tif ( Number.EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// takes in an contour array and returns\r\n\r\n\t\treturn function ( contour, indices ) {\r\n\r\n\t\t\tvar n = contour.length;\r\n\r\n\t\t\tif ( n < 3 ) return null;\r\n\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\t\tvar u, v, w;\r\n\r\n\t\t\tif ( THREE.ShapeUtils.area( contour ) > 0.0 ) {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar nv = n;\r\n\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\r\n\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnv --;\r\n\r\n\t\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t} )(),\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2: ( function () {\r\n\r\n\t\tfunction b2p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p1( t, p ) {\r\n\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p2( t, p ) {\r\n\r\n\t\t\treturn t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2 ) {\r\n\r\n\t\t\treturn b2p0( t, p0 ) + b2p1( t, p1 ) + b2p2( t, p2 );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3: ( function () {\r\n\r\n\t\tfunction b3p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p1( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p2( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p3( t, p ) {\r\n\r\n\t\t\treturn t * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t\treturn b3p0( t, p0 ) + b3p1( t, p1 ) + b3p2( t, p2 ) + b3p3( t, p3 );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\nTHREE.Curve.prototype = {\r\n\r\n\tconstructor: THREE.Curve,\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function() {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tvar arcLengths = this.getLengths();\r\n\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t//var time = Date.now();\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function( t ) {\r\n\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.assign( Object.create( THREE.Curve.prototype ), {\r\n\r\n\tconstructor: THREE.CurvePath,\r\n\r\n\tadd: function ( curve ) {\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t},\r\n\r\n\tclosePath: function () {\r\n\r\n\t\t// TODO Test\r\n\t\t// and verify for vector3 (needs to implement equals)\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tvar d = t * this.getLength();\r\n\t\tvar curveLengths = this.getCurveLengths();\r\n\t\tvar i = 0;\r\n\r\n\t\t// To think about boundaries points.\r\n\r\n\t\twhile ( i < curveLengths.length ) {\r\n\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\t\tvar diff = curveLengths[ i ] - d;\r\n\t\t\t\tvar curve = this.curves[ i ];\r\n\r\n\t\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ti ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n\t},\r\n\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n\tgetCurveLengths: function () {\r\n\r\n\t\t// We use cache values if curves and cache array are same length\r\n\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\t\treturn this.cacheLengths;\r\n\r\n\t\t}\r\n\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\r\n\t\tvar lengths = [], sums = 0;\r\n\r\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheLengths = lengths;\r\n\r\n\t\treturn lengths;\r\n\r\n\t},\r\n\r\n\t/**************************************************************\r\n\t *\tCreate Geometries Helpers\r\n\t **************************************************************/\r\n\r\n\t/// Generate geometry from path points (for Line or Points objects)\r\n\r\n\tcreatePointsGeometry: function ( divisions ) {\r\n\r\n\t\tvar pts = this.getPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\t// Generate geometry from equidistant sampling along the path\r\n\r\n\tcreateSpacedPointsGeometry: function ( divisions ) {\r\n\r\n\t\tvar pts = this.getSpacedPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateGeometry: function ( points ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry();\r\n\r\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar point = points[ i ];\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Font.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Font = function ( data ) {\r\n\r\n\tthis.data = data;\r\n\r\n};\r\n\r\nObject.assign( THREE.Font.prototype, {\r\n\r\n\tgenerateShapes: function ( text, size, divisions ) {\r\n\r\n\t\tfunction createPaths( text ) {\r\n\r\n\t\t\tvar chars = String( text ).split( '' );\r\n\t\t\tvar scale = size / data.resolution;\r\n\t\t\tvar offset = 0;\r\n\r\n\t\t\tvar paths = [];\r\n\r\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\t\t\tvar ret = createPath( chars[ i ], scale, offset );\r\n\t\t\t\toffset += ret.offset;\r\n\r\n\t\t\t\tpaths.push( ret.path );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn paths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction createPath( c, scale, offset ) {\r\n\r\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\r\n\r\n\t\t\tif ( ! glyph ) return;\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar pts = [], b2 = THREE.ShapeUtils.b2, b3 = THREE.ShapeUtils.b3;\r\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\r\n\r\n\t\t\tif ( glyph.o ) {\r\n\r\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\t\t\tvar action = outline[ i ++ ];\r\n\r\n\t\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\t\tb2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\t\tb3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\t\tif ( divisions === undefined ) divisions = 4;\r\n\r\n\t\tvar data = this.data;\r\n\r\n\t\tvar paths = createPaths( text );\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.assign( Object.create( THREE.CurvePath.prototype ), {\r\n\r\n\tconstructor: THREE.Path,\r\n\r\n\t// TODO Clean up PATH API\r\n\r\n\t// Create path using straight lines to connect all points\r\n\t// - vectors: array of Vector2\r\n\r\n\tfromPoints: function ( vectors ) {\r\n\r\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\t\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.actions.push( { action: 'moveTo', args: [ x, y ] } );\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'lineTo', args: [ x, y ] } );\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.QuadraticBezierCurve(\r\n\t\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\tnew THREE.Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'quadraticCurveTo', args: [ aCPx, aCPy, aX, aY ] } );\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.CubicBezierCurve(\r\n\t\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\tnew THREE.Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'bezierCurveTo', args: [ aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ] } );\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\t\tArray.prototype.push.apply( npts, pts );\r\n\r\n\t\tvar curve = new THREE.SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'splineThru', args: args } );\r\n\r\n\t},\r\n\r\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n\t},\r\n\r\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\t},\r\n\r\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t},\r\n\r\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tvar args = [\r\n\t\t\taX, aY,\r\n\t\t\txRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle,\r\n\t\t\taClockwise,\r\n\t\t\taRotation || 0 // aRotation is optional.\r\n\t\t];\r\n\r\n\t\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tvar lastPoint = curve.getPoint( 1 );\r\n\t\targs.push( lastPoint.x );\r\n\t\targs.push( lastPoint.y );\r\n\r\n\t\tthis.actions.push( { action: 'ellipse', args: args } );\r\n\r\n\t},\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 40;\r\n\r\n\t\tvar points = [];\r\n\r\n\t\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t\t//if ( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tdivisions = divisions || 12;\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\tvar points = [];\r\n\r\n\t\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\t\tlaste, tx, ty;\r\n\r\n\t\tfor ( var i = 0, l = this.actions.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar item = this.actions[ i ];\r\n\r\n\t\t\tvar action = item.action;\r\n\t\t\tvar args = item.args;\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\tcase 'moveTo':\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'lineTo':\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'quadraticCurveTo':\r\n\r\n\t\t\t\tcpx  = args[ 2 ];\r\n\t\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\t\ttx = b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\tty = b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'bezierCurveTo':\r\n\r\n\t\t\t\tcpx  = args[ 4 ];\r\n\t\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\t\tcpx2 = args[ 2 ];\r\n\t\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\t\ttx = b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\tty = b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'splineThru':\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\t\tvar spts = [ last ];\r\n\r\n\t\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\t\tfor ( var j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'arc':\r\n\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log(points);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ellipse':\r\n\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\t\tvar cos, sin;\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log(points);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t} // end switch\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Normalize to remove the closing point by default.\r\n\t\tvar lastPoint = points[ points.length - 1 ];\r\n\t\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < Number.EPSILON &&\r\n\t\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < Number.EPSILON )\r\n\t\t\tpoints.splice( points.length - 1, 1 );\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\ttoShapes: function ( isCCW, noHoles ) {\r\n\r\n\t\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\t\tfor ( var i = 0, l = inActions.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar item = inActions[ i ];\r\n\r\n\t\t\t\tvar args = item.args;\r\n\t\t\t\tvar action = item.action;\r\n\r\n\t\t\t\tif ( action === 'moveTo' ) {\r\n\r\n\t\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// console.log(subPaths);\r\n\r\n\t\t\treturn\tsubPaths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\t\tvar shapes = [];\r\n\r\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tvar inside = false;\r\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn\tinside;\r\n\r\n\t\t}\r\n\r\n\t\tvar isClockWise = THREE.ShapeUtils.isClockWise;\r\n\r\n\t\tvar subPaths = extractSubpaths( this.actions );\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\t\tif ( subPaths.length === 1 ) {\r\n\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\t\tvar betterShapeHoles = [];\r\n\t\tvar newShapes = [];\r\n\t\tvar newShapeHoles = [];\r\n\t\tvar mainIdx = 0;\r\n\t\tvar tmpPoints;\r\n\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\t\tif ( solid ) {\r\n\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t\t//console.log('cw', i);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t\t//console.log('ccw', i);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tif ( newShapes.length > 1 ) {\r\n\r\n\t\t\tvar ambiguous = false;\r\n\t\t\tvar toChange = [];\r\n\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\t\tvar hole_unassigned = true;\r\n\r\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmpHoles;\r\n\r\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.assign( Object.create( THREE.Path.prototype ), {\r\n\r\n\tconstructor: THREE.Shape,\r\n\r\n\t// Convenience method to return ExtrudeGeometry\r\n\r\n\textrude: function ( options ) {\r\n\r\n\t\treturn new THREE.ExtrudeGeometry( this, options );\r\n\r\n\t},\r\n\r\n\t// Convenience method to return ShapeGeometry\r\n\r\n\tmakeGeometry: function ( options ) {\r\n\r\n\t\treturn new THREE.ShapeGeometry( this, options );\r\n\r\n\t},\r\n\r\n\tgetPointsHoles: function ( divisions ) {\r\n\r\n\t\tvar holesPts = [];\r\n\r\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t\t}\r\n\r\n\t\treturn holesPts;\r\n\r\n\t},\r\n\r\n\t// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\n\textractAllPoints: function ( divisions ) {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tshape: this.getPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\textractPoints: function ( divisions ) {\r\n\r\n\t\treturn this.extractAllPoints( divisions );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\tb2( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t);\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentQuadraticBezier = THREE.CurveUtils.tangentQuadraticBezier;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\ttangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\ttangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t);\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentCubicBezier = THREE.CurveUtils.tangentCubicBezier;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\ttangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\ttangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight )\r\n\t);\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\t\t\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\t\tb2( t, this.v0.y, this.v1.y, this.v2.y ),\r\n\t\t\tb2( t, this.v0.z, this.v1.z, this.v2.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y ),\r\n\t\t\tb3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight ),\r\n\t\t\tinterpolate( point0.z, point1.z, point2.z, point3.z, weight )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( this.closed ) {\r\n\r\n\t\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3; // 4 points\r\n\r\n\t\t\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint % l ];\r\n\t\t\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\t\t\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = function ( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.' );\r\n\r\n\tTHREE.CatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n};\r\n\r\nTHREE.ClosedSplineCurve3.prototype = Object.create( THREE.CatmullRomCurve3.prototype );\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry;\r\n\r\n// File:src/extras/geometries/BoxBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.BoxBufferGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'BoxBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tvar scope = this;\r\n\r\n\t// segments\r\n\twidthSegments = Math.floor( widthSegments ) || 1;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\tdepthSegments = Math.floor( depthSegments ) || 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = calculateVertexCount( widthSegments, heightSegments, depthSegments );\r\n\tvar indexCount = calculateIndexCount( widthSegments, heightSegments, depthSegments );\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\tvar numberOfVertices = 0;\r\n\r\n\t// group variables\r\n\tvar groupStart = 0;\r\n\r\n\t// build each side of the box geometry\r\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\r\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\r\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\r\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\r\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount ( w, h, d ) {\r\n\r\n\t\tvar vertices = 0;\r\n\r\n\t\t// calculate the amount of vertices for each side (plane)\r\n\t\tvertices += (w + 1) * (h + 1) * 2; // xy\r\n\t\tvertices += (w + 1) * (d + 1) * 2; // xz\r\n\t\tvertices += (d + 1) * (h + 1) * 2; // zy\r\n\r\n\t\treturn vertices;\r\n\r\n\t}\r\n\r\n\tfunction calculateIndexCount ( w, h, d ) {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\t// calculate the amount of squares for each side\r\n\t\tindex += w * h * 2; // xy\r\n\t\tindex += w * d * 2; // xz\r\n\t\tindex += d * h * 2; // zy\r\n\r\n\t\treturn index * 6; // two triangles per square => six vertices per square\r\n\r\n\t}\r\n\r\n\tfunction buildPlane ( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\tvar segmentWidth\t= width / gridX;\r\n\t\tvar segmentHeight = height / gridY;\r\n\r\n\t\tvar widthHalf = width / 2;\r\n\t\tvar heightHalf = height / 2;\r\n\t\tvar depthHalf = depth / 2;\r\n\r\n\t\tvar gridX1 = gridX + 1;\r\n\t\tvar gridY1 = gridY + 1;\r\n\r\n\t\tvar vertexCounter = 0;\r\n\t\tvar groupCount = 0;\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tvar y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t// now apply vector to vertex buffer\r\n\t\t\t\tvertices[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tvertices[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tvertices[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t// now apply vector to normal buffer\r\n\t\t\t\tnormals[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tnormals[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tnormals[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// uvs\r\n\t\t\t\tuvs[ uvBufferOffset ] = ix / gridX;\r\n\t\t\t\tuvs[ uvBufferOffset + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tvertexBufferOffset += 3;\r\n\t\t\t\tuvBufferOffset += 2;\r\n\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// 1. you need three indices to draw a single face\r\n\t\t// 2. a single segment consists of two faces\r\n\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t// indices\r\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tindexBufferOffset += 6;\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t\t// update total number of vertices\r\n\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.BoxBufferGeometry.prototype.constructor = THREE.BoxBufferGeometry;\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 2 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.CylinderBufferGeometry = function( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tvar scope = this;\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\r\n\r\n\t// used to calculate buffer length\r\n\r\n\tvar nbCap = 0;\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) nbCap ++;\r\n\t\tif ( radiusBottom > 0 ) nbCap ++;\r\n\r\n\t}\r\n\r\n\tvar vertexCount = calculateVertexCount();\r\n\tvar indexCount = calculateIndexCount();\r\n\r\n\t// buffers\r\n\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ), 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\r\n\tvar index = 0,\r\n\t    indexOffset = 0,\r\n\t    indexArray = [],\r\n\t    halfHeight = height / 2;\r\n\r\n\t// group variables\r\n\tvar groupStart = 0;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) generateCap( true );\r\n\t\tif ( radiusBottom > 0 ) generateCap( false );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount() {\r\n\r\n\t\tvar count = ( radialSegments + 1 ) * ( heightSegments + 1 );\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += ( ( radialSegments + 1 ) * nbCap ) + ( radialSegments * nbCap );\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction calculateIndexCount() {\r\n\r\n\t\tvar count = radialSegments * heightSegments * 2 * 3;\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += radialSegments * nbCap * 3;\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction generateTorso() {\r\n\r\n\t\tvar x, y;\r\n\t\tvar normal = new THREE.Vector3();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\tvar groupCount = 0;\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tvar indexRow = [];\r\n\r\n\t\t\tvar v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\t\t// vertex\r\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\t\t\t\tnormal.copy( vertex );\r\n\r\n\t\t\t\t// handle special case if radiusTop/radiusBottom is zero\r\n\r\n\t\t\t\tif ( ( radiusTop === 0 && y === 0 ) || ( radiusBottom === 0 && y === heightSegments ) ) {\r\n\r\n\t\t\t\t\tnormal.x = Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\t\tnormal.z = Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal.setY( Math.sqrt( normal.x * normal.x + normal.z * normal.z ) * tanTheta ).normalize();\r\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\t\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\t\t\t\tindexRow.push( index );\r\n\r\n\t\t\t\t// increase index\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\t\t\t\tvar i1 = indexArray[ y ][ x ];\r\n\t\t\t\tvar i2 = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tvar i3 = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tvar i4 = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices.setX( indexOffset, i1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i3 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\r\n\r\n\t\t\t\t// update counters\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, 0 );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n\tfunction generateCap( top ) {\r\n\r\n\t\tvar x, centerIndexStart, centerIndexEnd;\r\n\r\n\t\tvar uv = new THREE.Vector2();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\tvar groupCount = 0;\r\n\r\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tvar sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = 0.5;\r\n\t\t\tuv.y = 0.5;\r\n\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\t\t\tvar theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\tvar cosTheta = Math.cos( theta );\r\n\t\t\tvar sinTheta = Math.sin( theta );\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\r\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar c = centerIndexStart + x;\r\n\t\t\tvar i = centerIndexEnd + x;\r\n\r\n\t\t\tif ( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update counters\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.CylinderBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CylinderBufferGeometry.prototype.constructor = THREE.CylinderBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\n// File:src/extras/geometries/ConeBufferGeometry.js\r\n\r\n/*\r\n * @author: abelnation / http://github.com/abelnation\r\n */\r\n\r\nTHREE.ConeBufferGeometry = function (\r\n\tradius, height,\r\n\tradialSegments, heightSegments,\r\n\topenEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.CylinderBufferGeometry.call( this,\r\n\t\t0, radius, height,\r\n\t\tradialSegments, heightSegments,\r\n\t\topenEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n};\r\n\r\nTHREE.ConeBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.ConeBufferGeometry.prototype.constructor = THREE.ConeBufferGeometry;\r\n\r\n// File:src/extras/geometries/ConeGeometry.js\r\n\r\n/**\r\n * @author abelnation / http://github.com/abelnation\r\n */\r\n\r\nTHREE.ConeGeometry = function (\r\n\tradius, height,\r\n\tradialSegments, heightSegments,\r\n\topenEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.CylinderGeometry.call( this,\r\n\t\t0, radius, height,\r\n\t\tradialSegments, heightSegments,\r\n\t\topenEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n};\r\n\r\nTHREE.ConeGeometry.prototype = Object.create( THREE.CylinderGeometry.prototype );\r\nTHREE.ConeGeometry.prototype.constructor = THREE.ConeGeometry;\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.DEG2RAD * thresholdAngle );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, 0 ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, 1 ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, 1 ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\n // points - to create a closed torus, one must use a set of points\r\n //    like so: [ a, b, c, d, a ], see first is the same as last.\r\n // segments - the number of circumference segments to create\r\n // phiStart - the starting radian\r\n // phiLength - the radian (0 to 2PI) range of the lathed section\r\n //    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheBufferGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\tphiLength = THREE.Math.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( segments + 1 ) * points.length;\r\n\tvar indexCount = segments * points.length * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar index = 0, indexOffset = 0, base;\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar i, j;\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar sin = Math.sin( phi );\r\n\t\tvar cos = Math.cos( phi );\r\n\r\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tbase = j + i * points.length;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + points.length;\r\n\t\t\tvar c = base + points.length + 1;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\t\tvar n1 = new THREE.Vector3();\r\n\t\tvar n2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\t\tbase = segments * points.length * 3;\r\n\r\n\t\tfor( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t} // next row\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LatheBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.LatheBufferGeometry.prototype.constructor = THREE.LatheBufferGeometry;\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points\r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2PI) range of the lathed section\r\n//    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.RingBufferGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 20;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( thetaSegments + 1 ) * ( phiSegments + 1 );\r\n\tvar indexCount = thetaSegments * phiSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// some helper variables\r\n\tvar index = 0, indexOffset = 0, segment;\r\n\tvar radius = innerRadius;\r\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\t// values are generate from the inside of the ring to the outside\r\n\r\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = i + thetaSegmentLevel;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = segment;\r\n\t\t\tvar b = segment + thetaSegments + 1;\r\n\t\t\tvar c = segment + thetaSegments + 2;\r\n\t\t\tvar d = segment + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n};\r\n\r\nTHREE.RingBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.RingBufferGeometry.prototype.constructor = THREE.RingBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new ( positions.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute )( indices, 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float> // how far from text outline is bevel\r\n * }\r\n */\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar font = parameters.font;\r\n\r\n\tif ( font instanceof THREE.Font === false ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.TorusBufferGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\r\n\t// helper variables\r\n\tvar center = new THREE.Vector3();\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices[ vertexBufferOffset ] = vertex.x;\r\n\t\t\tvertices[ vertexBufferOffset + 1 ] = vertex.y;\r\n\t\t\tvertices[ vertexBufferOffset + 2 ] = vertex.z;\r\n\r\n\t\t\t// this vector is used to calculate the normal\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals[ vertexBufferOffset ] = normal.x;\r\n\t\t\tnormals[ vertexBufferOffset + 1 ] = normal.y;\r\n\t\t\tnormals[ vertexBufferOffset + 2 ] = normal.z;\r\n\r\n\t\t\t// uv\r\n\t\t\tuvs[ uvBufferOffset ] = i / tubularSegments;\r\n\t\t\tuvs[ uvBufferOffset + 1 ] = j / radialSegments;\r\n\r\n\t\t\t// update offsets\r\n\t\t\tvertexBufferOffset += 3;\r\n\t\t\tuvBufferOffset += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t// update offset\r\n\t\t\tindexBufferOffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.TorusBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusBufferGeometry.prototype.constructor = THREE.TorusBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n *\r\n * see: http://www.blackpawn.com/texts/pqtorus/\r\n */\r\nTHREE.TorusKnotBufferGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar i, j, index = 0, indexOffset = 0;\r\n\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\r\n\tvar P1 = new THREE.Vector3();\r\n\tvar P2 = new THREE.Vector3();\r\n\r\n\tvar B = new THREE.Vector3();\r\n\tvar T = new THREE.Vector3();\r\n\tvar N = new THREE.Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\t\t\tvar cx = - tube * Math.cos( v );\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / tubularSegments;\r\n\t\t\tuv.y = j / radialSegments;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = q / p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusKnotBufferGeometry.prototype.constructor = THREE.TorusKnotBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed,\r\n\t\ttaper: taper\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, x1, x2 );\r\n\t\tvar min = Math.min( x0, x1, x2 );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar groups = geometry.groups;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addGroup( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar group = groups[ o ];\r\n\r\n\t\t\t\tvar start = group.start;\r\n\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.BufferGeometry();\r\n\tlineGeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.copy( color );\r\n\tthis.cone.material.color.copy( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tif ( object instanceof THREE.Box3 ) {\r\n\r\n\t\t\tbox.copy( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tbox.setFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tif ( box.isEmpty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tfunction setPoint( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tif ( size === undefined ) size = 1;\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [\r\n\t\t- size,   size, 0,\r\n\t\t  size,   size, 0,\r\n\t\t  size, - size, 0,\r\n\t\t- size, - size, 0,\r\n\t\t- size,   size, 0\r\n\t], 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\r\n\tthis.add( new THREE.Line( geometry, material ) );\r\n\r\n\tgeometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n\tthis.add( new THREE.Line( geometry, material ));\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tvar lightPlane = this.children[ 0 ];\r\n\tvar targetLine = this.children[ 1 ];\r\n\r\n\tlightPlane.geometry.dispose();\r\n\tlightPlane.material.dispose();\r\n\ttargetLine.geometry.dispose();\r\n\ttargetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tvar lightPlane = this.children[ 0 ];\r\n\t\tvar targetLine = this.children[ 1 ];\r\n\r\n\t\tlightPlane.lookAt( v3 );\r\n\t\tlightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\ttargetLine.lookAt( v3 );\r\n\t\ttargetLine.scale.z = v3.length();\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step, color1, color2 ) {\r\n\r\n\tcolor1 = new THREE.Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new THREE.Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tvar vertices = [];\r\n\tvar colors = [];\r\n\r\n\tfor ( var i = - size, j = 0; i <= size; i += step ) {\r\n\r\n\t\tvertices.push( - size, 0, i, size, 0, i );\r\n\t\tvertices.push( i, 0, - size, i, 0, size );\r\n\r\n\t\tvar color = i === 0 ? color1 : color2;\r\n\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\r\n\t}\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.Float32Attribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function () {\r\n\r\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereBufferGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = [\r\n\t\t0, 0, 0,   0,   0,   1,\r\n\t\t0, 0, 0,   1,   0,   1,\r\n\t\t0, 0, 0, - 1,   0,   1,\r\n\t\t0, 0, 0,   0,   1,   1,\r\n\t\t0, 0, 0,   0, - 1,   1\r\n\t];\r\n\r\n\tfor ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n\t\tvar p1 = ( i / l ) * Math.PI * 2;\r\n\t\tvar p2 = ( j / l ) * Math.PI * 2;\r\n\r\n\t\tpositions.push(\r\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\r\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( positions, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\r\n\tthis.cone = new THREE.LineSegments( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 1000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/i;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/** @license React v16.13.1\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var l=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,z=n?Symbol.for(\"react.memo\"):60115,A=n?Symbol.for(\"react.lazy\"):\n60116,B=\"function\"===typeof Symbol&&Symbol.iterator;function C(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction G(){}G.prototype=F.prototype;function H(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps,f)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}\nfunction N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();d.result=a;d.keyPrefix=b;d.func=c;d.context=e;d.count=0;return d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}\nfunction S(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>Q.length&&Q.push(a)}\nfunction T(a,b,c,e){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,\"\"===b?\".\"+U(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+U(d,k);g+=T(d,f,c,e)}else if(null===a||\"object\"!==typeof a?f=null:(f=B&&a[B]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(d=a.next()).done;)d=d.value,f=b+U(d,k++),g+=T(d,f,c,e);else if(\"object\"===d)throw c=\"\"+a,Error(C(31,\"[object Object]\"===c?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":c,\"\"));return g}function V(a,b,c){return null==a?0:T(a,\"\",b,c)}function U(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}\nfunction aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?X(a,e,c,function(a){return a}):null!=a&&(O(a)&&(a=N(a,d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(P,\"$&/\")+\"/\")+c)),e.push(a))}function X(a,b,c,e,d){var g=\"\";null!=c&&(g=(\"\"+c).replace(P,\"$&/\")+\"/\");b=R(b,g,e,d);V(a,aa,b);S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}\nvar ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];X(a,e,null,b,c);return e},forEach:function(a,b,c){if(null==a)return a;b=R(null,null,b,c);V(a,W,b);S(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];X(a,b,null,function(a){return a});return b},only:function(a){if(!O(a))throw Error(C(143));return a}};\nexports.Component=F;exports.Fragment=r;exports.Profiler=u;exports.PureComponent=H;exports.StrictMode=t;exports.Suspense=y;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=J.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,\nkey:d,ref:g,props:e,_owner:k}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:x,render:a}};exports.isValidElement=O;\nexports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}};exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return Z().useCallback(a,b)};exports.useContext=function(a,b){return Z().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return Z().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return Z().useMemo(a,b)};exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)};exports.useRef=function(a){return Z().useRef(a)};exports.useState=function(a){return Z().useState(a)};exports.version=\"16.13.1\";\n","/** @license React v16.13.1\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),n=require(\"object-assign\"),r=require(\"scheduler\");function u(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(u(227));\nfunction ba(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var da=!1,ea=null,fa=!1,ha=null,ia={onError:function(a){da=!0;ea=a}};function ja(a,b,c,d,e,f,g,h,k){da=!1;ea=null;ba.apply(ia,arguments)}function ka(a,b,c,d,e,f,g,h,k){ja.apply(this,arguments);if(da){if(da){var l=ea;da=!1;ea=null}else throw Error(u(198));fa||(fa=!0,ha=l)}}var la=null,ma=null,na=null;\nfunction oa(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=na(c);ka(d,b,void 0,a);a.currentTarget=null}var pa=null,qa={};\nfunction ra(){if(pa)for(var a in qa){var b=qa[a],c=pa.indexOf(a);if(!(-1<c))throw Error(u(96,a));if(!sa[c]){if(!b.extractEvents)throw Error(u(97,a));sa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;if(ta.hasOwnProperty(h))throw Error(u(99,h));ta[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&ua(k[e],g,h);e=!0}else f.registrationName?(ua(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(u(98,d,a));}}}}\nfunction ua(a,b,c){if(va[a])throw Error(u(100,a));va[a]=b;wa[a]=b.eventTypes[c].dependencies}var sa=[],ta={},va={},wa={};function xa(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!qa.hasOwnProperty(c)||qa[c]!==d){if(qa[c])throw Error(u(102,c));qa[c]=d;b=!0}}b&&ra()}var ya=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),za=null,Aa=null,Ba=null;\nfunction Ca(a){if(a=ma(a)){if(\"function\"!==typeof za)throw Error(u(280));var b=a.stateNode;b&&(b=la(b),za(a.stateNode,a.type,b))}}function Da(a){Aa?Ba?Ba.push(a):Ba=[a]:Aa=a}function Ea(){if(Aa){var a=Aa,b=Ba;Ba=Aa=null;Ca(a);if(b)for(a=0;a<b.length;a++)Ca(b[a])}}function Fa(a,b){return a(b)}function Ga(a,b,c,d,e){return a(b,c,d,e)}function Ha(){}var Ia=Fa,Ja=!1,Ka=!1;function La(){if(null!==Aa||null!==Ba)Ha(),Ea()}\nfunction Ma(a,b,c){if(Ka)return a(b,c);Ka=!0;try{return Ia(a,b,c)}finally{Ka=!1,La()}}var Na=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,Oa=Object.prototype.hasOwnProperty,Pa={},Qa={};\nfunction Ra(a){if(Oa.call(Qa,a))return!0;if(Oa.call(Pa,a))return!1;if(Na.test(a))return Qa[a]=!0;Pa[a]=!0;return!1}function Sa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction Ta(a,b,c,d){if(null===b||\"undefined\"===typeof b||Sa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}var C={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){C[a]=new v(a,0,!1,a,null,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];C[b]=new v(b,1,!1,a[1],null,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){C[a]=new v(a,2,!1,a.toLowerCase(),null,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){C[a]=new v(a,2,!1,a,null,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){C[a]=new v(a,3,!1,a.toLowerCase(),null,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){C[a]=new v(a,3,!0,a,null,!1)});[\"capture\",\"download\"].forEach(function(a){C[a]=new v(a,4,!1,a,null,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){C[a]=new v(a,6,!1,a,null,!1)});[\"rowSpan\",\"start\"].forEach(function(a){C[a]=new v(a,5,!1,a.toLowerCase(),null,!1)});var Ua=/[\\-:]([a-z])/g;function Va(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(Ua,\nVa);C[b]=new v(b,1,!1,a,null,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(Ua,Va);C[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!1)});\nC.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){C[a]=new v(a,1,!1,a.toLowerCase(),null,!0)});var Wa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wa.hasOwnProperty(\"ReactCurrentDispatcher\")||(Wa.ReactCurrentDispatcher={current:null});Wa.hasOwnProperty(\"ReactCurrentBatchConfig\")||(Wa.ReactCurrentBatchConfig={suspense:null});\nfunction Xa(a,b,c,d){var e=C.hasOwnProperty(b)?C[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(Ta(b,c,e,d)&&(c=null),d||null===e?Ra(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar Ya=/^(.*)[\\\\\\/]/,E=\"function\"===typeof Symbol&&Symbol.for,Za=E?Symbol.for(\"react.element\"):60103,$a=E?Symbol.for(\"react.portal\"):60106,ab=E?Symbol.for(\"react.fragment\"):60107,bb=E?Symbol.for(\"react.strict_mode\"):60108,cb=E?Symbol.for(\"react.profiler\"):60114,db=E?Symbol.for(\"react.provider\"):60109,eb=E?Symbol.for(\"react.context\"):60110,fb=E?Symbol.for(\"react.concurrent_mode\"):60111,gb=E?Symbol.for(\"react.forward_ref\"):60112,hb=E?Symbol.for(\"react.suspense\"):60113,ib=E?Symbol.for(\"react.suspense_list\"):\n60120,jb=E?Symbol.for(\"react.memo\"):60115,kb=E?Symbol.for(\"react.lazy\"):60116,lb=E?Symbol.for(\"react.block\"):60121,mb=\"function\"===typeof Symbol&&Symbol.iterator;function nb(a){if(null===a||\"object\"!==typeof a)return null;a=mb&&a[mb]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function ob(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}\nfunction pb(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ab:return\"Fragment\";case $a:return\"Portal\";case cb:return\"Profiler\";case bb:return\"StrictMode\";case hb:return\"Suspense\";case ib:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case eb:return\"Context.Consumer\";case db:return\"Context.Provider\";case gb:var b=a.render;b=b.displayName||b.name||\"\";return a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\n\"ForwardRef\");case jb:return pb(a.type);case lb:return pb(a.render);case kb:if(a=1===a._status?a._result:null)return pb(a)}return null}function qb(a){var b=\"\";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c=\"\";break a;default:var d=a._debugOwner,e=a._debugSource,f=pb(a.type);c=null;d&&(c=pb(d.type));d=f;f=\"\";e?f=\" (at \"+e.fileName.replace(Ya,\"\")+\":\"+e.lineNumber+\")\":c&&(f=\" (created by \"+c+\")\");c=\"\\n    in \"+(d||\"Unknown\")+f}b+=c;a=a.return}while(a);return b}\nfunction rb(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function sb(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction tb(a){var b=sb(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function xb(a){a._valueTracker||(a._valueTracker=tb(a))}function yb(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=sb(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function zb(a,b){var c=b.checked;return n({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}\nfunction Ab(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=rb(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function Bb(a,b){b=b.checked;null!=b&&Xa(a,\"checked\",b,!1)}\nfunction Cb(a,b){Bb(a,b);var c=rb(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?Db(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&Db(a,b.type,rb(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Eb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction Db(a,b,c){if(\"number\"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function Fb(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Gb(a,b){a=n({children:void 0},b);if(b=Fb(b.children))a.children=b;return a}\nfunction Hb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+rb(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction Ib(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(u(91));return n({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function Jb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(u(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(u(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:rb(c)}}\nfunction Kb(a,b){var c=rb(b.value),d=rb(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function Lb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var Mb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction Nb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function Ob(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Nb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar Pb,Qb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Mb.svg||\"innerHTML\"in a)a.innerHTML=b;else{Pb=Pb||document.createElement(\"div\");Pb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=Pb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction Rb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}function Sb(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Tb={animationend:Sb(\"Animation\",\"AnimationEnd\"),animationiteration:Sb(\"Animation\",\"AnimationIteration\"),animationstart:Sb(\"Animation\",\"AnimationStart\"),transitionend:Sb(\"Transition\",\"TransitionEnd\")},Ub={},Vb={};\nya&&(Vb=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Tb.animationend.animation,delete Tb.animationiteration.animation,delete Tb.animationstart.animation),\"TransitionEvent\"in window||delete Tb.transitionend.transition);function Wb(a){if(Ub[a])return Ub[a];if(!Tb[a])return a;var b=Tb[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Vb)return Ub[a]=b[c];return a}\nvar Xb=Wb(\"animationend\"),Yb=Wb(\"animationiteration\"),Zb=Wb(\"animationstart\"),$b=Wb(\"transitionend\"),ac=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),bc=new (\"function\"===typeof WeakMap?WeakMap:Map);function cc(a){var b=bc.get(a);void 0===b&&(b=new Map,bc.set(a,b));return b}\nfunction dc(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function ec(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function fc(a){if(dc(a)!==a)throw Error(u(188));}\nfunction gc(a){var b=a.alternate;if(!b){b=dc(a);if(null===b)throw Error(u(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return fc(e),a;if(f===d)return fc(e),b;f=f.sibling}throw Error(u(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(u(189));}}if(c.alternate!==d)throw Error(u(190));}if(3!==c.tag)throw Error(u(188));return c.stateNode.current===c?a:b}function hc(a){a=gc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction ic(a,b){if(null==b)throw Error(u(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function jc(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var kc=null;\nfunction lc(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)oa(a,b[d],c[d]);else b&&oa(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function mc(a){null!==a&&(kc=ic(kc,a));a=kc;kc=null;if(a){jc(a,lc);if(kc)throw Error(u(95));if(fa)throw a=ha,fa=!1,ha=null,a;}}\nfunction nc(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function oc(a){if(!ya)return!1;a=\"on\"+a;var b=a in document;b||(b=document.createElement(\"div\"),b.setAttribute(a,\"return;\"),b=\"function\"===typeof b[a]);return b}var pc=[];function qc(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>pc.length&&pc.push(a)}\nfunction rc(a,b,c,d){if(pc.length){var e=pc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}\nfunction sc(a){var b=a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=tc(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=nc(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,k=0;k<sa.length;k++){var l=sa[k];l&&(l=l.extractEvents(d,b,f,e,g))&&(h=\nic(h,l))}mc(h)}}function uc(a,b,c){if(!c.has(a)){switch(a){case \"scroll\":vc(b,\"scroll\",!0);break;case \"focus\":case \"blur\":vc(b,\"focus\",!0);vc(b,\"blur\",!0);c.set(\"blur\",null);c.set(\"focus\",null);break;case \"cancel\":case \"close\":oc(a)&&vc(b,a,!0);break;case \"invalid\":case \"submit\":case \"reset\":break;default:-1===ac.indexOf(a)&&F(a,b)}c.set(a,null)}}\nvar wc,xc,yc,zc=!1,Ac=[],Bc=null,Cc=null,Dc=null,Ec=new Map,Fc=new Map,Gc=[],Hc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit\".split(\" \"),Ic=\"focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture\".split(\" \");\nfunction Jc(a,b){var c=cc(b);Hc.forEach(function(a){uc(a,b,c)});Ic.forEach(function(a){uc(a,b,c)})}function Kc(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,container:d}}\nfunction Lc(a,b){switch(a){case \"focus\":case \"blur\":Bc=null;break;case \"dragenter\":case \"dragleave\":Cc=null;break;case \"mouseover\":case \"mouseout\":Dc=null;break;case \"pointerover\":case \"pointerout\":Ec.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Fc.delete(b.pointerId)}}function Mc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Kc(b,c,d,e,f),null!==b&&(b=Nc(b),null!==b&&xc(b)),a;a.eventSystemFlags|=d;return a}\nfunction Oc(a,b,c,d,e){switch(b){case \"focus\":return Bc=Mc(Bc,a,b,c,d,e),!0;case \"dragenter\":return Cc=Mc(Cc,a,b,c,d,e),!0;case \"mouseover\":return Dc=Mc(Dc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Ec.set(f,Mc(Ec.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Fc.set(f,Mc(Fc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Pc(a){var b=tc(a.target);if(null!==b){var c=dc(b);if(null!==c)if(b=c.tag,13===b){if(b=ec(c),null!==b){a.blockedOn=b;r.unstable_runWithPriority(a.priority,function(){yc(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function Qc(a){if(null!==a.blockedOn)return!1;var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Nc(b);null!==c&&xc(c);a.blockedOn=b;return!1}return!0}\nfunction Sc(a,b,c){Qc(a)&&c.delete(b)}function Tc(){for(zc=!1;0<Ac.length;){var a=Ac[0];if(null!==a.blockedOn){a=Nc(a.blockedOn);null!==a&&wc(a);break}var b=Rc(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:Ac.shift()}null!==Bc&&Qc(Bc)&&(Bc=null);null!==Cc&&Qc(Cc)&&(Cc=null);null!==Dc&&Qc(Dc)&&(Dc=null);Ec.forEach(Sc);Fc.forEach(Sc)}function Uc(a,b){a.blockedOn===b&&(a.blockedOn=null,zc||(zc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tc)))}\nfunction Vc(a){function b(b){return Uc(b,a)}if(0<Ac.length){Uc(Ac[0],a);for(var c=1;c<Ac.length;c++){var d=Ac[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Bc&&Uc(Bc,a);null!==Cc&&Uc(Cc,a);null!==Dc&&Uc(Dc,a);Ec.forEach(b);Fc.forEach(b);for(c=0;c<Gc.length;c++)d=Gc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Gc.length&&(c=Gc[0],null===c.blockedOn);)Pc(c),null===c.blockedOn&&Gc.shift()}\nvar Wc={},Yc=new Map,Zc=new Map,$c=[\"abort\",\"abort\",Xb,\"animationEnd\",Yb,\"animationIteration\",Zb,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\n\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",$b,\"transitionEnd\",\"waiting\",\"waiting\"];function ad(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f=\"on\"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+\"Capture\"},dependencies:[d],eventPriority:b};Zc.set(d,b);Yc.set(d,f);Wc[e]=f}}\nad(\"blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),0);\nad(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);ad($c,2);for(var bd=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),cd=0;cd<bd.length;cd++)Zc.set(bd[cd],0);\nvar dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function F(a,b){vc(b,a,!1)}function vc(a,b,c){var d=Zc.get(b);switch(void 0===d?2:d){case 0:d=gd.bind(null,b,1,a);break;case 1:d=hd.bind(null,b,1,a);break;default:d=id.bind(null,b,1,a)}c?a.addEventListener(b,d,!0):a.addEventListener(b,d,!1)}function gd(a,b,c,d){Ja||Ha();var e=id,f=Ja;Ja=!0;try{Ga(e,a,b,c,d)}finally{(Ja=f)||La()}}function hd(a,b,c,d){ed(dd,id.bind(null,a,b,c,d))}\nfunction id(a,b,c,d){if(fd)if(0<Ac.length&&-1<Hc.indexOf(a))a=Kc(null,a,b,c,d),Ac.push(a);else{var e=Rc(a,b,c,d);if(null===e)Lc(a,d);else if(-1<Hc.indexOf(a))a=Kc(e,a,b,c,d),Ac.push(a);else if(!Oc(e,a,b,c,d)){Lc(a,d);a=rc(a,d,null,b);try{Ma(sc,a)}finally{qc(a)}}}}\nfunction Rc(a,b,c,d){c=nc(d);c=tc(c);if(null!==c){var e=dc(c);if(null===e)c=null;else{var f=e.tag;if(13===f){c=ec(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=rc(a,d,c,b);try{Ma(sc,a)}finally{qc(a)}return null}\nvar jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kd=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(jd).forEach(function(a){kd.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);jd[b]=jd[a]})});function ld(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||jd.hasOwnProperty(a)&&jd[a]?(\"\"+b).trim():b+\"px\"}\nfunction md(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=ld(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var nd=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction od(a,b){if(b){if(nd[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(u(137,a,\"\"));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(u(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(u(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(u(62,\"\"));}}\nfunction pd(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var qd=Mb.html;function rd(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=cc(a);b=wa[b];for(var d=0;d<b.length;d++)uc(b[d],a,c)}function sd(){}\nfunction td(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ud(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vd(a,b){var c=ud(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=ud(c)}}\nfunction wd(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?wd(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function xd(){for(var a=window,b=td();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=td(a.document)}return b}\nfunction yd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}var zd=\"$\",Ad=\"/$\",Bd=\"$?\",Cd=\"$!\",Dd=null,Ed=null;function Fd(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction Gd(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var Hd=\"function\"===typeof setTimeout?setTimeout:void 0,Id=\"function\"===typeof clearTimeout?clearTimeout:void 0;function Jd(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}\nfunction Kd(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===zd||c===Cd||c===Bd){if(0===b)return a;b--}else c===Ad&&b++}a=a.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),Md=\"__reactInternalInstance$\"+Ld,Nd=\"__reactEventHandlers$\"+Ld,Od=\"__reactContainere$\"+Ld;\nfunction tc(a){var b=a[Md];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Od]||c[Md]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Kd(a);null!==a;){if(c=a[Md])return c;a=Kd(a)}return b}a=c;c=a.parentNode}return null}function Nc(a){a=a[Md]||a[Od];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pd(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(u(33));}function Qd(a){return a[Nd]||null}\nfunction Rd(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction Sd(a,b){var c=a.stateNode;if(!c)return null;var d=la(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==typeof c)throw Error(u(231,\nb,typeof c));return c}function Td(a,b,c){if(b=Sd(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a)}function Ud(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=Rd(b);for(b=c.length;0<b--;)Td(c[b],\"captured\",a);for(b=0;b<c.length;b++)Td(c[b],\"bubbled\",a)}}\nfunction Vd(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=Sd(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=ic(c._dispatchListeners,b),c._dispatchInstances=ic(c._dispatchInstances,a))}function Wd(a){a&&a.dispatchConfig.registrationName&&Vd(a._targetInst,null,a)}function Xd(a){jc(a,Ud)}var Yd=null,Zd=null,$d=null;\nfunction ae(){if($d)return $d;var a,b=Zd,c=b.length,d,e=\"value\"in Yd?Yd.value:Yd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return $d=e.slice(a,1<d?1-d:void 0)}function be(){return!0}function ce(){return!1}\nfunction G(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?be:ce;this.isPropagationStopped=ce;return this}\nn(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=be)},persist:function(){this.isPersistent=be},isPersistent:ce,destructor:function(){var a=this.constructor.Interface,\nb;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=ce;this._dispatchInstances=this._dispatchListeners=null}});G.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\nG.extend=function(a){function b(){}function c(){return d.apply(this,arguments)}var d=this;b.prototype=d.prototype;var e=new b;n(e,c.prototype);c.prototype=e;c.prototype.constructor=c;c.Interface=n({},d.Interface,a);c.extend=d.extend;de(c);return c};de(G);function ee(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\nfunction fe(a){if(!(a instanceof this))throw Error(u(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function de(a){a.eventPool=[];a.getPooled=ee;a.release=fe}var ge=G.extend({data:null}),he=G.extend({data:null}),ie=[9,13,27,32],je=ya&&\"CompositionEvent\"in window,ke=null;ya&&\"documentMode\"in document&&(ke=document.documentMode);\nvar le=ya&&\"TextEvent\"in window&&!ke,me=ya&&(!je||ke&&8<ke&&11>=ke),ne=String.fromCharCode(32),oe={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"blur compositionend keydown keypress keyup mousedown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"blur compositionstart keydown keypress keyup mousedown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"blur compositionupdate keydown keypress keyup mousedown\".split(\" \")}},pe=!1;\nfunction qe(a,b){switch(a){case \"keyup\":return-1!==ie.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"blur\":return!0;default:return!1}}function re(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var se=!1;function te(a,b){switch(a){case \"compositionend\":return re(b);case \"keypress\":if(32!==b.which)return null;pe=!0;return ne;case \"textInput\":return a=b.data,a===ne&&pe?null:a;default:return null}}\nfunction ue(a,b){if(se)return\"compositionend\"===a||!je&&qe(a,b)?(a=ae(),$d=Zd=Yd=null,se=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return me&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar ve={eventTypes:oe,extractEvents:function(a,b,c,d){var e;if(je)b:{switch(a){case \"compositionstart\":var f=oe.compositionStart;break b;case \"compositionend\":f=oe.compositionEnd;break b;case \"compositionupdate\":f=oe.compositionUpdate;break b}f=void 0}else se?qe(a,c)&&(f=oe.compositionEnd):\"keydown\"===a&&229===c.keyCode&&(f=oe.compositionStart);f?(me&&\"ko\"!==c.locale&&(se||f!==oe.compositionStart?f===oe.compositionEnd&&se&&(e=ae()):(Yd=d,Zd=\"value\"in Yd?Yd.value:Yd.textContent,se=!0)),f=ge.getPooled(f,\nb,c,d),e?f.data=e:(e=re(c),null!==e&&(f.data=e)),Xd(f),e=f):e=null;(a=le?te(a,c):ue(a,c))?(b=he.getPooled(oe.beforeInput,b,c,d),b.data=a,Xd(b)):b=null;return null===e?b:null===b?e:[e,b]}},we={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!we[a.type]:\"textarea\"===b?!0:!1}\nvar ye={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"blur change click focus input keydown keyup selectionchange\".split(\" \")}};function ze(a,b,c){a=G.getPooled(ye.change,a,b,c);a.type=\"change\";Da(c);Xd(a);return a}var Ae=null,Be=null;function Ce(a){mc(a)}function De(a){var b=Pd(a);if(yb(b))return a}function Ee(a,b){if(\"change\"===a)return b}var Fe=!1;ya&&(Fe=oc(\"input\")&&(!document.documentMode||9<document.documentMode));\nfunction Ge(){Ae&&(Ae.detachEvent(\"onpropertychange\",He),Be=Ae=null)}function He(a){if(\"value\"===a.propertyName&&De(Be))if(a=ze(Be,a,nc(a)),Ja)mc(a);else{Ja=!0;try{Fa(Ce,a)}finally{Ja=!1,La()}}}function Ie(a,b,c){\"focus\"===a?(Ge(),Ae=b,Be=c,Ae.attachEvent(\"onpropertychange\",He)):\"blur\"===a&&Ge()}function Je(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return De(Be)}function Ke(a,b){if(\"click\"===a)return De(b)}function Le(a,b){if(\"input\"===a||\"change\"===a)return De(b)}\nvar Me={eventTypes:ye,_isInputEventSupported:Fe,extractEvents:function(a,b,c,d){var e=b?Pd(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if(\"select\"===f||\"input\"===f&&\"file\"===e.type)var g=Ee;else if(xe(e))if(Fe)g=Le;else{g=Je;var h=Ie}else(f=e.nodeName)&&\"input\"===f.toLowerCase()&&(\"checkbox\"===e.type||\"radio\"===e.type)&&(g=Ke);if(g&&(g=g(a,b)))return ze(g,c,d);h&&h(a,e,b);\"blur\"===a&&(a=e._wrapperState)&&a.controlled&&\"number\"===e.type&&Db(e,\"number\",e.value)}},Ne=G.extend({view:null,detail:null}),\nOe={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pe(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Oe[a])?!!b[a]:!1}function Qe(){return Pe}\nvar Re=0,Se=0,Te=!1,Ue=!1,Ve=Ne.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if(\"movementX\"in a)return a.movementX;var b=Re;Re=a.screenX;return Te?\"mousemove\"===a.type?a.screenX-b:0:(Te=!0,0)},movementY:function(a){if(\"movementY\"in a)return a.movementY;\nvar b=Se;Se=a.screenY;return Ue?\"mousemove\"===a.type?a.screenY-b:0:(Ue=!0,0)}}),We=Ve.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"mouseout\",\"mouseover\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"mouseout\",\"mouseover\"]},pointerEnter:{registrationName:\"onPointerEnter\",dependencies:[\"pointerout\",\"pointerover\"]},pointerLeave:{registrationName:\"onPointerLeave\",\ndependencies:[\"pointerout\",\"pointerover\"]}},Ye={eventTypes:Xe,extractEvents:function(a,b,c,d,e){var f=\"mouseover\"===a||\"pointerover\"===a,g=\"mouseout\"===a||\"pointerout\"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?tc(b):null,null!==b){var h=dc(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if(\"mouseout\"===a||\"mouseover\"===\na){var k=Ve;var l=Xe.mouseLeave;var m=Xe.mouseEnter;var p=\"mouse\"}else if(\"pointerout\"===a||\"pointerover\"===a)k=We,l=Xe.pointerLeave,m=Xe.pointerEnter,p=\"pointer\";a=null==g?f:Pd(g);f=null==b?f:Pd(b);l=k.getPooled(l,g,c,d);l.type=p+\"leave\";l.target=a;l.relatedTarget=f;c=k.getPooled(m,b,c,d);c.type=p+\"enter\";c.target=f;c.relatedTarget=a;d=g;p=b;if(d&&p)a:{k=d;m=p;g=0;for(a=k;a;a=Rd(a))g++;a=0;for(b=m;b;b=Rd(b))a++;for(;0<g-a;)k=Rd(k),g--;for(;0<a-g;)m=Rd(m),a--;for(;g--;){if(k===m||k===m.alternate)break a;\nk=Rd(k);m=Rd(m)}k=null}else k=null;m=k;for(k=[];d&&d!==m;){g=d.alternate;if(null!==g&&g===m)break;k.push(d);d=Rd(d)}for(d=[];p&&p!==m;){g=p.alternate;if(null!==g&&g===m)break;d.push(p);p=Rd(p)}for(p=0;p<k.length;p++)Vd(k[p],\"bubbled\",l);for(p=d.length;0<p--;)Vd(d[p],\"captured\",c);return 0===(e&64)?[l]:[l,c]}};function Ze(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var $e=\"function\"===typeof Object.is?Object.is:Ze,af=Object.prototype.hasOwnProperty;\nfunction bf(a,b){if($e(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!af.call(b,c[d])||!$e(a[c[d]],b[c[d]]))return!1;return!0}\nvar cf=ya&&\"documentMode\"in document&&11>=document.documentMode,df={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange\".split(\" \")}},ef=null,ff=null,gf=null,hf=!1;\nfunction jf(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(hf||null==ef||ef!==td(c))return null;c=ef;\"selectionStart\"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return gf&&bf(gf,c)?null:(gf=c,a=G.getPooled(df.select,ff,a,b),a.type=\"select\",a.target=ef,Xd(a),a)}\nvar kf={eventTypes:df,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=cc(e);f=wa.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pd(b):window;switch(a){case \"focus\":if(xe(e)||\"true\"===e.contentEditable)ef=e,ff=b,gf=null;break;case \"blur\":gf=ff=ef=null;break;case \"mousedown\":hf=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":return hf=!1,jf(c,d);case \"selectionchange\":if(cf)break;\ncase \"keydown\":case \"keyup\":return jf(c,d)}return null}},lf=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),mf=G.extend({clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),nf=Ne.extend({relatedTarget:null});function of(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}\nvar pf={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},qf={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},rf=Ne.extend({key:function(a){if(a.key){var b=pf[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=of(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?qf[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(a){return\"keypress\"===\na.type?of(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===a.type?of(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),sf=Ve.extend({dataTransfer:null}),tf=Ne.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),uf=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vf=Ve.extend({deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in\na?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),wf={eventTypes:Wc,extractEvents:function(a,b,c,d){var e=Yc.get(a);if(!e)return null;switch(a){case \"keypress\":if(0===of(c))return null;case \"keydown\":case \"keyup\":a=rf;break;case \"blur\":case \"focus\":a=nf;break;case \"click\":if(2===c.button)return null;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":a=\nVe;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":a=sf;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":a=tf;break;case Xb:case Yb:case Zb:a=lf;break;case $b:a=uf;break;case \"scroll\":a=Ne;break;case \"wheel\":a=vf;break;case \"copy\":case \"cut\":case \"paste\":a=mf;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":a=\nWe;break;default:a=G}b=a.getPooled(e,b,c,d);Xd(b);return b}};if(pa)throw Error(u(101));pa=Array.prototype.slice.call(\"ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));ra();var xf=Nc;la=Qd;ma=xf;na=Pd;xa({SimpleEventPlugin:wf,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Me,SelectEventPlugin:kf,BeforeInputEventPlugin:ve});var yf=[],zf=-1;function H(a){0>zf||(a.current=yf[zf],yf[zf]=null,zf--)}\nfunction I(a,b){zf++;yf[zf]=a.current;a.current=b}var Af={},J={current:Af},K={current:!1},Bf=Af;function Cf(a,b){var c=a.type.contextTypes;if(!c)return Af;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function L(a){a=a.childContextTypes;return null!==a&&void 0!==a}\nfunction Df(){H(K);H(J)}function Ef(a,b,c){if(J.current!==Af)throw Error(u(168));I(J,b);I(K,c)}function Ff(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(u(108,pb(b)||\"Unknown\",e));return n({},c,{},d)}function Gf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Af;Bf=J.current;I(J,a);I(K,K.current);return!0}\nfunction Hf(a,b,c){var d=a.stateNode;if(!d)throw Error(u(169));c?(a=Ff(a,b,Bf),d.__reactInternalMemoizedMergedChildContext=a,H(K),H(J),I(J,a)):H(K);I(K,c)}\nvar If=r.unstable_runWithPriority,Jf=r.unstable_scheduleCallback,Kf=r.unstable_cancelCallback,Lf=r.unstable_requestPaint,Mf=r.unstable_now,Nf=r.unstable_getCurrentPriorityLevel,Of=r.unstable_ImmediatePriority,Pf=r.unstable_UserBlockingPriority,Qf=r.unstable_NormalPriority,Rf=r.unstable_LowPriority,Sf=r.unstable_IdlePriority,Tf={},Uf=r.unstable_shouldYield,Vf=void 0!==Lf?Lf:function(){},Wf=null,Xf=null,Yf=!1,Zf=Mf(),$f=1E4>Zf?Mf:function(){return Mf()-Zf};\nfunction ag(){switch(Nf()){case Of:return 99;case Pf:return 98;case Qf:return 97;case Rf:return 96;case Sf:return 95;default:throw Error(u(332));}}function bg(a){switch(a){case 99:return Of;case 98:return Pf;case 97:return Qf;case 96:return Rf;case 95:return Sf;default:throw Error(u(332));}}function cg(a,b){a=bg(a);return If(a,b)}function dg(a,b,c){a=bg(a);return Jf(a,b,c)}function eg(a){null===Wf?(Wf=[a],Xf=Jf(Of,fg)):Wf.push(a);return Tf}function gg(){if(null!==Xf){var a=Xf;Xf=null;Kf(a)}fg()}\nfunction fg(){if(!Yf&&null!==Wf){Yf=!0;var a=0;try{var b=Wf;cg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});Wf=null}catch(c){throw null!==Wf&&(Wf=Wf.slice(a+1)),Jf(Of,gg),c;}finally{Yf=!1}}}function hg(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function ig(a,b){if(a&&a.defaultProps){b=n({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}var jg={current:null},kg=null,lg=null,mg=null;function ng(){mg=lg=kg=null}\nfunction og(a){var b=jg.current;H(jg);a.type._context._currentValue=b}function pg(a,b){for(;null!==a;){var c=a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function qg(a,b){kg=a;mg=lg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(rg=!0),a.firstContext=null)}\nfunction sg(a,b){if(mg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)mg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===lg){if(null===kg)throw Error(u(308));lg=b;kg.dependencies={expirationTime:0,firstContext:b,responders:null}}else lg=lg.next=b}return a._currentValue}var tg=!1;function ug(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}\nfunction vg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function wg(a,b){a={expirationTime:a,suspenseConfig:b,tag:0,payload:null,callback:null,next:null};return a.next=a}function xg(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction yg(a,b){var c=a.alternate;null!==c&&vg(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}\nfunction zg(a,b,c,d){var e=a.updateQueue;tg=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&(h.baseQueue=g))}if(null!==f){h=f.next;var k=e.baseState,l=0,m=null,p=null,x=null;if(null!==h){var z=h;do{g=z.expirationTime;if(g<d){var ca={expirationTime:z.expirationTime,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null};null===x?(p=x=\nca,m=k):x=x.next=ca;g>l&&(l=g)}else{null!==x&&(x=x.next={expirationTime:1073741823,suspenseConfig:z.suspenseConfig,tag:z.tag,payload:z.payload,callback:z.callback,next:null});Ag(g,z.suspenseConfig);a:{var D=a,t=z;g=b;ca=c;switch(t.tag){case 1:D=t.payload;if(\"function\"===typeof D){k=D.call(ca,k,g);break a}k=D;break a;case 3:D.effectTag=D.effectTag&-4097|64;case 0:D=t.payload;g=\"function\"===typeof D?D.call(ca,k,g):D;if(null===g||void 0===g)break a;k=n({},k,g);break a;case 2:tg=!0}}null!==z.callback&&\n(a.effectTag|=32,g=e.effects,null===g?e.effects=[z]:g.push(z))}z=z.next;if(null===z||z===h)if(g=e.shared.pending,null===g)break;else z=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===x?m=k:x.next=p;e.baseState=m;e.baseQueue=x;Bg(l);a.expirationTime=l;a.memoizedState=k}}\nfunction Cg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if(\"function\"!==typeof d)throw Error(u(191,d));d.call(e)}}}var Dg=Wa.ReactCurrentBatchConfig,Eg=(new aa.Component).refs;function Fg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:n({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}\nvar Jg={isMounted:function(a){return(a=a._reactInternalFiber)?dc(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e=wg(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);xg(a,e);Ig(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e=wg(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);xg(a,e);Ig(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Gg(),d=Dg.suspense;\nc=Hg(c,a,d);d=wg(c,d);d.tag=2;void 0!==b&&null!==b&&(d.callback=b);xg(a,d);Ig(a,c)}};function Kg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!bf(c,d)||!bf(e,f):!0}\nfunction Lg(a,b,c){var d=!1,e=Af;var f=b.contextType;\"object\"===typeof f&&null!==f?f=sg(f):(e=L(b)?Bf:J.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Cf(a,e):Af);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Jg;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Mg(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Jg.enqueueReplaceState(b,b.state,null)}\nfunction Ng(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Eg;ug(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=sg(f):(f=L(b)?Bf:J.current,e.context=Cf(a,f));zg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Fg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Jg.enqueueReplaceState(e,e.state,null),zg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.effectTag|=4)}var Og=Array.isArray;\nfunction Pg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(u(309));var d=c.stateNode}if(!d)throw Error(u(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Eg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(u(284));if(!c._owner)throw Error(u(290,a));}return a}\nfunction Qg(a,b){if(\"textarea\"!==a.type)throw Error(u(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\"));}\nfunction Rg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Sg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Tg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Pg(a,b,c),d.return=a,d;d=Ug(c.type,c.key,c.props,null,a.mode,d);d.ref=Pg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==\nc.implementation)return b=Vg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Wg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function p(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Tg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Za:return c=Ug(b.type,b.key,b.props,null,a.mode,c),c.ref=Pg(a,null,b),c.return=a,c;case $a:return b=Vg(b,a.mode,c),b.return=a,b}if(Og(b)||\nnb(b))return b=Wg(b,a.mode,c,null),b.return=a,b;Qg(a,b)}return null}function x(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Za:return c.key===e?c.type===ab?m(a,b,c.props.children,d,e):k(a,b,c,d):null;case $a:return c.key===e?l(a,b,c,d):null}if(Og(c)||nb(c))return null!==e?null:m(a,b,c,d,null);Qg(a,c)}return null}function z(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=\na.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Za:return a=a.get(null===d.key?c:d.key)||null,d.type===ab?m(b,a,d.props.children,e,d.key):k(b,a,d,e);case $a:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Og(d)||nb(d))return a=a.get(c)||null,m(b,a,d,e,null);Qg(b,d)}return null}function ca(e,g,h,k){for(var l=null,t=null,m=g,y=g=0,A=null;null!==m&&y<h.length;y++){m.index>y?(A=m,m=null):A=m.sibling;var q=x(e,m,h[y],k);if(null===q){null===m&&(m=A);break}a&&\nm&&null===q.alternate&&b(e,m);g=f(q,g,y);null===t?l=q:t.sibling=q;t=q;m=A}if(y===h.length)return c(e,m),l;if(null===m){for(;y<h.length;y++)m=p(e,h[y],k),null!==m&&(g=f(m,g,y),null===t?l=m:t.sibling=m,t=m);return l}for(m=d(e,m);y<h.length;y++)A=z(m,e,y,h[y],k),null!==A&&(a&&null!==A.alternate&&m.delete(null===A.key?y:A.key),g=f(A,g,y),null===t?l=A:t.sibling=A,t=A);a&&m.forEach(function(a){return b(e,a)});return l}function D(e,g,h,l){var k=nb(h);if(\"function\"!==typeof k)throw Error(u(150));h=k.call(h);\nif(null==h)throw Error(u(151));for(var m=k=null,t=g,y=g=0,A=null,q=h.next();null!==t&&!q.done;y++,q=h.next()){t.index>y?(A=t,t=null):A=t.sibling;var D=x(e,t,q.value,l);if(null===D){null===t&&(t=A);break}a&&t&&null===D.alternate&&b(e,t);g=f(D,g,y);null===m?k=D:m.sibling=D;m=D;t=A}if(q.done)return c(e,t),k;if(null===t){for(;!q.done;y++,q=h.next())q=p(e,q.value,l),null!==q&&(g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);return k}for(t=d(e,t);!q.done;y++,q=h.next())q=z(t,e,y,q.value,l),null!==q&&(a&&null!==\nq.alternate&&t.delete(null===q.key?y:q.key),g=f(q,g,y),null===m?k=q:m.sibling=q,m=q);a&&t.forEach(function(a){return b(e,a)});return k}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ab&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case Za:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ab){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,\nk.sibling);d=e(k,f.props);d.ref=Pg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ab?(d=Wg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Ug(f.type,f.key,f.props,null,a.mode,h),h.ref=Pg(a,d,f),h.return=a,a=h)}return g(a);case $a:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=\nd.sibling}d=Vg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Tg(f,a.mode,h),d.return=a,a=d),g(a);if(Og(f))return ca(a,d,f,h);if(nb(f))return D(a,d,f,h);l&&Qg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 0:throw a=a.type,Error(u(152,a.displayName||a.name||\"Component\"));}return c(a,d)}}var Xg=Rg(!0),Yg=Rg(!1),Zg={},$g={current:Zg},ah={current:Zg},bh={current:Zg};\nfunction ch(a){if(a===Zg)throw Error(u(174));return a}function dh(a,b){I(bh,b);I(ah,a);I($g,Zg);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Ob(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Ob(b,a)}H($g);I($g,b)}function eh(){H($g);H(ah);H(bh)}function fh(a){ch(bh.current);var b=ch($g.current);var c=Ob(b,a.type);b!==c&&(I(ah,a),I($g,c))}function gh(a){ah.current===a&&(H($g),H(ah))}var M={current:0};\nfunction hh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===Bd||c.data===Cd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ih(a,b){return{responder:a,props:b}}\nvar jh=Wa.ReactCurrentDispatcher,kh=Wa.ReactCurrentBatchConfig,lh=0,N=null,O=null,P=null,mh=!1;function Q(){throw Error(u(321));}function nh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!$e(a[c],b[c]))return!1;return!0}\nfunction oh(a,b,c,d,e,f){lh=f;N=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;jh.current=null===a||null===a.memoizedState?ph:qh;a=c(d,e);if(b.expirationTime===lh){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(u(301));f+=1;P=O=null;b.updateQueue=null;jh.current=rh;a=c(d,e)}while(b.expirationTime===lh)}jh.current=sh;b=null!==O&&null!==O.next;lh=0;P=O=N=null;mh=!1;if(b)throw Error(u(300));return a}\nfunction th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===P?N.memoizedState=P=a:P=P.next=a;return P}function uh(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(u(310));O=a;a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null};null===P?N.memoizedState=P=a:P=P.next=a}return P}\nfunction vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction wh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.expirationTime;if(l<lh){var m={expirationTime:k.expirationTime,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null};null===h?(g=h=m,f=d):h=h.next=m;l>N.expirationTime&&\n(N.expirationTime=l,Bg(l))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:k.suspenseConfig,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),Ag(l,k.suspenseConfig),d=k.eagerReducer===a?k.eagerState:a(d,k.action);k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;$e(d,b.memoizedState)||(rg=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction xh(a){var b=uh(),c=b.queue;if(null===c)throw Error(u(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);$e(f,b.memoizedState)||(rg=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction yh(a){var b=th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a};a=a.dispatch=zh.bind(null,N,a);return[b.memoizedState,a]}function Ah(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=N.updateQueue;null===b?(b={lastEffect:null},N.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}\nfunction Bh(){return uh().memoizedState}function Ch(a,b,c,d){var e=th();N.effectTag|=a;e.memoizedState=Ah(1|b,c,void 0,void 0===d?null:d)}function Dh(a,b,c,d){var e=uh();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;f=g.destroy;if(null!==d&&nh(d,g.deps)){Ah(b,c,f,d);return}}N.effectTag|=a;e.memoizedState=Ah(1|b,c,f,d)}function Eh(a,b){return Ch(516,4,a,b)}function Fh(a,b){return Dh(516,4,a,b)}function Gh(a,b){return Dh(4,2,a,b)}\nfunction Hh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function Ih(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Dh(4,2,Hh.bind(null,b,a),c)}function Jh(){}function Kh(a,b){th().memoizedState=[a,void 0===b?null:b];return a}function Lh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&nh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction Mh(a,b){var c=uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&nh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Nh(a,b,c){var d=ag();cg(98>d?98:d,function(){a(!0)});cg(97<d?97:d,function(){var d=kh.suspense;kh.suspense=void 0===b?null:b;try{a(!1),c()}finally{kh.suspense=d}})}\nfunction zh(a,b,c){var d=Gg(),e=Dg.suspense;d=Hg(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===N||null!==f&&f===N)mh=!0,e.expirationTime=lh,N.expirationTime=lh;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.eagerReducer=f;e.eagerState=h;if($e(h,g))return}catch(k){}finally{}Ig(a,\nd)}}\nvar sh={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},ph={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Ch(4,2,Hh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Ch(4,2,a,b)},useMemo:function(a,b){var c=th();b=void 0===b?null:b;a=a();c.memoizedState=[a,\nb];return a},useReducer:function(a,b,c){var d=th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=zh.bind(null,N,a);return[d.memoizedState,a]},useRef:function(a){var b=th();a={current:a};return b.memoizedState=a},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=yh(a),d=c[0],e=c[1];Eh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=\nc}},[a,b]);return d},useTransition:function(a){var b=yh(!1),c=b[0];b=b[1];return[Kh(Nh.bind(null,b,a),[b,a]),c]}},qh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=wh(vh),d=c[0],e=c[1];Fh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}},[a,b]);return d},useTransition:function(a){var b=\nwh(vh),c=b[0];b=b[1];return[Lh(Nh.bind(null,b,a),[b,a]),c]}},rh={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(a,b){var c=xh(vh),d=c[0],e=c[1];Fh(function(){var c=kh.suspense;kh.suspense=void 0===b?null:b;try{e(a)}finally{kh.suspense=c}},[a,b]);return d},useTransition:function(a){var b=xh(vh),c=b[0];b=b[1];return[Lh(Nh.bind(null,\nb,a),[b,a]),c]}},Oh=null,Ph=null,Qh=!1;function Rh(a,b){var c=Sh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}\nfunction Th(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction Uh(a){if(Qh){var b=Ph;if(b){var c=b;if(!Th(a,b)){b=Jd(c.nextSibling);if(!b||!Th(a,b)){a.effectTag=a.effectTag&-1025|2;Qh=!1;Oh=a;return}Rh(Oh,c)}Oh=a;Ph=Jd(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Qh=!1,Oh=a}}function Vh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;Oh=a}\nfunction Wh(a){if(a!==Oh)return!1;if(!Qh)return Vh(a),Qh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!Gd(b,a.memoizedProps))for(b=Ph;b;)Rh(a,b),b=Jd(b.nextSibling);Vh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(u(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===Ad){if(0===b){Ph=Jd(a.nextSibling);break a}b--}else c!==zd&&c!==Cd&&c!==Bd||b++}a=a.nextSibling}Ph=null}}else Ph=Oh?Jd(a.stateNode.nextSibling):null;return!0}\nfunction Xh(){Ph=Oh=null;Qh=!1}var Yh=Wa.ReactCurrentOwner,rg=!1;function R(a,b,c,d){b.child=null===a?Yg(b,null,c,d):Xg(b,a.child,c,d)}function Zh(a,b,c,d,e){c=c.render;var f=b.ref;qg(b,e);d=oh(a,b,c,d,f,e);if(null!==a&&!rg)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e);b.effectTag|=1;R(a,b,d,e);return b.child}\nfunction ai(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!bi(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ci(a,b,g,d,e,f);a=Ug(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:bf,c(e,d)&&a.ref===b.ref))return $h(a,b,f);b.effectTag|=1;a=Sg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ci(a,b,c,d,e,f){return null!==a&&bf(a.memoizedProps,d)&&a.ref===b.ref&&(rg=!1,e<f)?(b.expirationTime=a.expirationTime,$h(a,b,f)):di(a,b,c,d,f)}function ei(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function di(a,b,c,d,e){var f=L(c)?Bf:J.current;f=Cf(b,f);qg(b,e);c=oh(a,b,c,d,f,e);if(null!==a&&!rg)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),$h(a,b,e);b.effectTag|=1;R(a,b,c,e);return b.child}\nfunction fi(a,b,c,d,e){if(L(c)){var f=!0;Gf(b)}else f=!1;qg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Lg(b,c,d),Ng(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=sg(l):(l=L(c)?Bf:J.current,l=Cf(b,l));var m=c.getDerivedStateFromProps,p=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;p||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l);tg=!1;var x=b.memoizedState;g.state=x;zg(b,d,g,e);k=b.memoizedState;h!==d||x!==k||K.current||tg?(\"function\"===typeof m&&(Fg(b,c,m,d),k=b.memoizedState),(h=tg||Kg(b,c,h,d,x,k,l))?(p||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.effectTag|=4)):(\"function\"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,vg(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:ig(b.type,h),k=g.context,l=c.contextType,\"object\"===typeof l&&null!==l?l=sg(l):(l=L(c)?Bf:J.current,l=Cf(b,l)),m=c.getDerivedStateFromProps,(p=\"function\"===typeof m||\"function\"===\ntypeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Mg(b,g,d,l),tg=!1,k=b.memoizedState,g.state=k,zg(b,d,g,e),x=b.memoizedState,h!==d||k!==x||K.current||tg?(\"function\"===typeof m&&(Fg(b,c,m,d),x=b.memoizedState),(m=tg||Kg(b,c,h,d,k,x,l))?(p||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,l),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,l)),\"function\"===typeof g.componentDidUpdate&&(b.effectTag|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=l,d=m):\n(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&k===a.memoizedState||(b.effectTag|=256),d=!1);return gi(a,b,c,d,f,e)}\nfunction gi(a,b,c,d,e,f){ei(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hf(b,c,!1),$h(a,b,f);d=b.stateNode;Yh.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.effectTag|=1;null!==a&&g?(b.child=Xg(b,a.child,null,f),b.child=Xg(b,null,h,f)):R(a,b,h,f);b.memoizedState=d.state;e&&Hf(b,c,!0);return b.child}function hi(a){var b=a.stateNode;b.pendingContext?Ef(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Ef(a,b.context,!1);dh(a,b.containerInfo)}\nvar ii={dehydrated:null,retryTime:0};\nfunction ji(a,b,c){var d=b.mode,e=b.pendingProps,f=M.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);I(M,f&1);if(null===a){void 0!==e.fallback&&Uh(b);if(g){g=e.fallback;e=Wg(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Wg(g,d,c,null);c.return=\nb;e.sibling=c;b.memoizedState=ii;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Yg(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;c=Sg(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sg(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=ii;b.child=c;return d}c=Xg(b,a.child,e.children,c);b.memoizedState=null;return b.child=\nc}a=a.child;if(g){g=e.fallback;e=Wg(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Wg(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=ii;b.child=e;return c}b.memoizedState=null;return b.child=Xg(b,a,e.children,c)}\nfunction ki(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);pg(a.return,b)}function li(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;R(a,b,d.children,c);d=M.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&ki(a,c);else if(19===a.tag)ki(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(M,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===hh(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);li(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===hh(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}li(b,!0,c,null,f,b.lastEffect);break;case \"together\":li(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction $h(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Bg(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(u(153));if(null!==b.child){a=b.child;c=Sg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}var ni,oi,pi,qi;\nni=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};oi=function(){};\npi=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;ch($g.current);a=null;switch(c){case \"input\":f=zb(g,f);d=zb(g,d);a=[];break;case \"option\":f=Gb(g,f);d=Gb(g,d);a=[];break;case \"select\":f=n({},f,{value:void 0});d=n({},d,{value:void 0});a=[];break;case \"textarea\":f=Ib(g,f);d=Ib(g,d);a=[];break;default:\"function\"!==typeof f.onClick&&\"function\"===typeof d.onClick&&(g.onclick=sd)}od(c,d);var h,k;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if(\"style\"===\nh)for(k in g=f[h],g)g.hasOwnProperty(k)&&(c||(c={}),c[k]=\"\");else\"dangerouslySetInnerHTML\"!==h&&\"children\"!==h&&\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(va.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var l=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&l!==g&&(null!=l||null!=g))if(\"style\"===h)if(g){for(k in g)!g.hasOwnProperty(k)||l&&l.hasOwnProperty(k)||(c||(c={}),c[k]=\"\");for(k in l)l.hasOwnProperty(k)&&g[k]!==l[k]&&(c||(c={}),\nc[k]=l[k])}else c||(a||(a=[]),a.push(h,c)),c=l;else\"dangerouslySetInnerHTML\"===h?(l=l?l.__html:void 0,g=g?g.__html:void 0,null!=l&&g!==l&&(a=a||[]).push(h,l)):\"children\"===h?g===l||\"string\"!==typeof l&&\"number\"!==typeof l||(a=a||[]).push(h,\"\"+l):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&(va.hasOwnProperty(h)?(null!=l&&rd(e,h),a||g===l||(a=[])):(a=a||[]).push(h,l))}c&&(a=a||[]).push(\"style\",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};\nqi=function(a,b,c,d){c!==d&&(b.effectTag|=4)};function ri(a,b){switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction si(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(b.type)&&Df(),null;case 3:return eh(),H(K),H(J),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Wh(b)||(b.effectTag|=4),oi(b),null;case 5:gh(b);c=ch(bh.current);var e=b.type;if(null!==a&&null!=b.stateNode)pi(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(u(166));\nreturn null}a=ch($g.current);if(Wh(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Md]=b;d[Nd]=f;switch(e){case \"iframe\":case \"object\":case \"embed\":F(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<ac.length;a++)F(ac[a],d);break;case \"source\":F(\"error\",d);break;case \"img\":case \"image\":case \"link\":F(\"error\",d);F(\"load\",d);break;case \"form\":F(\"reset\",d);F(\"submit\",d);break;case \"details\":F(\"toggle\",d);break;case \"input\":Ab(d,f);F(\"invalid\",d);rd(c,\"onChange\");break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};F(\"invalid\",d);rd(c,\"onChange\");break;case \"textarea\":Jb(d,f),F(\"invalid\",d),rd(c,\"onChange\")}od(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(a=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(a=[\"children\",\"\"+h]):va.hasOwnProperty(g)&&null!=h&&rd(c,g)}switch(e){case \"input\":xb(d);Eb(d,f,!0);break;case \"textarea\":xb(d);Lb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&\n(d.onclick=sd)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;a===qd&&(a=Nb(e));a===qd?\"script\"===e?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),\"select\"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Md]=b;a[Nd]=d;ni(a,b,!1,!1);b.stateNode=a;g=pd(e,d);switch(e){case \"iframe\":case \"object\":case \"embed\":F(\"load\",\na);h=d;break;case \"video\":case \"audio\":for(h=0;h<ac.length;h++)F(ac[h],a);h=d;break;case \"source\":F(\"error\",a);h=d;break;case \"img\":case \"image\":case \"link\":F(\"error\",a);F(\"load\",a);h=d;break;case \"form\":F(\"reset\",a);F(\"submit\",a);h=d;break;case \"details\":F(\"toggle\",a);h=d;break;case \"input\":Ab(a,d);h=zb(a,d);F(\"invalid\",a);rd(c,\"onChange\");break;case \"option\":h=Gb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};h=n({},d,{value:void 0});F(\"invalid\",a);rd(c,\"onChange\");break;case \"textarea\":Jb(a,\nd);h=Ib(a,d);F(\"invalid\",a);rd(c,\"onChange\");break;default:h=d}od(e,h);var k=h;for(f in k)if(k.hasOwnProperty(f)){var l=k[f];\"style\"===f?md(a,l):\"dangerouslySetInnerHTML\"===f?(l=l?l.__html:void 0,null!=l&&Qb(a,l)):\"children\"===f?\"string\"===typeof l?(\"textarea\"!==e||\"\"!==l)&&Rb(a,l):\"number\"===typeof l&&Rb(a,\"\"+l):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(va.hasOwnProperty(f)?null!=l&&rd(c,f):null!=l&&Xa(a,f,l,g))}switch(e){case \"input\":xb(a);Eb(a,d,!1);\nbreak;case \"textarea\":xb(a);Lb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+rb(d.value));break;case \"select\":a.multiple=!!d.multiple;c=d.value;null!=c?Hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&Hb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof h.onClick&&(a.onclick=sd)}Fd(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)qi(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(u(166));\nc=ch(bh.current);ch($g.current);Wh(b)?(c=b.stateNode,d=b.memoizedProps,c[Md]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),c[Md]=b,b.stateNode=c)}return null;case 13:H(M);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Wh(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=\ne,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(M.current&1))S===ti&&(S=ui);else{if(S===ti||S===ui)S=vi;0!==wi&&null!==T&&(xi(T,U),yi(T,wi))}if(c||d)b.effectTag|=4;return null;case 4:return eh(),oi(b),null;case 10:return og(b),null;case 17:return L(b.type)&&Df(),null;case 19:H(M);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)ri(d,!1);else{if(S!==ti||null!==a&&0!==(a.effectTag&\n64))for(f=b.child;null!==f;){a=hh(f);if(null!==a){b.effectTag|=64;ri(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,\ne.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;I(M,M.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=hh(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),ri(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!f.alternate)return b=\nb.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*$f()-d.renderingStartTime>d.tailExpiration&&1<c&&(b.effectTag|=64,e=!0,ri(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=$f()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=$f(),c.sibling=null,b=M.current,I(M,e?b&1|2:b&1),c):null}throw Error(u(156,\nb.tag));}function zi(a){switch(a.tag){case 1:L(a.type)&&Df();var b=a.effectTag;return b&4096?(a.effectTag=b&-4097|64,a):null;case 3:eh();H(K);H(J);b=a.effectTag;if(0!==(b&64))throw Error(u(285));a.effectTag=b&-4097|64;return a;case 5:return gh(a),null;case 13:return H(M),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return H(M),null;case 4:return eh(),null;case 10:return og(a),null;default:return null}}function Ai(a,b){return{value:a,source:b,stack:qb(b)}}\nvar Bi=\"function\"===typeof WeakSet?WeakSet:Set;function Ci(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=qb(c));null!==c&&pb(c.type);b=b.value;null!==a&&1===a.tag&&pb(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function Di(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Ei(a,c)}}function Fi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Ei(a,c)}else b.current=null}\nfunction Gi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:ig(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163));}\nfunction Hi(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Ii(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}\nfunction Ji(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:Ii(3,c);return;case 1:a=c.stateNode;if(c.effectTag&4)if(null===b)a.componentDidMount();else{var d=c.elementType===c.type?b.memoizedProps:ig(c.type,b.memoizedProps);a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}b=c.updateQueue;null!==b&&Cg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Cg(c,b,a)}return;\ncase 5:a=c.stateNode;null===b&&c.effectTag&4&&Fd(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Vc(c))));return;case 19:case 17:case 20:case 21:return}throw Error(u(163));}\nfunction Ki(a,b,c){\"function\"===typeof Li&&Li(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;cg(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Ei(g,h)}}a=a.next}while(a!==d)})}break;case 1:Fi(b);c=b.stateNode;\"function\"===typeof c.componentWillUnmount&&Di(b,c);break;case 5:Fi(b);break;case 4:Mi(a,b,c)}}\nfunction Ni(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Ni(b)}function Oi(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Pi(a){a:{for(var b=a.return;null!==b;){if(Oi(b)){var c=b;break a}b=b.return}throw Error(u(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(u(161));}c.effectTag&16&&(Rb(b,\"\"),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Oi(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;\nif(null===c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Qi(a,c,b):Ri(a,c,b)}\nfunction Qi(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=sd));else if(4!==d&&(a=a.child,null!==a))for(Qi(a,b,c),a=a.sibling;null!==a;)Qi(a,b,c),a=a.sibling}\nfunction Ri(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Ri(a,b,c),a=a.sibling;null!==a;)Ri(a,b,c),a=a.sibling}\nfunction Mi(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(u(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=a,k=d,l=c,m=k;;)if(Ki(h,m,l),null!==m.child&&4!==m.tag)m.child.return=m,m=m.child;else{if(m===k)break a;for(;null===m.sibling;){if(null===m.return||m.return===k)break a;m=m.return}m.sibling.return=m.return;m=m.sibling}g?(h=\nf,k=d.stateNode,8===h.nodeType?h.parentNode.removeChild(k):h.removeChild(k)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ki(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}\nfunction Si(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Hi(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[Nd]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&Bb(c,d);pd(a,e);b=pd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],h=f[e+1];\"style\"===g?md(c,h):\"dangerouslySetInnerHTML\"===g?Qb(c,h):\"children\"===g?Rb(c,h):Xa(c,g,h,b)}switch(a){case \"input\":Cb(c,d);break;\ncase \"textarea\":Kb(c,d);break;case \"select\":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?Hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?Hb(c,!!d.multiple,d.defaultValue,!0):Hb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(u(162));b.stateNode.nodeValue=b.memoizedProps;return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,Vc(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?\nd=!1:(d=!0,c=b.child,Ti=$f());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null,f.style.display=ld(\"display\",e));else if(6===a.tag)a.stateNode.nodeValue=d?\"\":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=\nf;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Ui(b);return;case 19:Ui(b);return;case 17:return}throw Error(u(163));}function Ui(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Bi);b.forEach(function(b){var d=Vi.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nvar Wi=\"function\"===typeof WeakMap?WeakMap:Map;function Xi(a,b,c){c=wg(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Yi||(Yi=!0,Zi=d);Ci(a,b)};return c}\nfunction $i(a,b,c){c=wg(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ci(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===aj?aj=new Set([this]):aj.add(this),Ci(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nvar bj=Math.ceil,cj=Wa.ReactCurrentDispatcher,dj=Wa.ReactCurrentOwner,V=0,ej=8,fj=16,gj=32,ti=0,hj=1,ij=2,ui=3,vi=4,jj=5,W=V,T=null,X=null,U=0,S=ti,kj=null,lj=1073741823,mj=1073741823,nj=null,wi=0,oj=!1,Ti=0,pj=500,Y=null,Yi=!1,Zi=null,aj=null,qj=!1,rj=null,sj=90,tj=null,uj=0,vj=null,wj=0;function Gg(){return(W&(fj|gj))!==V?1073741821-($f()/10|0):0!==wj?wj:wj=1073741821-($f()/10|0)}\nfunction Hg(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=ag();if(0===(b&4))return 99===d?1073741823:1073741822;if((W&fj)!==V)return U;if(null!==c)a=hg(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=hg(a,150,100);break;case 97:case 96:a=hg(a,5E3,250);break;case 95:a=2;break;default:throw Error(u(326));}null!==T&&a===U&&--a;return a}\nfunction Ig(a,b){if(50<uj)throw uj=0,vj=null,Error(u(185));a=xj(a,b);if(null!==a){var c=ag();1073741823===b?(W&ej)!==V&&(W&(fj|gj))===V?yj(a):(Z(a),W===V&&gg()):Z(a);(W&4)===V||98!==c&&99!==c||(null===tj?tj=new Map([[a,b]]):(c=tj.get(a),(void 0===c||c>b)&&tj.set(a,b)))}}\nfunction xj(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&(T===e&&(Bg(b),S===vi&&xi(e,U)),yi(e,b));return e}\nfunction zj(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Aj(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}\nfunction Z(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=eg(yj.bind(null,a));else{var b=zj(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=Gg();1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Tf&&Kf(c)}a.callbackExpirationTime=\nb;a.callbackPriority=d;b=1073741823===b?eg(yj.bind(null,a)):dg(d,Bj.bind(null,a),{timeout:10*(1073741821-b)-$f()});a.callbackNode=b}}}\nfunction Bj(a,b){wj=0;if(b)return b=Gg(),Cj(a,b),Z(a),null;var c=zj(a);if(0!==c){b=a.callbackNode;if((W&(fj|gj))!==V)throw Error(u(327));Dj();a===T&&c===U||Ej(a,c);if(null!==X){var d=W;W|=fj;var e=Fj();do try{Gj();break}catch(h){Hj(a,h)}while(1);ng();W=d;cj.current=e;if(S===hj)throw b=kj,Ej(a,c),xi(a,c),Z(a),b;if(null===X)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=S,T=null,d){case ti:case hj:throw Error(u(345));case ij:Cj(a,2<c?2:c);break;case ui:xi(a,c);d=a.lastSuspendedTime;\nc===d&&(a.nextKnownPendingLevel=Ij(e));if(1073741823===lj&&(e=Ti+pj-$f(),10<e)){if(oj){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=c;Ej(a,c);break}}f=zj(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=Hd(Jj.bind(null,a),e);break}Jj(a);break;case vi:xi(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ij(e));if(oj&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;Ej(a,c);break}e=zj(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=\nd;break}1073741823!==mj?d=10*(1073741821-mj)-$f():1073741823===lj?d=0:(d=10*(1073741821-lj)-5E3,e=$f(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*bj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=Hd(Jj.bind(null,a),d);break}Jj(a);break;case jj:if(1073741823!==lj&&null!==nj){f=lj;var g=nj;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=$f()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){xi(a,c);a.timeoutHandle=\nHd(Jj.bind(null,a),d);break}}Jj(a);break;default:throw Error(u(329));}Z(a);if(a.callbackNode===b)return Bj.bind(null,a)}}return null}\nfunction yj(a){var b=a.lastExpiredTime;b=0!==b?b:1073741823;if((W&(fj|gj))!==V)throw Error(u(327));Dj();a===T&&b===U||Ej(a,b);if(null!==X){var c=W;W|=fj;var d=Fj();do try{Kj();break}catch(e){Hj(a,e)}while(1);ng();W=c;cj.current=d;if(S===hj)throw c=kj,Ej(a,b),xi(a,b),Z(a),c;if(null!==X)throw Error(u(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;T=null;Jj(a);Z(a)}return null}function Lj(){if(null!==tj){var a=tj;tj=null;a.forEach(function(a,c){Cj(c,a);Z(c)});gg()}}\nfunction Mj(a,b){var c=W;W|=1;try{return a(b)}finally{W=c,W===V&&gg()}}function Nj(a,b){var c=W;W&=-2;W|=ej;try{return a(b)}finally{W=c,W===V&&gg()}}\nfunction Ej(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Id(c));if(null!==X)for(c=X.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Df();break;case 3:eh();H(K);H(J);break;case 5:gh(d);break;case 4:eh();break;case 13:H(M);break;case 19:H(M);break;case 10:og(d)}c=c.return}T=a;X=Sg(a.current,null);U=b;S=ti;kj=null;mj=lj=1073741823;nj=null;wi=0;oj=!1}\nfunction Hj(a,b){do{try{ng();jh.current=sh;if(mh)for(var c=N.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}lh=0;P=O=N=null;mh=!1;if(null===X||null===X.return)return S=hj,kj=b,X=null;a:{var e=a,f=X.return,g=X,h=b;b=U;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&\"object\"===typeof h&&\"function\"===typeof h.then){var k=h;if(0===(g.mode&2)){var l=g.alternate;l?(g.updateQueue=l.updateQueue,g.memoizedState=l.memoizedState,g.expirationTime=l.expirationTime):(g.updateQueue=\nnull,g.memoizedState=null)}var m=0!==(M.current&1),p=f;do{var x;if(x=13===p.tag){var z=p.memoizedState;if(null!==z)x=null!==z.dehydrated?!0:!1;else{var ca=p.memoizedProps;x=void 0===ca.fallback?!1:!0!==ca.unstable_avoidThisFallback?!0:m?!1:!0}}if(x){var D=p.updateQueue;if(null===D){var t=new Set;t.add(k);p.updateQueue=t}else D.add(k);if(0===(p.mode&2)){p.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var y=wg(1073741823,null);y.tag=2;xg(g,y)}g.expirationTime=1073741823;\nbreak a}h=void 0;g=b;var A=e.pingCache;null===A?(A=e.pingCache=new Wi,h=new Set,A.set(k,h)):(h=A.get(k),void 0===h&&(h=new Set,A.set(k,h)));if(!h.has(g)){h.add(g);var q=Oj.bind(null,e,k,g);k.then(q,q)}p.effectTag|=4096;p.expirationTime=b;break a}p=p.return}while(null!==p);h=Error((pb(g.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\"+qb(g))}S!==\njj&&(S=ij);h=Ai(h,g);p=f;do{switch(p.tag){case 3:k=h;p.effectTag|=4096;p.expirationTime=b;var B=Xi(p,k,b);yg(p,B);break a;case 1:k=h;var w=p.type,ub=p.stateNode;if(0===(p.effectTag&64)&&(\"function\"===typeof w.getDerivedStateFromError||null!==ub&&\"function\"===typeof ub.componentDidCatch&&(null===aj||!aj.has(ub)))){p.effectTag|=4096;p.expirationTime=b;var vb=$i(p,k,b);yg(p,vb);break a}}p=p.return}while(null!==p)}X=Pj(X)}catch(Xc){b=Xc;continue}break}while(1)}\nfunction Fj(){var a=cj.current;cj.current=sh;return null===a?sh:a}function Ag(a,b){a<lj&&2<a&&(lj=a);null!==b&&a<mj&&2<a&&(mj=a,nj=b)}function Bg(a){a>wi&&(wi=a)}function Kj(){for(;null!==X;)X=Qj(X)}function Gj(){for(;null!==X&&!Uf();)X=Qj(X)}function Qj(a){var b=Rj(a.alternate,a,U);a.memoizedProps=a.pendingProps;null===b&&(b=Pj(a));dj.current=null;return b}\nfunction Pj(a){X=a;do{var b=X.alternate;a=X.return;if(0===(X.effectTag&2048)){b=si(b,X,U);if(1===U||1!==X.childExpirationTime){for(var c=0,d=X.child;null!==d;){var e=d.expirationTime,f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}X.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=X.firstEffect),null!==X.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=X.firstEffect),a.lastEffect=X.lastEffect),1<X.effectTag&&(null!==\na.lastEffect?a.lastEffect.nextEffect=X:a.firstEffect=X,a.lastEffect=X))}else{b=zi(X);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=2048)}b=X.sibling;if(null!==b)return b;X=a}while(null!==X);S===ti&&(S=jj);return null}function Ij(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function Jj(a){var b=ag();cg(99,Sj.bind(null,a,b));return null}\nfunction Sj(a,b){do Dj();while(null!==rj);if((W&(fj|gj))!==V)throw Error(u(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(u(177));a.callbackNode=null;a.callbackExpirationTime=0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ij(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=\nd-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===T&&(X=T=null,U=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=W;W|=gj;dj.current=null;Dd=fd;var g=xd();if(yd(g)){if(\"selectionStart\"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var k=h.getSelection&&h.getSelection();if(k&&0!==k.rangeCount){h=k.anchorNode;var l=k.anchorOffset,\nm=k.focusNode;k=k.focusOffset;try{h.nodeType,m.nodeType}catch(wb){h=null;break a}var p=0,x=-1,z=-1,ca=0,D=0,t=g,y=null;b:for(;;){for(var A;;){t!==h||0!==l&&3!==t.nodeType||(x=p+l);t!==m||0!==k&&3!==t.nodeType||(z=p+k);3===t.nodeType&&(p+=t.nodeValue.length);if(null===(A=t.firstChild))break;y=t;t=A}for(;;){if(t===g)break b;y===h&&++ca===l&&(x=p);y===m&&++D===k&&(z=p);if(null!==(A=t.nextSibling))break;t=y;y=t.parentNode}t=A}h=-1===x||-1===z?null:{start:x,end:z}}else h=null}h=h||{start:0,end:0}}else h=\nnull;Ed={activeElementDetached:null,focusedElem:g,selectionRange:h};fd=!1;Y=e;do try{Tj()}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);Y=e;do try{for(g=a,h=b;null!==Y;){var q=Y.effectTag;q&16&&Rb(Y.stateNode,\"\");if(q&128){var B=Y.alternate;if(null!==B){var w=B.ref;null!==w&&(\"function\"===typeof w?w(null):w.current=null)}}switch(q&1038){case 2:Pi(Y);Y.effectTag&=-3;break;case 6:Pi(Y);Y.effectTag&=-3;Si(Y.alternate,Y);break;case 1024:Y.effectTag&=-1025;break;case 1028:Y.effectTag&=\n-1025;Si(Y.alternate,Y);break;case 4:Si(Y.alternate,Y);break;case 8:l=Y,Mi(g,l,h),Ni(l)}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);w=Ed;B=xd();q=w.focusedElem;h=w.selectionRange;if(B!==q&&q&&q.ownerDocument&&wd(q.ownerDocument.documentElement,q)){null!==h&&yd(q)&&(B=h.start,w=h.end,void 0===w&&(w=B),\"selectionStart\"in q?(q.selectionStart=B,q.selectionEnd=Math.min(w,q.value.length)):(w=(B=q.ownerDocument||document)&&B.defaultView||window,w.getSelection&&\n(w=w.getSelection(),l=q.textContent.length,g=Math.min(h.start,l),h=void 0===h.end?g:Math.min(h.end,l),!w.extend&&g>h&&(l=h,h=g,g=l),l=vd(q,g),m=vd(q,h),l&&m&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==m.node||w.focusOffset!==m.offset)&&(B=B.createRange(),B.setStart(l.node,l.offset),w.removeAllRanges(),g>h?(w.addRange(B),w.extend(m.node,m.offset)):(B.setEnd(m.node,m.offset),w.addRange(B))))));B=[];for(w=q;w=w.parentNode;)1===w.nodeType&&B.push({element:w,left:w.scrollLeft,\ntop:w.scrollTop});\"function\"===typeof q.focus&&q.focus();for(q=0;q<B.length;q++)w=B[q],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}fd=!!Dd;Ed=Dd=null;a.current=c;Y=e;do try{for(q=a;null!==Y;){var ub=Y.effectTag;ub&36&&Ji(q,Y.alternate,Y);if(ub&128){B=void 0;var vb=Y.ref;if(null!==vb){var Xc=Y.stateNode;switch(Y.tag){case 5:B=Xc;break;default:B=Xc}\"function\"===typeof vb?vb(B):vb.current=B}}Y=Y.nextEffect}}catch(wb){if(null===Y)throw Error(u(330));Ei(Y,wb);Y=Y.nextEffect}while(null!==Y);Y=\nnull;Vf();W=f}else a.current=c;if(qj)qj=!1,rj=a,sj=b;else for(Y=e;null!==Y;)b=Y.nextEffect,Y.nextEffect=null,Y=b;b=a.firstPendingTime;0===b&&(aj=null);1073741823===b?a===vj?uj++:(uj=0,vj=a):uj=0;\"function\"===typeof Uj&&Uj(c.stateNode,d);Z(a);if(Yi)throw Yi=!1,a=Zi,Zi=null,a;if((W&ej)!==V)return null;gg();return null}function Tj(){for(;null!==Y;){var a=Y.effectTag;0!==(a&256)&&Gi(Y.alternate,Y);0===(a&512)||qj||(qj=!0,dg(97,function(){Dj();return null}));Y=Y.nextEffect}}\nfunction Dj(){if(90!==sj){var a=97<sj?97:sj;sj=90;return cg(a,Vj)}}function Vj(){if(null===rj)return!1;var a=rj;rj=null;if((W&(fj|gj))!==V)throw Error(u(331));var b=W;W|=gj;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Hi(5,c),Ii(5,c)}}catch(d){if(null===a)throw Error(u(330));Ei(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}W=b;gg();return!0}\nfunction Wj(a,b,c){b=Ai(c,b);b=Xi(a,b,1073741823);xg(a,b);a=xj(a,1073741823);null!==a&&Z(a)}function Ei(a,b){if(3===a.tag)Wj(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Wj(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===aj||!aj.has(d))){a=Ai(b,a);a=$i(c,a,1073741823);xg(c,a);c=xj(c,1073741823);null!==c&&Z(c);break}}c=c.return}}\nfunction Oj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);T===a&&U===c?S===vi||S===ui&&1073741823===lj&&$f()-Ti<pj?Ej(a,U):oj=!0:Aj(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,Z(a)))}function Vi(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=Gg(),b=Hg(b,a,null));a=xj(a,b);null!==a&&Z(a)}var Rj;\nRj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||K.current)rg=!0;else{if(d<c){rg=!1;switch(b.tag){case 3:hi(b);Xh();break;case 5:fh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:L(b.type)&&Gf(b);break;case 4:dh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;I(jg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;\nif(0!==d&&d>=c)return ji(a,b,c);I(M,M.current&1);b=$h(a,b,c);return null!==b?b.sibling:null}I(M,M.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return mi(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);I(M,M.current);if(!d)return null}return $h(a,b,c)}rg=!1}}else rg=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=Cf(b,J.current);qg(b,c);e=oh(null,\nb,d,a,e,c);b.effectTag|=1;if(\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(L(d)){var f=!0;Gf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ug(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Fg(b,d,g,a);e.updater=Jg;b.stateNode=e;e._reactInternalFiber=b;Ng(b,d,a,c);b=gi(null,b,d,!0,f,c)}else b.tag=0,R(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=\nnull,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ob(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Xj(e);a=ig(e,a);switch(f){case 0:b=di(null,b,e,a,c);break a;case 1:b=fi(null,b,e,a,c);break a;case 11:b=Zh(null,b,e,a,c);break a;case 14:b=ai(null,b,e,ig(e.type,a),d,c);break a}throw Error(u(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),di(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),fi(a,b,d,e,c);\ncase 3:hi(b);d=b.updateQueue;if(null===a||null===d)throw Error(u(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;vg(a,b);zg(b,d,null,c);d=b.memoizedState.element;if(d===e)Xh(),b=$h(a,b,c);else{if(e=b.stateNode.hydrate)Ph=Jd(b.stateNode.containerInfo.firstChild),Oh=b,e=Qh=!0;if(e)for(c=Yg(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else R(a,b,d,c),Xh();b=b.child}return b;case 5:return fh(b),null===a&&Uh(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:\nnull,g=e.children,Gd(d,e)?g=null:null!==f&&Gd(d,f)&&(b.effectTag|=16),ei(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(R(a,b,g,c),b=b.child),b;case 6:return null===a&&Uh(b),null;case 13:return ji(a,b,c);case 4:return dh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Xg(b,null,d,c):R(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),Zh(a,b,d,e,c);case 7:return R(a,b,b.pendingProps,c),b.child;case 8:return R(a,\nb,b.pendingProps.children,c),b.child;case 12:return R(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(jg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=$e(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!K.current){b=$h(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==\nk){g=h.child;for(var l=k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=wg(c,null),l.tag=2,xg(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);pg(h.return,c);k.expirationTime<c&&(k.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=\ng}R(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,qg(b,c),e=sg(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,R(a,b,d,c),b.child;case 14:return e=b.type,f=ig(e,b.pendingProps),f=ig(e.type,f),ai(a,b,e,f,d,c);case 15:return ci(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ig(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,L(d)?(a=!0,Gf(b)):a=!1,qg(b,c),Lg(b,d,e),Ng(b,d,e,c),gi(null,\nb,d,!0,a,c);case 19:return mi(a,b,c)}throw Error(u(156,b.tag));};var Uj=null,Li=null;function Yj(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Uj=function(a){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(e){}};Li=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}\nfunction Zj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Sh(a,b,c,d){return new Zj(a,b,c,d)}\nfunction bi(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Xj(a){if(\"function\"===typeof a)return bi(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===gb)return 11;if(a===jb)return 14}return 2}\nfunction Sg(a,b){var c=a.alternate;null===c?(c=Sh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,\nfirstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Ug(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)bi(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ab:return Wg(c.children,e,f,b);case fb:g=8;e|=7;break;case bb:g=8;e|=1;break;case cb:return a=Sh(12,c,b,e|8),a.elementType=cb,a.type=cb,a.expirationTime=f,a;case hb:return a=Sh(13,c,b,e),a.type=hb,a.elementType=hb,a.expirationTime=f,a;case ib:return a=Sh(19,c,b,e),a.elementType=ib,a.expirationTime=f,a;default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case db:g=\n10;break a;case eb:g=9;break a;case gb:g=11;break a;case jb:g=14;break a;case kb:g=16;d=null;break a;case lb:g=22;break a}throw Error(u(130,null==a?a:typeof a,\"\"));}b=Sh(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Wg(a,b,c,d){a=Sh(7,a,d,b);a.expirationTime=c;return a}function Tg(a,b,c){a=Sh(6,a,null,b);a.expirationTime=c;return a}\nfunction Vg(a,b,c){b=Sh(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction ak(a,b,c){this.tag=b;this.current=null;this.containerInfo=a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}\nfunction Aj(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function xi(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}\nfunction yi(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Cj(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}\nfunction bk(a,b,c,d){var e=b.current,f=Gg(),g=Dg.suspense;f=Hg(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(dc(c)!==c||1!==c.tag)throw Error(u(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(L(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(u(171));}if(1===c.tag){var k=c.type;if(L(k)){c=Ff(c,k,h);break a}}c=h}else c=Af;null===b.context?b.context=c:b.pendingContext=c;b=wg(f,g);b.payload={element:a};d=void 0===\nd?null:d;null!==d&&(b.callback=d);xg(e,b);Ig(e,f);return f}function ck(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function dk(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function ek(a,b){dk(a,b);(a=a.alternate)&&dk(a,b)}\nfunction fk(a,b,c){c=null!=c&&!0===c.hydrate;var d=new ak(a,b,c),e=Sh(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ug(e);a[Od]=d.current;c&&0!==b&&Jc(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}fk.prototype.render=function(a){bk(a,this._internalRoot,null,null)};fk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;bk(null,a,null,function(){b[Od]=null})};\nfunction gk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function hk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new fk(a,0,b?{hydrate:!0}:void 0)}\nfunction ik(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=ck(g);h.call(a)}}bk(b,g,a,e)}else{f=c._reactRootContainer=hk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=ck(g);k.call(a)}}Nj(function(){bk(b,g,a,e)})}return ck(g)}function jk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$a,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nwc=function(a){if(13===a.tag){var b=hg(Gg(),150,100);Ig(a,b);ek(a,b)}};xc=function(a){13===a.tag&&(Ig(a,3),ek(a,3))};yc=function(a){if(13===a.tag){var b=Gg();b=Hg(b,a,null);Ig(a,b);ek(a,b)}};\nza=function(a,b,c){switch(b){case \"input\":Cb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Qd(d);if(!e)throw Error(u(90));yb(d);Cb(d,e)}}}break;case \"textarea\":Kb(a,c);break;case \"select\":b=c.value,null!=b&&Hb(a,!!c.multiple,b,!1)}};Fa=Mj;\nGa=function(a,b,c,d,e){var f=W;W|=4;try{return cg(98,a.bind(null,b,c,d,e))}finally{W=f,W===V&&gg()}};Ha=function(){(W&(1|fj|gj))===V&&(Lj(),Dj())};Ia=function(a,b){var c=W;W|=2;try{return a(b)}finally{W=c,W===V&&gg()}};function kk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(b))throw Error(u(200));return jk(a,b,null,c)}var lk={Events:[Nc,Pd,Qd,xa,ta,Xd,function(a){jc(a,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};\n(function(a){var b=a.findFiberByHostInstance;return Yj(n({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=hc(a);return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:tc,bundleType:0,version:\"16.13.1\",\nrendererPackageName:\"react-dom\"});exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;exports.createPortal=kk;exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===b){if(\"function\"===typeof a.render)throw Error(u(188));throw Error(u(268,Object.keys(a)));}a=hc(b);a=null===a?null:a.stateNode;return a};\nexports.flushSync=function(a,b){if((W&(fj|gj))!==V)throw Error(u(187));var c=W;W|=1;try{return cg(99,a.bind(null,b))}finally{W=c,gg()}};exports.hydrate=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!0,c)};exports.render=function(a,b,c){if(!gk(b))throw Error(u(200));return ik(null,a,b,!1,c)};\nexports.unmountComponentAtNode=function(a){if(!gk(a))throw Error(u(40));return a._reactRootContainer?(Nj(function(){ik(null,null,a,!1,function(){a._reactRootContainer=null;a[Od]=null})}),!0):!1};exports.unstable_batchedUpdates=Mj;exports.unstable_createPortal=function(a,b){return kk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!gk(c))throw Error(u(200));if(null==a||void 0===a._reactInternalFiber)throw Error(u(38));return ik(a,b,c,!1,d)};exports.version=\"16.13.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.19.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var f,g,h,k,l;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(t,0),b;}},u=Date.now();exports.unstable_now=function(){return Date.now()-u};f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))};g=function(a,b){q=setTimeout(a,b)};h=function(){clearTimeout(q)};k=function(){return!1};l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,\ny=window.setTimeout,z=window.clearTimeout;if(\"undefined\"!==typeof console){var A=window.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\");\"function\"!==typeof A&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")}if(\"object\"===\ntypeof w&&\"function\"===typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G};l=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):F=0<a?Math.floor(1E3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=\nfunction(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b;}}else C=!1};f=function(a){D=a;C||(C=!0,I.postMessage(null))};g=function(a,b){E=y(function(){a(exports.unstable_now())},b)};h=function(){z(E);E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<K(e,b))a[d]=b,a[c]=e,c=d;else break a}}function L(a){a=a[0];return void 0===a?null:a}\nfunction M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>K(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;\nfunction V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else if(b.startTime<=a)M(O),b.sortIndex=b.expirationTime,J(N,b);else break;b=L(O)}}function W(a){U=!1;V(a);if(!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}\nfunction X(a,b){T=!1;U&&(U=!1,h());S=!0;var c=R;try{V(b);for(Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null;R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?Q.callback=e:Q===L(N)&&M(N);V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b);m=!1}return m}finally{Q=null,R=c,S=!1}}\nfunction Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var Z=l;exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))};\nexports.unstable_getCurrentPriorityLevel=function(){return R};exports.unstable_getFirstCallbackNode=function(){return L(N)};exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=Z;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var e=c.delay;e=\"number\"===typeof e&&0<e?d+e:d;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;c=e+c;a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X)));return a};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()};exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}};\n"],"sourceRoot":""}